This file contains a list of things yet to be done (see also in doc/TODO):

Before next release
-------------------

* there is also undocumented features @hsep and @vsep to insert
  horizontal and vertical rules.

* code_style is not used for code_style style @-commands in remove_texi.

* bug #15513 should be a warning when there is text before an item
  but otherwise an empty format.

* sectionning/nodes_test html style, the @top and the @node Top, 
  although distinct nodes end up in the same element. I think that 
  there is a FIXME in the code covering that issue.

* in sectionning, test of nodes_after_top_before_section not split
  at chapter. It is split at a node because top node is always considered
  as an element. there is a FIXME in the code. Maybe linked with the 
  previous item.

* something like (ask Karl)
@math{@minus{} {\frac{1}{2}}} 
  leads to errors in makeinfo about misplaced { } because it seems that
  @minus turns on texinfo mode or the like, while
@math{{\frac{1}{2}} @minus{}}
  is error free.

Asked on bug-texinfo:

* for makeinfo, the following are not the same, looks like -I is not taken
  into account with a leading ./:
@include ./d2t_singular/surf_lib_noEx.tex
@include d2t_singular/surf_lib_noEx.tex
  for texi2html they are the same.

* the code of xml.c in makeinfo shows specific treatement of & in 
  definition arguments. I don't know what it corresponds with. The
  formal definition argument parsing stuff is certainly worth asking
  on the texinfo list.

* makeinfo warn when there is no @settitle nor @top where it finds its title
in texi2tml there is no warning, and also the title is constructed
differently.
 ../../sectionning.texi:4: warning: Must specify a title with least one of @settitle or @top.

* makeinfo in title, for @code{something} leads to `something'. In 
texi2html all the style commands are removed without extra formatting.


* What are the encodings known by info? 
  unrecognized encoding name `ascii'.

* '00D8' which is Oslash is transliterated on OE?

* makeinfo: multiple index entries have <1>... appended.
  or they are removed. Ask on the list.

Later
-----

* many FIXME in the code

* Create detailed texinfo documentation (see in doc)

* add sample init files for different layouts
  - use events (onmousover, etc) for anchors
  - use style-sheets for formatting of various elements (like @example,
  etc).
  - xhtml with in line style
  - Singular manual style
  - How complicated could it be to get a creation of SGML ?
  - to LaTeX
  - to RTF
  - to open document

* document css classes, and have similar classes with makeinfo
-  makeinfo classes:
ul menu, 
ul index-cp index-*, 
div node (navigation bar), 

- texi2html classes:
table index-cp index-*, 
table menu, 
h3 node
ul toc,

- same classes:
pre verbatim, 
pre example display...,
table cartouche, 
small dots, small enddots, 
div contents shortcontents, div footnote, 
h? unnumbered chapter appendix...,
h1 settitle (title before contents, if not set by titlefont),
h1 titlefont (@titlefont),

* Document 
  Texi2HTML::THIS_ELEMENT
  $NEW_CROSSREF_STYLE, $EXTERNAL_CROSSREF_SPLIT, $INLINE_INSERTCOPYING
  $OVERVIEW_LINK_TO_TOC
  $Texi2HTML::THISDOC{'htmlxref'}
  $Texi2HTML::THISDOC{macro name}
  $Texi2HTML::THISDOC{'hyphenation'}
  $Texi2HTML::THISDOC{'do_about'}
  $Texi2HTML::THISDOC{'split_level'}
  $Texi2HTML::THISDOC{'line_nr'}
  $Texi2HTML::THISDOC{'input_directory'}

  $empty_preformatted
  $copying_comment, $titlepage better and $documentdescription
  $program_string, $footnote_texi
  $heading arguments and the whole heading and heading_element relationship
  $begin_paragraph_texi $tab_item_texi $begin_style_texi
  $begin_special_region $end_special_region $simple_command $thing_command
  Also element formatting documentation, especially print_foot_navigation
  is not up to date.
  new arguments and return args of index_summary_letter
  new argument of def
  new argument of def_item
  new arguments of list_item
  new argument of inline_content
  $shortcontents and $contents
  $misc_command_line
  new argument of printindex
  new arguments of $unknown_style
  NODE_FILENAMES
  $Texi2HTML::THISDOC{'format_from_command_line'}
  language_codes
  region_codes
  $PROGRAM_NAME_IN_FOOTER
  $HEADER_IN_TABLE
  button_formatting
  TOP_BUTTONS
  print_redirection_page?
  new argument of menu_link
  

* document the 'math' in 'args', in style_map, and simple_*math*. It
  could also be more flexible and similar with other environments, that
  is not only add a fixed key, but duplicate all the keys and add one.
  Documentation should only done once the interface is stable.

* document the new $image arguments/API

* in chm.init (Jose Fonseca)

[WINDOWS]
 
Default=,"ug.hhc","ug.hhk","ug.html","ug.html",,,,,0x22520,,0x384e,,,,,,,,0

The numbers are a bitmask of the enabled buttons. The ones here are
IMO a good default. In the future you may also add that as an
option, as the Docbook XSL stylesheets do (see in
http://docbook.sourceforge.net/release/xsl/snapshot/doc/html/rn20.html
all the CHM related parameters one can change).

* antispam @email
<script type="text/javascript">
<!--
/* This hacks the DOM so that copy&paste in Firefox ignores the "nospam"
   spans. */
function clean_antispam() {
  document.getElementById("span1").firstChild.nodeValue = "";
  document.getElementById("span2").firstChild.nodeValue = "";
}
//-->
</script>

<body onLoad="clean_antispam()">
<tt>&lt;bug-gnulib<span id="span1" style="display:none;">-nospam</span>&#64;<span id="span2" style="display:none;">nospam.</span>gnu.org&gt;</tt>
</body>

* roff is not uptodate. At least the @quote* and @guillem* and many 
  others.

* add @detailmenu in coverage, and @group

* test for @deffn with end of line protected in @footnote (to test 
  end of line protection in keep_texi).

* empty lines in @hyphenation are not valid for texi2dvi

* manuals/mini_ker result is not valid, but it looks like a validate bug?
  In any case, it may make sense to have @tex not starting paragraph,
  like @html, at least when expanding it.

* texi2dvi doesn't accept @table in @format

* warnings and errors are somewhat random at present. Also it would be nice
  to have the same error messages than makeinfo.

* when there are nested complex_formats, a small format that doesn't have
  style, like smalldisplay in a format with style, like example, the
  smalldisplay will use the class of the above format, and lose the 
  small font property.

* decide @documentencoding @. And maybe change regexp. (?)

* test for something along:
@setfilename ../../info/xemacs.info

* docbook: in function no style. 
  replaceable is for @var or function argument. Only characters.

  Instead of synopsis may use specialized synopsis, funcsynopsis/funcprototype
  for deftype*, funcdef for defffn, ooclass for object oriented.

  also informalfigure in @float

  also use informaltable or table, for multitable?

  What is before the first sectionning command is put in <bookinfo><abstract>.

  what about @titlefont in docbook?

* to solve above issue (first issue), the definition arg formatted with 
  simple_format should alo be passed down

* in docbook, when there is only one section <article> should be better
  than book. Maybe the best way to do that would be passing the 
  information that there is only one section to the functions formatting
  the page header and page footer.

* now config variables are read-only after command line switches
  expansion. If defined, they set $Texi2HTML::THISDOC{'VAR'}
  and if not defined, $Texi2HTML::THISDOC{'VAR'} is autodetected.
  $Texi2HTML::THISDOC{'VAR'} is then used in the code.

  This means that, if a variable that was not autodetected becomes
  autodetected, the code will have to switch to using 
  $Texi2HTML::THISDOC{'VAR'} instead of $VAR. This is very bad since it
  means API breaking.

  All that is now more or less encapsulated in get_conf, but the 
  problem remains.

* failures with split index between node and section in indices/
  makeinfo_index_split first.html is missing
  makeinfo_nodes_before_top_and_sections needs to be checkedd (first 
                              should be in first.html?).

* add --command command line that gives inserted lines.

* @ogonek has 2 test files, and is in coverage. Maybe add it to encoding/*
  where other accents are used too. Or maybe tests should be more focused?

* @kbdinputstyle should be taken into account in html output, which
  means distinguish between preformatted, code_style and normal text 
  when formatting @kbd. Should this distinction hold for every command?
  Also it should be dynamical, ie in pass 2 too (FIXME in the code).
  In info it is right to have it always in quotes.

* have a special debug mode where text processing is traced. It means
  that PASS_TEXT/SCAN_TEXT is shown and substitute_line (and maybe 
  other like substitute_text) and shown, now that there is a nice 
  context information.

* when closing @-commands with braces in first passes, the braces are not
  output in order to correct the document. However, end of formats are output
  in the first pass (and therefore these formats cannot be wrong in 
  other passes, and nothing is done to close them). Also it is not clear where
  error messages should appear. Indeed in the first pass the line count
  are less precise since commands are closed at the end of file, not when 
  finding a @node or @section. If error messages are done in pass_text, 
  they won't be output when only macros are expanded, but maybe it is better
  like that? (and in makeinfo compatibility mode, a normal processing
  will be done with -E).

* @anchor{} should always ignore following whitespace (including newlines).
  Karl insists on that for backward compatibility.

* ignore spaces after @ command, before {, like texi2dvi does? Karl 
  insists on that because TeX has to do it like that.

* in info, @. @! and @? should always be followed by at least 2 spaces
  even in text, not only on end of lines. Also the number of spaces after
  a . in the text may be adjusted to 2. It is not sure, though, whether
  we should do it or leave it  to the user. There is a bug:
  https://savannah.gnu.org/bugs/?20444

* add tests for -o - and input coming from stdin, including check of 
  out file names.
  also -o /dev/null and similar.
  There is also a check in layout/formatting_exotic with 
  --internal-links=/dev/null which is not portable

* Perhaps we should also make an option -Werror which turns all warnings
  into errors.

* when determining the different letters and later sorting them, there 
  should not be transliteration, but instead perl sorting and i18n stuff
  should be used. Cf testcases in encoding/encoding_index*.
  Currently, for example for encoding_index-latin1 accented letters are
  at the end. And degree is at o...

* formatting/indicateurl_paragraph.texi there should be a warning that
  a simple_style was cut by a paragraph.

* invalid/node_in_copying there is no error message

* info/long_uref_after_item.texi report from Kevin Ryde,
  it would be logical to treat the space after the itemize mark as 
  a tie instead of a breakpoint.

* in sectionning/first_section_no_node in _html, the @unnumbered is included
  in the first node, while makeinfo outputs it before the first node, and 
  the header is only output when there is a @node.

* error messages
  *** waiting for end of quotation, found @end cartouche (l. 12)
  ../../bad_nesting.texi:13: `@end' expected `quotation', but saw `cartouche'.

  *** closing `group' (l. 36)
  ../../bad_nesting.texi:34: No matching `@end group'.

  closing @-command code (l. 18)
  ../../code_not_closed.texi:16: @code missing close brace.

  ** closing @-command footnote (l. 17)
  ../../footnote_not_closed.texi:30: No closing brace for footnote `'.

  *** closing `quotation' (l. 24)
  ../../footnote_not_closed.texi:54: No matching `@end quotation'.

* in formatting/table_in_table_item.texi, some lines maybe have too much 
  leading spaces (precisely in @code in @table in @table @item, line
in nested table line

* In japanese.texi lines are not cut right.

* formatting/float_copying index entries in insertcopying are not right.
  Maybe it is because they are in footnotes. Or maybe because they are
  in a caption.

* in examples/chm.init use main::open_out to open files.

* examples/mediwiki.init: images are like
[[Image:New-medium.png|Nouveau medium disponible]]
  Many constructs should be mediawikified

* in xml have documentencoding have an argument.

* sectionning/top_without_node/out_html index.html is the name of the second
  node file

* for https://savannah.gnu.org/bugs/?25820 it is unclear whether &amp;
  is correct for & or not

* from https://savannah.gnu.org/bugs/?22696, encodings/chinese_mixed_with_en
  the info output is not good with Chinese texts only, not aligned in source
  and a mix of English and Chinese texts.

* https://savannah.gnu.org/bugs/?8432 warn if multiple menus. I (pertusus)
  think that what is more important is that the menu happens at the end of 
  the node. This should caugth both double menus and all the other incorrect
  cases. Also this should be an info specific message.

* images.texi should be tested in xml too.


Misc info and boring stuff
--------------------------

* texi2html is immune to https://savannah.gnu.org/bugs/?25822

* the following is erroneous, but maybe it could be better handled anyway
-> error with @item on same line than @table
@xref{node,
@table @emph
@item line
text
@end table
}

* test @printindex in diverse contexts and handle right, or complain about
  things like
@code{
@printindex cp
}

* @macro definition in @ifset is parsed but ignored. So in the following, the
@end ifset appearing in the macro is ignored if 'a' is not set, and the 
macro isn't defined.

@ifset a
@macro bidule
@end ifset
@end macro
@end ifset

* certainly not a big deal, but in invalid/verb_not_closed @verb content
  is not output

* certainly not a big deal, but in invalid/bad_tab_nesting, the @code quotes
  are not surrounding the @tab, although there is no error message

* @insertcopying in @copying doesn't lead to error message with 
  INLINE_INSERTCOPYING. See invalid/recursive_copying

* In indices/makeinfo_index_nodes there is no elements, and thus no 
  [Index] link since it uses the index chapter (or @top), and there is 
  no chapter not @top.

* in index_split the section associated with indices is the numbered section
  not the associated node where the @cindex are. Good or bad?

* @chapter following a @appendix still uses a number for numbering, and
  is not affected by the @appendix number. Karl is ok with that.

* utf8.init doesn't work with info.init (see encodings/nodetest_to_utf8_latin1)

* menu_description is menucomment in xml. 
  menuentry is the menunode+menutitle+menucomment
  menu_comment in makeinfo --xml treated as normal text.
  the documentation, however uses the same words than in texi2html.

* enable_encoding.init is certainly dependent on USE_UNICODE through
the use of non 8 bit representation of characters.

