<div id="Connection"></div>
<div class="header">
<p>
Next: [[cvs: Other common problems#Other common problems|Other problems]], Previous: [[cvs: Partial list of error messages#Partial list of error messages|Error messages]], Up: [[cvs: Troubleshooting#Troubleshooting|Troubleshooting]] &nbsp; |[[cvs: Index#SEC_Contents|Contents]]||[[cvs: Index#Index|Index]]|</p>
</div>
<hr>
<div id="Trouble-making-a-connection-to-a-CVS-server"></div>
=== Trouble making a connection to a CVS server ===

This section concerns what to do if you are having
trouble making a connection to a <small>CVS</small> server.  If
you are running the <small>CVS</small> command line client
running on Windows, first upgrade the client to
<small>CVS</small> 1.9.12 or later.  The error reporting in
earlier versions provided much less information about
what the problem was.  If the client is non-Windows,
<small>CVS</small> 1.9 should be fine.

If the error messages are not sufficient to track down
the problem, the next steps depend largely on which
access method you are using.

<div id="index-_003aext_003a_002c-troubleshooting"></div>
;<code>:ext:</code>
: Try running the rsh program from the command line.  For example: &quot;rsh servername cvs -v&quot; should print <small>CVS</small> version information.  If this doesn&rsquo;t work, you need to fix it before you can worry about <small>CVS</small> problems.

<div id="index-_003aserver_003a_002c-troubleshooting"></div>
;<code>:server:</code>
: You don&rsquo;t need a command line rsh program to use this access method, but if you have an rsh program around, it may be useful as a debugging tool.  Follow the directions given for<nowiki> :</nowiki>ext:.

<div id="index-_003apserver_003a_002c-troubleshooting"></div>
;<code>:pserver:</code>
: Errors along the lines of &quot;connection refused&quot; typically indicate that inetd isn&rsquo;t even listening for connections on port 2401 whereas errors like &quot;connection reset by peer&quot;, &quot;received broken pipe signal&quot;, &quot;recv() from server: EOF&quot;, or &quot;end of file from server&quot; typically indicate that inetd is listening for connections but is unable to start <small>CVS</small> (this is frequently caused by having an incorrect path in &lsquo;<tt>inetd.conf</tt>&rsquo; or by firewall software rejecting the connection). &quot;unrecognized auth response&quot; errors are caused by a bad command line in &lsquo;<tt>inetd.conf</tt>&rsquo;, typically an invalid option or forgetting to put the &lsquo;<code>pserver</code>&rsquo; command at the end of the line. Another less common problem is invisible control characters that your editor &quot;helpfully&quot; added without you noticing.

: One good debugging tool is to &quot;telnet servername 2401&quot;.  After connecting, send any text (for example &quot;foo&quot; followed by return).  If <small>CVS</small> is working correctly, it will respond with

<table><tr><td>&nbsp;</td><td><div class="example">
 cvs <nowiki>[</nowiki>pserver aborted<nowiki>]</nowiki>: bad auth protocol start: foo
</div>
</td></tr></table>

: If instead you get:

<table><tr><td>&nbsp;</td><td><div class="example">
 Usage: cvs <nowiki>[</nowiki>cvs-options<nowiki>]</nowiki> command <nowiki>[</nowiki>command-options-and-arguments<nowiki>]</nowiki>
 ...
</div>
</td></tr></table>

: then you&rsquo;re missing the &lsquo;<code>pserver</code>&rsquo; command at the end of the line in &lsquo;<tt>inetd.conf</tt>&rsquo;; check to make sure that the entire command is on one line and that it&rsquo;s complete.

: Likewise, if you get something like:

<table><tr><td>&nbsp;</td><td><div class="example">
 Unknown command: `pserved'
 
 CVS commands are:
         add          Add a new file/directory to the repository
 ...
</div>
</td></tr></table>

: then you&rsquo;ve misspelled &lsquo;<code>pserver</code>&rsquo; in some way.  If it isn&rsquo;t obvious, check for invisible control characters (particularly carriage returns) in &lsquo;<tt>inetd.conf</tt>&rsquo;.

: If it fails to work at all, then make sure inetd is working right.  Change the invocation in &lsquo;<tt>inetd.conf</tt>&rsquo; to run the echo program instead of cvs.  For example:

<table><tr><td>&nbsp;</td><td><div class="example">
 2401  stream  tcp  nowait  root /bin/echo echo hello
</div>
</td></tr></table>

: After making that change and instructing inetd to re-read its configuration file, &quot;telnet servername 2401&quot; should show you the text hello and then the server should close the connection.  If this doesn&rsquo;t work, you need to fix it before you can worry about <small>CVS</small> problems.

: On AIX systems, the system will often have its own program trying to use port 2401.  This is AIX&rsquo;s problem in the sense that port 2401 is registered for use with <small>CVS</small>.  I hear that there is an AIX patch available to address this problem.

: Another good debugging tool is the &lsquo;<code>-d</code>&rsquo; (debugging) option to inetd.  Consult your system documentation for more information.

: If you seem to be connecting but get errors like:

<table><tr><td>&nbsp;</td><td><div class="example">
 cvs server: cannot open /root/.cvsignore: Permission denied
 cvs <nowiki>[</nowiki>server aborted<nowiki>]</nowiki>: can't chdir(/root): Permission denied
</div>
</td></tr></table>

: then you probably haven&rsquo;t specified &lsquo;<code>-f</code>&rsquo; in &lsquo;<tt>inetd.conf</tt>&rsquo;. (In releases prior to <small>CVS</small> 1.11.1, this problem can be caused by your system setting the <code>$HOME</code> environment variable for programs being run by inetd.  In this case, you can either have inetd run a shell script that unsets <code>$HOME</code> and then runs <small>CVS</small>, or you can use <code>env</code> to run <small>CVS</small> with a pristine environment.)

: If you can connect successfully for a while but then can&rsquo;t, you&rsquo;ve probably hit inetd&rsquo;s rate limit. (If inetd receives too many requests for the same service in a short period of time, it assumes that something is wrong and temporarily disables the service.) Check your inetd documentation to find out how to adjust the rate limit (some versions of inetd have a single rate limit, others allow you to set the limit for each service separately.)

<hr>
<div class="header">
<p>
Next: [[cvs: Other common problems#Other common problems|Other problems]], Previous: [[cvs: Partial list of error messages#Partial list of error messages|Error messages]], Up: [[cvs: Troubleshooting#Troubleshooting|Troubleshooting]] &nbsp; |[[cvs: Index#SEC_Contents|Contents]]||[[cvs: Index#Index|Index]]|</p>
</div>
This document was generated on <i>a sunny day</i> using [http://www.nongnu.org/texi2html/ <i>texi2html</i>].
