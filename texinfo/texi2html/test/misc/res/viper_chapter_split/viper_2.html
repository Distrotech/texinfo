<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on a sunny day by texi2html
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>Viper Is a Package for Emacs Rebels: 1. Overview of Viper</title>

<meta name="description" content="Viper Is a Package for Emacs Rebels: 1. Overview of Viper">
<meta name="keywords" content="Viper Is a Package for Emacs Rebels: 1. Overview of Viper">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="Overview"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="viper.html#Top" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Emacs-Preliminaries" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="viper.html#Top" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="viper.html#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="viper_3.html#Improvements-over-Vi" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="viper.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="viper_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="viper_7.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="viper_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Overview-of-Viper"></a>
<h1 class="chapter">1. Overview of Viper</h1>

<p>Viper is a Vi emulation on top of Emacs.  At the same time, Viper provides a
virtually unrestricted access to Emacs facilities.  Perfect compatibility
with Vi is possible but not desirable.  This chapter tells you about the
Emacs ideas that you should know about, how to use Viper within Emacs and
some incompatibilities.
</p>
<p>This manual is written with the assumption that you are an experienced Vi
user who wants to switch to Emacs while retaining the ability to edit files
Vi style. Incredible as it might seem, there are experienced Emacs users
who use Viper as a backdoor into the superior (as every Vi user already knows)
world of Vi! These users are well familiar with Emacs bindings and prefer them
in some cases, especially in the Vi Insert state. John Hawkins
&lt;jshawkin@eecs.umich.edu&gt; has provided a set of customizations, which
enables additional Emacs bindings under Viper.  These customizations can be
included in your &lsquo;<tt>~/.viper</tt>&rsquo; file and are found at the following URL:
&lsquo;<tt>http://www.eecs.umich.edu/~jshawkin/viper-sample</tt>&rsquo;.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Emacs-Preliminaries">1.1 Emacs Preliminaries</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Basic concepts in Emacs.
</td></tr>
<tr><td align="left" valign="top"><a href="#Loading-Viper">1.2 Loading Viper</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Loading and Preliminary Configuration.
</td></tr>
<tr><td align="left" valign="top"><a href="#States-in-Viper">1.3 States in Viper</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Viper has four states orthogonal to Emacs
                                modes.
</td></tr>
<tr><td align="left" valign="top"><a href="#The-Minibuffer">1.4 The Minibuffer</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Command line in Emacs.
</td></tr>
<tr><td align="left" valign="top"><a href="#Multiple-Files-in-Viper">1.5 Multiple Files in Viper</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     True multiple file handling.
</td></tr>
<tr><td align="left" valign="top"><a href="#Unimplemented-Features">1.6 Unimplemented Features</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      That are unlikely to be implemented.
</td></tr>
</table>

<hr size="6">
<a name="Emacs-Preliminaries"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Overview" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Loading-Viper" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Overview" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="viper_3.html#Improvements-over-Vi" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="viper.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="viper_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="viper_7.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="viper_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Emacs-Preliminaries-1"></a>
<h2 class="section">1.1 Emacs Preliminaries</h2>

<a name="index-buffer"></a>
<a name="index-point"></a>
<a name="index-mark"></a>
<a name="index-text"></a>
<a name="index-looking-at"></a>
<a name="index-end-_0028of-buffer_0029"></a>
<a name="index-end-_0028of-line_0029"></a>
<a name="index-region"></a>

<p>Emacs can edit several files at once.  A file in Emacs is placed in a
<em>buffer</em> that usually has the same name as the file.  Buffers are also used
for other purposes, such as shell interfaces, directory editing, etc.
See <a href="../emacs/Dired.html#Dired">(emacs)Dired</a> section &lsquo;Directory Editor&rsquo; in <cite>The Gnu Emacs Manual</cite>, for an example.
</p>
<p>A buffer has a distinguished position called the <em>point</em>.
A <em>point</em> is always between 2 characters, and is <em>looking at</em>
the right hand character.  The cursor is positioned on the right hand
character.  Thus, when the <em>point</em> is looking at the end-of-line,
the cursor is on the end-of-line character, i.e. beyond the last
character on the line.  This is the default Emacs behavior.
</p>
<p>The default settings of Viper try to mimic the behavior of Vi, preventing
the cursor from going beyond the last character on the line.  By using
Emacs commands directly (such as those bound to arrow keys), it is possible
to get the cursor beyond the end-of-line.  However, this won&rsquo;t (or
shouldn&rsquo;t) happen if you restrict yourself to standard Vi keys, unless you
modify the default editing style.  See section <a href="viper_4.html#Customization">Customization</a>.
</p>
<p>In addition to the <em>point</em>, there is another distinguished buffer
position called the <em>mark</em>.  See <a href="../emacs/Mark.html#Mark">(emacs)Mark</a> section &lsquo;Mark&rsquo; in <cite>The GNU Emacs manual</cite>, for more info on the mark.  The text between the <em>point</em> and
the <em>mark</em> is called the <em>region</em> of the buffer.  For the Viper
user, this simply means that in addition to the Vi textmarkers a&ndash;z, there
is another marker called <em>mark</em>.  This is similar to the unnamed Vi
marker used by the jump commands <kbd>``</kbd> and <kbd>''</kbd>, which move the
cursor to the position of the last absolute jump.  Viper provides access to
the region in most text manipulation commands as <kbd>r</kbd> and <kbd>R</kbd> suffix
to commands that operate on text regions, e.g., <kbd>dr</kbd> to delete region,
etc.
</p>
<p>Furthermore, Viper lets Ex-style commands to work on the current region.
This is done by typing a digit argument before <kbd>:</kbd>.  For instance,
typing <kbd>1:</kbd> will propmt you with something like <em>:123,135</em>,
assuming that the current region starts at line 123 and ends at line
135.  There is no need to type the line numbers, since Viper inserts them
automatically in front of the Ex command.
</p>
<p>See section <a href="viper_3.html#Basics">Basics</a>, for more info.
</p>
<a name="index-window"></a>
<a name="index-mode-line"></a>
<a name="index-buffer-information"></a>
<a name="index-Minibuffer"></a>
<a name="index-command-line"></a>
<a name="index-buffer-_0028modified_0029"></a>

<p>Emacs divides the screen into tiled <em>windows</em>.  You can see the
contents of a buffer through the window associated with the buffer.  The
cursor of the screen is positioned on the character after <em>point</em>.
Every window has a <em>mode line</em> that displays information about the buffer.
You can change the format of the mode
line, but normally if you see &lsquo;<samp>**</samp>&rsquo; at the beginning of a mode line it
means that the buffer is <em>modified</em>.  If you write out the contents of
a buffer to a file, then the buffer will become not modified.  Also if
you see &lsquo;<samp>%%</samp>&rsquo; at the beginning of the mode line, it means that the file
associated with the buffer is write protected.  The mode line will also
show the buffer name and current major and minor modes (see below).
A special buffer called <em>Minibuffer</em> is displayed as the last line
in a Minibuffer window.  The Minibuffer window is used for command input
output.  Viper uses Minibuffer window for <kbd>/</kbd> and <kbd>:</kbd>
commands.
</p>
<a name="index-mode"></a>
<a name="index-keymap"></a>
<a name="index-local-keymap"></a>
<a name="index-global-keymap"></a>
<a name="index-major-mode"></a>
<a name="index-minor-mode"></a>

<p>An Emacs buffer can have a <em>major mode</em> that customizes Emacs for
editing text of a particular sort by changing the functionality of the keys.
Keys are defined using a <em>keymap</em> that records the bindings between
keystrokes and
functions.  The <em>global keymap</em> is common to all the
buffers.  Additionally, each buffer has its <em>local keymap</em> that determines the
<em>mode</em> of the buffer.  If a function is bound to some key in the local
keymap then that function will be executed when you type the key.
If no function is bound to a key in the
local map, however, the function bound to the key in the global map
will be executed.  See <a href="../emacs/Major-Modes.html#Major-Modes">Major Modes: (emacs)Major Modes</a> section &lsquo;Major Modes&rsquo; in <cite>The GNU Emacs Manual</cite>, for more information.
</p>
<p>A buffer can also have a <em>minor mode</em>.  Minor modes are options that
you can use or not.  A buffer in <code>text-mode</code> can have
<code>auto-fill-mode</code> as minor mode, which can be turned off or on at
any time.  In Emacs, a minor mode may have it own keymap,
which overrides the local keymap when the minor mode is turned on.  For
more information, see <a href="../emacs/Minor-Modes.html#Minor-Modes">Minor Modes: (emacs)Minor Modes</a> section &lsquo;Minor Modes&rsquo; in <cite>The GNU Emacs Manual</cite> 
</p>
<a name="index-Viper-as-minor-mode"></a>
<a name="index-Control-keys"></a>
<a name="index-Meta-key"></a>

<p>Viper is implemented as a collection of minor modes.  Different minor modes
are involved when Viper emulates Vi command mode, Vi insert mode, etc.
You can also turn Viper on and off at any time while in Vi command mode.
See section <a href="#States-in-Viper">States in Viper</a>, for
more information.
</p>
<p>Emacs uses Control and Meta modifiers.  These are denoted as C and M,
e.g. <kbd>^Z</kbd> as <kbd>C-z</kbd> and <kbd>Meta-x</kbd> as <kbd>M-x</kbd>.  The Meta key is
usually located on each side of the Space bar; it is used in a manner
similar to the Control key, e.g., <kbd>M-x</kbd> means typing <kbd>x</kbd> while
holding the Meta key down.  For keyboards that do not have a Meta key,
&lt;ESC&gt; is used as Meta.  Thus <kbd>M-x</kbd> is typed as <kbd>&lt;ESC&gt;
x</kbd>.  Viper uses &lt;ESC&gt; to switch from Insert state to Vi state.  Therefore
Viper defines <kbd>C-\</kbd> as its Meta key in Vi state.  See section <a href="#Vi-State">Vi State</a>, for
more info.
</p>
<p>Emacs is structured as a lisp interpreter around a C core.  Emacs keys
cause lisp functions to be called.  It is possible to call these
functions directly, by typing <kbd>M-x function-name</kbd>.
</p>
<hr size="6">
<a name="Loading-Viper"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Emacs-Preliminaries" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#States-in-Viper" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Overview" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="viper_3.html#Improvements-over-Vi" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="viper.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="viper_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="viper_7.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="viper_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Loading-Viper-1"></a>
<h2 class="section">1.2 Loading Viper</h2>

<p>The most common way to load it automatically is to include the following
lines (in the given order!):
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">(setq viper-mode t)
(require 'viper)
</pre></td></tr></table>

<p>in your &lsquo;<tt>~/.emacs</tt>&rsquo; file.  The &lsquo;<tt>.emacs</tt>&rsquo; file is placed in your
home directory and it is be executed every time you invoke Emacs.  This is
the place where all general Emacs customization takes place.  Beginning with
version 20.0, Emacsen have an interactive interface, which simplifies the
job of customization significantly.
</p>
<p>Viper also uses the file &lsquo;<tt>~/.viper</tt>&rsquo; for Viper-specific customization.
The location of Viper customization file can be changed by setting the
variable <code>viper-custom-file-name</code> in &lsquo;<tt>.emacs</tt>&rsquo; <em>prior</em> to loading
Viper.
</p>
<p>The latest versions of Emacs have an interactive customization facility,
which allows you to (mostly) bypass the use of the &lsquo;<tt>.emacs</tt>&rsquo; and
&lsquo;<tt>.viper</tt>&rsquo; files. You can reach this customization
facility from within Viper&rsquo;s VI state by executing the Ex command
<kbd>:customize</kbd>.
</p>
<p>Once invoked, Viper will arrange to bring up Emacs buffers in Vi state
whenever this makes sense.
See section <a href="viper_4.html#Packages-that-Change-Keymaps">Packages that Change Keymaps</a>, to find out when forcing Vi command state
on a buffer may be counter-productive.
</p>
<p>Even if your &lsquo;<tt>.emacs</tt>&rsquo; file does not invoke Viper automatically,
you can still load Viper and enter the Vi command state by typing the
following from within Emacs:
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">M-x viper-mode
</pre></td></tr></table>

<p>When Emacs first comes up, if you have not specified a file on the
command line, it will show the &lsquo;<samp>*scratch*</samp>&rsquo; buffer, in the
&lsquo;<samp>Lisp Interaction</samp>&rsquo; mode.  After you invoke Viper, you can start
editing files by using <kbd>:e</kbd>, <kbd>:vi</kbd>, or <kbd>v</kbd> commands.
(See section <a href="viper_5.html#File-and-Buffer-Handling">File and Buffer Handling</a>, for more information on <kbd>v</kbd> and other
new commands that, in many cases, are more convenient than <kbd>:e</kbd>,
<kbd>:vi</kbd>, and similar old-style Vi commands.)
</p>
<p>Finally, if at some point you would want to de-Viperize your running
copy of Emacs after Viper has been loaded, the command <kbd>M-x
viper-go-away</kbd> will do it for you.  The function <code>toggle-viper-mode</code>
toggles Viperization of Emacs on and off.
</p>
<hr size="6">
<a name="States-in-Viper"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Loading-Viper" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Emacs-State" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Overview" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="viper_3.html#Improvements-over-Vi" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="viper.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="viper_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="viper_7.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="viper_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="States-in-Viper-1"></a>
<h2 class="section">1.3 States in Viper</h2>

<a name="index-C_002dz"></a>
<a name="index-ESC"></a>
<a name="index-i"></a>
<a name="index-Emacs-state"></a>
<a name="index-Vi-state"></a>
<a name="index-Insert-state"></a>
<a name="index-Replace-state"></a>
<a name="index-Ex-commands"></a>
<a name="index-viper_002dgo_002daway"></a>
<a name="index-toggle_002dviper_002dmode"></a>

<p>Viper has four states, Emacs, Vi, Insert, and Replace.
</p>
<dl compact="compact">
<dt> &lsquo;<samp>Emacs state</samp>&rsquo;</dt>
<dd><p>This is the state plain vanilla Emacs is normally in.  After you have loaded
Viper, <kbd>C-z</kbd> will normally take you to Vi command state.  Another
<kbd>C-z</kbd> will take you back to Emacs state.  This toggle key can be
changed, see section <a href="viper_4.html#Customization">Customization</a> You can also type <kbd>M-x viper-mode</kbd> to
change to Vi state.
</p>

<p>For users who chose to set their user level to 1 at Viper setup time,
switching to Emacs state is deliberately made harder in order to not
confuse the novice user.  In this case, <kbd>C-z</kbd> will either iconify Emacs
(if Emacs runs as an application under X) or it will stop Emacs (if
Emacs runs on a dumb terminal or in an Xterm window).
</p>
</dd>
<dt> &lsquo;<samp>Vi state</samp>&rsquo;</dt>
<dd><p>This is the Vi command mode.  Any of the Vi commands, such as <kbd>i, o, a</kbd>,
&hellip;, will take you to Insert state.  All Vi commands may
be used in this mode.  Most Ex commands can also be used.
For a full list of Ex commands supported by Viper, type
<kbd>:</kbd> and then &lt;TAB&gt;.  To get help on any issue, including the Ex
commands, type <kbd>:help</kbd>.  This will invoke Viper Info
(if it is installed).  Then typing <kbd>i</kbd> will prompt you for a topic to
search in the index.  Note: to search for Ex commands in the index, you
should start them with a <kbd>:</kbd>, e.g., <kbd>:WW</kbd>.
</p>
<p>In Viper, Ex commands can be made to work on the current Emacs region.
This is done by typing a digit argument before <kbd>:</kbd>.
For instance, typing <kbd>1:</kbd> will propmt you with something like
<em>:123,135</em>, assuming that the current region starts at line 123 and
ends at line 135.  There is no need to type the line numbers, since Viper
inserts them automatically in front of the Ex command.
</p>
</dd>
<dt> &lsquo;<samp>Insert state</samp>&rsquo;</dt>
<dd><p>Insert state is the Vi insertion mode.  &lt;ESC&gt; will take you back to
Vi state.  Insert state editing can be done, including auto-indentation.  By
default, Viper disables Emacs key bindings in Insert state.
</p>
</dd>
<dt> &lsquo;<samp>Replace state</samp>&rsquo;</dt>
<dd><p>Commands like <kbd>cw</kbd> invoke the Replace state.  When you cross the
boundary of a replacement region (usually designated via a &lsquo;<samp>$</samp>&rsquo; sign),
it will automatically change to Insert state.  You do not have to worry
about it.  The key bindings remain practically the same as in Insert
state.  If you type &lt;ESC&gt;, Viper will switch to Vi command mode, terminating the
replacement state.
</p></dd>
</dl>

<a name="index-mode-line-1"></a>

<p>The modes are indicated on the <em>mode line</em> as &lt;E&gt;, &lt;I&gt;, &lt;V&gt;, and &lt;R&gt;,
so that the multiple modes do not confuse you.  Most of your editing can be
done in Vi and Insert states.  Viper will try to make all new buffers be in Vi
state, but sometimes they may come up in Emacs state.  <kbd>C-z</kbd>
will take you to Vi state in such a case.  In some major modes, like Dired,
Info, Gnus, etc., you should not switch to Vi state (and Viper will not
attempt to do so) because these modes are not intended for text editing and
many of the Vi keys have special meaning there.  If you plan to read news,
browse directories, read mail, etc., from Emacs (which you should start
doing soon!), you should learn about the meaning of the various keys in
those special modes (typing <kbd>C-h m</kbd> in a buffer provides
help with key bindings for the major mode of that buffer).
</p>
<p>If you switch to Vi in Dired or similar modes&mdash;no harm is done.  It is just
that the special key bindings provided by those modes will be temporarily
overshadowed by Viper&rsquo;s bindings.  Switching back to Viper&rsquo;s Emacs state
will revive the environment provided by the current major mode.
</p>
<p>States in Viper are orthogonal to Emacs major modes, such as C mode or Dired
mode.  You can turn Viper on and off for any Emacs state.  When Viper is turned
on, Vi state can be used to move around.  In Insert state, the bindings for
these modes can be accessed.  For beginners (users at Viper levels 1 and 2),
these bindings are suppressed in Insert state, so that new users are not
confused by the Emacs states.  Note that unless you allow Emacs bindings in
Insert state, you cannot do many interesting things, like language
sensitive editing.  For the novice user (at Viper level 1), all major mode
bindings are turned off in Vi state as well.  This includes the bindings for
key sequences that start with <kbd>C-c</kbd>, which practically means that all
major mode bindings are unsupported.  See section <a href="viper_4.html#Customization">Customization</a>, to find out how
to allow Emacs keys in Insert state.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Emacs-State">1.3.1 Emacs State</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         This is the state you should learn more about when
                        you get up to speed with Viper.
</td></tr>
<tr><td align="left" valign="top"><a href="#Vi-State">1.3.2 Vi State</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Vi commands are executed in this state.
</td></tr>
<tr><td align="left" valign="top"><a href="#Insert-State">1.3.3 Insert State</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        You can enter text, and also can do sophisticated
                        editing if you know enough Emacs commands.
</td></tr>
<tr><td align="left" valign="top"><a href="#Replace-State">1.3.4 Replace State</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Like Insert mode, but it is invoked via the
                        replacement commands, such as cw, C, R, etc.
</td></tr>
</table>

<hr size="6">
<a name="Emacs-State"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#States-in-Viper" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Vi-State" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#States-in-Viper" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="viper_3.html#Improvements-over-Vi" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="viper.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="viper_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="viper_7.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="viper_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Emacs-State-1"></a>
<h3 class="subsection">1.3.1 Emacs State</h3>

<a name="index-C_002dz-1"></a>
<a name="index-Emacs-state-1"></a>


<p>You will be in this mode only by accident (hopefully).  This is the state
Emacs is normally in (imagine!!).  Now leave it as soon as possible by
typing <kbd>C-z</kbd>.  Then you will be in Vi state (sigh of relief) :-).
</p>
<p>Emacs state is actually a Viperism to denote all the major and minor modes
(see section <a href="#Emacs-Preliminaries">Emacs Preliminaries</a>) other than Viper that Emacs can be in.  Emacs
can have several modes, such as C mode for editing C programs, LaTeX mode
for editing LaTeX documents, Dired for directory editing, etc.  These are
major modes, each with a different set of key-bindings.  Viper states are
orthogonal to these Emacs major modes.  The presence of these language
sensitive and other modes is a major win over Vi.  See section <a href="viper_3.html#Improvements-over-Vi">Improvements over Vi</a>, for more.
</p>
<p>The bindings for these modes can be made available in the Viper Insert state
as well as in Emacs state.  Unless you specify your user level as 1 (a
novice), all major mode key sequences that start with <kbd>C-x</kbd> and
<kbd>C-c</kbd> are also available in Vi state.  This is important because major
modes designed for editing files, such as cc-mode or latex-mode, use key
sequences that begin with <kbd>C-x</kbd> and <kbd>C-c</kbd>.
</p>
<p>There is also a key that lets you temporarily escape to Vi command state
from Emacs or Insert states: typing <kbd>C-c \</kbd> will let you execute a
single Vi command while staying in Viper&rsquo;s Emacs or Insert state.
In Insert state, the same can also be achieved by typing <kbd>C-z</kbd>.
</p>

<hr size="6">
<a name="Vi-State"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Emacs-State" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Insert-State" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#States-in-Viper" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="viper_3.html#Improvements-over-Vi" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="viper.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="viper_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="viper_7.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="viper_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Vi-State-1"></a>
<h3 class="subsection">1.3.2 Vi State</h3>

<a name="index-Vi-state-1"></a>

<p>This is the Vi command mode.  When Viper is in Vi state, you will see the sign
&lt;V&gt; in the mode line.  Most keys will work as in Vi.  The notable
exceptions are:
</p>
<dl compact="compact">
<dt> <kbd>C-x</kbd></dt>
<dd><a name="index-C_002dx"></a>
<p><kbd>C-x</kbd> is used to invoke Emacs commands, mainly those that do window
management.  <kbd>C-x 2</kbd> will split a window, <kbd>C-x 0</kbd> will close a
window.  <kbd>C-x 1</kbd> will close all other windows.  <kbd>C-xb</kbd> is used to
switch buffers in a window, and <kbd>C-xo</kbd> to move through windows.
These are about the only necessary keystrokes.
For the rest, see the GNU Emacs Manual.
</p>
</dd>
<dt> <kbd>C-c</kbd></dt>
<dd><a name="index-C_002dc"></a>
<p>For user levels 2 and higher, this key serves as a prefix key for the key
sequences used by various major modes.  For users at Viper level 1, <kbd>C-c</kbd>
simply beeps.
</p>
</dd>
<dt> <kbd>C-g and C-]</kbd></dt>
<dd><a name="index-C_002dg"></a>
<a name="index-C_002d_005d"></a>

<p>These are the Emacs &lsquo;<samp>quit</samp>&rsquo; keys.
There will be cases where you will have to
use <kbd>C-g</kbd> to quit.  Similarly, <kbd>C-]</kbd> is used to exit
&lsquo;<samp>Recursive Edits</samp>&rsquo; in Emacs for which there is no comparable Vi
functionality and no key-binding.  Recursive edits are indicated by
&lsquo;<samp>[]</samp>&rsquo; brackets framing the modes on the mode line.
See <a href="../emacs/Recursive-Edit.html#Recursive-Edit">Recursive Edit: (emacs)Recursive Edit</a> section &lsquo;Recursive Edit&rsquo; in <cite>The GNU Emacs Manual</cite>.
At user level 1, <kbd>C-g</kbd> is bound to <code>viper-info-on-file</code>
function instead.

</p></dd>
<dt> <kbd>C-\</kbd></dt>
<dd><a name="index-C_002d_005c"></a>
<a name="index-Meta-key-1"></a>

<p>Viper uses &lt;ESC&gt; as a switch between Insert and Vi states.  Emacs uses
&lt;ESC&gt; for Meta.  The Meta key is very important in Emacs since many
functions are accessible only via that key as <kbd>M-x function-name</kbd>.
Therefore, we need to simulate it somehow.  In Viper&rsquo;s Vi, Insert, and
Replace states, the meta key is set to be <kbd>C-\</kbd>.  Thus, to get
<kbd>M-x</kbd>, you should type <kbd>C-\ x</kbd> (if the keyboard has no Meta key,
which is rare these days).
This works both in the Vi command state and in the Insert and Replace
states.  In Vi command state, you can also use <kbd>\ &lt;ESC&gt;</kbd> as the
meta key.
</p>
<p>Note: Emacs binds <kbd>C-\</kbd> to a function that offers to change the
keyboard input method in the multilingual environment.  Viper overrides this
binding.  However, it is still possible to switch the input method by typing
<kbd>\ C-\</kbd> in the Vi command state and <kbd>C-z \ C-\</kbd> in the Insert state.
Or you can use the MULE menu in the menubar.
</p></dd>
</dl>
<p>Other differences are mostly improvements.  The ones you should know
about are:
</p>
<dl compact="compact">
<dt> &lsquo;<samp>Undo</samp>&rsquo;</dt>
<dd><a name="index-u"></a>
<p><kbd>u</kbd> will undo.  Undo can be repeated by the <kbd>.</kbd> key.  Undo itself
can be undone.  Another <kbd>u</kbd> will change the direction.  The presence
of repeatable undo means that <kbd>U</kbd>, undoing lines, is not very
important.  Therefore, <kbd>U</kbd> also calls <code>viper-undo</code>.
<a name="index-multiple-undo"></a>
<a name="index-undo"></a>
</p>

</dd>
<dt> &lsquo;<samp>Counts</samp>&rsquo;</dt>
<dd><p>Most commands, <kbd>~</kbd>, <kbd>[[</kbd>, <kbd>p</kbd>, <kbd>/</kbd>, &hellip;, etc., take counts.
</p>
</dd>
<dt> &lsquo;<samp>Regexps</samp>&rsquo;</dt>
<dd><p>Viper uses Emacs Regular Expressions for searches.  These are a superset of
Vi regular
expressions, excepting the change-of-case escapes &lsquo;<samp>\u</samp>&rsquo;, &lsquo;<samp>\L</samp>&rsquo;,
&hellip;, etc.  See <a href="../emacs/Regular-Expressions.html#Regular-Expressions">(emacs)Regular Expressions</a> section &lsquo;Regular Expressions&rsquo; in <cite>The GNU Emacs Manual</cite>, for details.
Files specified to <kbd>:e</kbd> use <code>csh</code> regular expressions
(globbing, wildcards, what have you).
However, the function <code>viper-toggle-search-style</code>, bound to <kbd>C-c /</kbd>,
lets the user switch from search with regular expressions to plain vanilla
search and vice versa.  It also lets one switch from case-sensitive search
to case-insensitive and back.
See section <a href="viper_4.html#Viper-Specials">Viper Specials</a>, for more details.
<a name="index-regular-expressions"></a>
<a name="index-vanilla-search"></a>
<a name="index-case_002dsensitive-search"></a>
<a name="index-case_002dinsensitive-search"></a>
<a name="index-C_002dc-_002f"></a>
</p>
</dd>
<dt> &lsquo;<samp>Ex commands</samp>&rsquo;</dt>
<dd><a name="index-Ex-commands-1"></a>
<p>The current working directory of a buffer is automatically inserted in the
minibuffer if you type <kbd>:e</kbd> then space.  Absolute filenames are
required less often in Viper.  For file names, Emacs uses a convention that
is slightly different from other programs.  It is designed to minimize the
need for deleting file names that Emacs provides in its prompts.  (This is
usually convenient, but occasionally the prompt may suggest a wrong file
name for you.)  If you see a prompt <kbd>/usr/foo/</kbd> and you wish to edit the
file <kbd>~/.viper</kbd>, you don&rsquo;t have to erase the prompt.  Instead, simply
continue typing what you need.  Emacs will interpret <kbd>/usr/foo/~/.viper</kbd>
correctly.  Similarly, if the prompt is <kbd>~/foo/</kbd> and you need to get to
<kbd>/bar/file</kbd>, keep typing.  Emacs interprets <kbd>~/foo//bar/</kbd> as
<kbd>/bar/file</kbd>, since when it sees &lsquo;<samp>//</samp>&rsquo;, it understands that
<kbd>~/foo/</kbd> is to be discarded.
</p>
<p>The command <kbd>:cd</kbd> will change the default directory for the
current buffer.  The command <kbd>:e</kbd> will interpret the
filename argument in <code>csh</code>.  See section <a href="viper_4.html#Customization">Customization</a>, if you
want to change the default shell.
The command <kbd>:next</kbd> takes counts from
<kbd>:args</kbd>, so that <kbd>:rew</kbd> is obsolete.  Also, <kbd>:args</kbd> will show only
the invisible files (i.e., those that are not currently seen in Emacs
windows).
</p>
<p>When applicable, Ex commands support file completion and history.  This
means that by typing a partial file name and then &lt;TAB&gt;, Emacs will try
to complete the name or it will offer a menu of possible completions.
This works similarly to Tcsh and extends the behavior of Csh.  While Emacs
is waiting for a file name, you can type <kbd>M-p</kbd> to get the previous file
name you typed.  Repeatedly typing <kbd>M-p</kbd> and <kbd>M-n</kbd> will let you
browse through the file history.
</p>
<p>Like file names, partially typed Ex commands can be completed by typing
&lt;TAB&gt;, and Viper keeps the history of Ex commands.  After typing
<kbd>:</kbd>, you can browse through the previously entered Ex commands by
typing <kbd>M-p</kbd> and <kbd>M-n</kbd>.  Viper tries to rationalize when it puts Ex
commands on the history list.  For instance, if you typed <kbd>:w! foo</kbd>,
only <kbd>:w!</kbd> will be placed on the history list.  This is because the
last history element is the default that can be invoked simply by typing
<kbd>: &lt;RET&gt;</kbd>.  If <kbd>:w! foo</kbd> were placed on the list, it would be all to
easy to override valuable data in another file.  Reconstructing the full
command, <kbd>:w! foo</kbd>, from the history is still not that hard, since Viper
has a separate history for file names.  By typing <kbd>: M-p</kbd>, you will get
<kbd>:w!</kbd> in the Minibuffer.  Then, repeated <kbd>M-p</kbd> will get you through
the file history, inserting one file name after another.
</p>
<p>In contrast to <kbd>:w! foo</kbd>, if the command were <kbd>:r foo</kbd>, the entire
command will appear in the history list.  This is because having <kbd>:r</kbd>
alone as a default is meaningless, since this command requires a file
argument.

</p></dd>
</dl>
<p>As Vi, Viper&rsquo;s destructive commands can be re-executed by typing &lsquo;<kbd>.</kbd>&rsquo;.
However, in addition, Viper keeps track of the history of such commands.  This
history can be perused by typing <kbd>C-c M-p</kbd> and <kbd>C-c M-n</kbd>.
Having found the appropriate command, it can be then executed by typing
&lsquo;<kbd>.</kbd>&rsquo;.
See section <a href="viper_3.html#Improvements-over-Vi">Improvements over Vi</a>, for more information.
</p>
<hr size="6">
<a name="Insert-State"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Vi-State" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Replace-State" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#States-in-Viper" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="viper_3.html#Improvements-over-Vi" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="viper.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="viper_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="viper_7.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="viper_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Insert-State-1"></a>
<h3 class="subsection">1.3.3 Insert State</h3>

<a name="index-Insert-state-1"></a>

<p>To avoid confusing the beginner (at Viper level 1 and 2), Viper makes only the
standard Vi keys available in Insert state.  The implication is that
Emacs major modes cannot be used in Insert state.
It is strongly recommended that as soon as you are comfortable, make the
Emacs state bindings visible (by changing your user level to 3 or higher).
See section <a href="viper_4.html#Customization">Customization</a>,
to see how to do this.
</p>
<p>Once this is done, it is possible to do quite a bit of editing in
Insert state.  For instance, Emacs has a <em>yank</em> command, <kbd>C-y</kbd>,
which is similar to Vi&rsquo;s <kbd>p</kbd>.  However, unlike <kbd>p</kbd>, <kbd>C-y</kbd> can be
used in Insert state of Viper.  Emacs also has a kill ring where it keeps
pieces of text you deleted while editing buffers.  The command <kbd>M-y</kbd> is
used to delete the text previously put back by Emacs&rsquo; <kbd>C-y</kbd> or by Vi&rsquo;s
<kbd>p</kbd> command and reinsert text that was placed on the kill-ring earlier.
</p>
<p>This works both in Vi and Insert states.
In Vi state, <kbd>M-y</kbd> is a much better alternative to the usual Vi&rsquo;s way
of recovering the 10 previously deleted chunks of text.  In Insert state,
you can
use this as follows.  Suppose you deleted a piece of text and now you need
to re-insert it while editing in Insert mode.  The key <kbd>C-y</kbd> will put
back the most recently deleted chunk.  If this is not what you want, type
<kbd>M-y</kbd> repeatedly and, hopefully, you will find the chunk you want.
</p>
<p>Finally, in Insert and Replace states, Viper provides the history of
pieces of text inserted in previous insert or replace commands.  These
strings of text can be recovered by repeatedly typing <kbd>C-c M-p</kbd> or
<kbd>C-c M-n</kbd> while in Insert or Replace state.  (This feature is disabled
in the minibuffer: the above keys are usually bound to other histories,
which are more appropriate in the minibuffer.)
</p>

<a name="index-Meta-key-2"></a>

<p>You can call Meta functions from Insert state.  As in Vi state, the Meta key
is <kbd>C-\</kbd>.  Thus <kbd>M-x</kbd> is typed as <kbd>C-\ x</kbd>.
</p>
<p>Other Emacs commands that are useful in Insert state are <kbd>C-e</kbd>
and <kbd>C-a</kbd>, which move the cursor to the end and the beginning of the
current line, respectively.  You can also use <kbd>M-f</kbd> and <kbd>M-b</kbd>,
which move the cursor forward (or backward) one word.
If your display has a Meta key, these functions are invoked by holding the
Meta key and then typing <kbd>f</kbd> and <kbd>b</kbd>, respectively.  On displays
without the Meta key, these functions are invoked by typing
<kbd>C-\ f</kbd> and <kbd>C-\ b</kbd> (<kbd>C-\</kbd> simulates the Meta key in Insert
state, as explained above).
</p>
<p>The key <kbd>C-z</kbd> is sometimes also useful in Insert state: it allows you
to execute a single command in Vi state without leaving the Insert state!
For instance, <kbd>C-z d2w</kbd> will delete the next two words without leaving
the Insert state.
</p>
<p>When Viper is in Insert state, you will see &lt;I&gt; in the mode line.
</p>
<hr size="6">
<a name="Replace-State"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Insert-State" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-Minibuffer" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#States-in-Viper" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="viper_3.html#Improvements-over-Vi" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="viper.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="viper_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="viper_7.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="viper_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Replace-State-1"></a>
<h3 class="subsection">1.3.4 Replace State</h3>

<a name="index-Replace-state-1"></a>

<p>This state is entered through Vi replacement commands, such as <kbd>C</kbd>,
<kbd>cw</kbd>, etc., or by typing <kbd>R</kbd>.  In Replace state, Viper puts &lt;R&gt; in
the mode line to let you know which state is in effect.  If Replace state is
entered through <kbd>R</kbd>, Viper stays in that state until the user hits
&lt;ESC&gt;.  If this state is entered via the other replacement commands,
then Replace state is in effect until you hit &lt;ESC&gt; or until you cross
the rightmost boundary of the replacement region.  In the latter case, Viper
changes its state from Replace to Insert (which you will notice by the
change in the mode line).
</p>
<p>Since Viper runs under Emacs, it is possible to switch between buffers
while in Replace state.  You can also move the cursor using the arrow keys
(even on dumb terminals!) and the mouse.  Because of this freedom (which is
unattainable in regular Vi), it is possible to take the cursor outside the
replacement region.  (This may be necessary for several reasons, including
the need to enable text selection and region-setting with the mouse.)
</p>
<p>The issue then arises as to what to do when the user
hits the &lt;ESC&gt; key.  In Vi, this would cause the text between cursor and
the end of the replacement region to be deleted.  But what if, as is
possible in Viper, the cursor is not inside the replacement region?
</p>
<p>To solve the problem, Viper keeps track of the last cursor position while it
was still inside the replacement region.  So, in the above situation, Viper
would delete text between this position and the end of the replacement
region.
</p>
<hr size="6">
<a name="The-Minibuffer"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Replace-State" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Multiple-Files-in-Viper" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Overview" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="viper_3.html#Improvements-over-Vi" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="viper.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="viper_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="viper_7.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="viper_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-Minibuffer-1"></a>
<h2 class="section">1.4 The Minibuffer</h2>

<a name="index-Minibuffer-1"></a>

<p>The Minibuffer is where commands are entered in.  Editing can be done
by commands from Insert state, namely:
</p>
<dl compact="compact">
<dt> <kbd>C-h</kbd></dt>
<dd><p>Backspace
</p></dd>
<dt> <kbd>C-w</kbd></dt>
<dd><p>Delete Word
</p></dd>
<dt> <kbd>C-u</kbd></dt>
<dd><p>Erase line
</p></dd>
<dt> <kbd>C-v</kbd></dt>
<dd><p>Quote the following character
</p></dd>
<dt> <kbd>&lt;RET&gt;</kbd></dt>
<dd><p>Execute command
</p></dd>
<dt> <kbd>C-g and C-]</kbd></dt>
<dd><p>Emacs quit and abort keys.  These may be necessary.  See section <a href="#Vi-State">Vi State</a>, for an
explanation.
</p></dd>
<dt> <kbd>M-p and M-n</kbd></dt>
<dd><p>These keys are bound to functions that peruse minibuffer history.  The
precise history to be perused depends on the context.  It may be the history
of search strings, Ex commands, file names, etc.
</p></dd>
</dl>

<p>Most of the Emacs keys are functional in the Minibuffer.  While in the
Minibuffer, Viper tries to make editing resemble Vi&rsquo;s behavior when the
latter is waiting for the user to type an Ex command.  In particular, you
can use the regular Vi commands to edit the Minibuffer.  You can switch
between the Vi state and Insert state at will, and even use the replace mode.
Initially, the Minibuffer comes up in Insert state.
</p>
<p>Some users prefer plain Emacs bindings in the Minibuffer.  To this end, set
<code>viper-vi-style-in-minibuffer</code> to <code>nil</code> in &lsquo;<tt>.viper</tt>&rsquo;.
See section <a href="viper_4.html#Customization">Customization</a>, to learn how to do this.
</p>
<p>When the Minibuffer changes Viper states, you will notice that the appearance
of the text there changes as well.  This is useful because the Minibuffer
has no mode line to tell which Vi state it is in.
The appearance of the text in the Minibuffer can be changed.
See section <a href="viper_4.html#Viper-Specials">Viper Specials</a>, for more details.
</p>
<hr size="6">
<a name="Multiple-Files-in-Viper"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#The-Minibuffer" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Unimplemented-Features" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Overview" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="viper_3.html#Improvements-over-Vi" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="viper.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="viper_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="viper_7.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="viper_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Multiple-Files-in-Viper-1"></a>
<h2 class="section">1.5 Multiple Files in Viper</h2>

<a name="index-multiple-files"></a>
<a name="index-managing-multiple-files"></a>

<p>Viper can edit multiple files.  This means, for example that you never need
to suffer through <code>No write since last change</code> errors.
Some Viper elements are common over all the files.
</p>
<dl compact="compact">
<dt> &lsquo;<samp>Textmarkers</samp>&rsquo;</dt>
<dd><a name="index-markers"></a>
<a name="index-textmarkers"></a>
<p>Textmarkers remember <em>files and positions</em>.
If you set marker &lsquo;<samp>a</samp>&rsquo; in
file &lsquo;<tt>foo</tt>&rsquo;, start editing file &lsquo;<tt>bar</tt>&rsquo; and type <kbd>'a</kbd>, then
<em>YOU WILL SWITCH TO FILE &lsquo;<tt>foo</tt>&rsquo;</em>.  You can see the contents of a
textmarker using the Viper command <kbd>[&lt;a-z&gt;</kbd> where &lt;a-z&gt; are the
textmarkers, e.g., <kbd>[a</kbd> to view marker &lsquo;<samp>a</samp>&rsquo; .
</p></dd>
<dt> &lsquo;<samp>Repeated Commands</samp>&rsquo;</dt>
<dd><p>Command repetitions are common over files.  Typing <kbd>!!</kbd> will repeat the
last <kbd>!</kbd> command whichever file it was issued from.
Typing <kbd>.</kbd> will repeat the last command from any file, and
searches will repeat the last search.  Ex commands can be repeated by typing
<kbd>: &lt;RET&gt;</kbd>.
Note: in some rare cases, that <kbd>: &lt;RET&gt;</kbd> may do something dangerous.
However, usually its effect can be undone by typing <kbd>u</kbd>.
</p></dd>
<dt> &lsquo;<samp>Registers</samp>&rsquo;</dt>
<dd><a name="index-registers"></a>
<p>Registers are common to files.  Also, text yanked with <kbd>y</kbd> can be
put back (<kbd>p</kbd>) into any file.  The Viper command <kbd>]&lt;a-z&gt;</kbd>, where &lt;a-z&gt; are
the registers, can be used to look at the contents of a register, e.g.,
type <kbd>]a</kbd> to view register &lsquo;<samp>a</samp>&rsquo;.
</p>
<p>There is one difference in text deletion that you should be
aware of.  This difference comes from Emacs and was adopted in Viper
because we find it very useful.  In Vi, if you delete a line, say, and then
another line, these two deletions are separated and are put back
separately if you use the &lsquo;<samp>p</samp>&rsquo; command.  In Emacs (and Viper), successive
series of deletions that are <em>not interrupted</em> by other commands are
lumped together, so the deleted text gets accumulated and can be put back
as one chunk.  If you want to break a sequence of deletions so that the
newly deleted text could be put back separately from the previously deleted
text, you should perform a non-deleting action, e.g., move the cursor one
character in any direction.
</p></dd>
<dt> &lsquo;<samp>Absolute Filenames</samp>&rsquo;</dt>
<dd><a name="index-absolute-file-names"></a>
<p>The current directory name for a file is automatically prepended to the
file name in any
<kbd>:e</kbd>, <kbd>:r</kbd>, <kbd>:w</kbd>, etc., command (in Emacs, each buffer has a
current directory).
This directory is inserted in the Minibuffer once you type space after
<kbd>:e, r</kbd>, etc.  Viper also supports completion of file names and Ex
commands (&lt;TAB&gt;), and it keeps track of
command and file history (<kbd>M-p</kbd>, <kbd>M-n</kbd>).
Absolute filenames are required less
often in Viper.
</p>
<p>You should be aware that Emacs interprets <kbd>/foo/bar//bla</kbd> as
<kbd>/bla</kbd> and <kbd>/foo/~/bar</kbd> as <kbd>~/bar</kbd>.  This is designed to
minimize the need for erasing file names that Emacs suggests in its
prompts, if a suggested file name is not what you wanted.
</p>
<p>The command <kbd>:cd</kbd> will change the default directory for the
current Emacs buffer.  The Ex command <kbd>:e</kbd> will interpret the
filename argument in &lsquo;<samp>csh</samp>&rsquo;, by default.  See section <a href="viper_4.html#Customization">Customization</a>, if you
want to change this.
</p></dd>
</dl>

<p>Currently undisplayed files can be listed using the <kbd>:ar</kbd> command.  The
command <kbd>:n</kbd> can be given counts from the <kbd>:ar</kbd> list to switch to
other files. For example, use &lsquo;:n3&rsquo; to move to the third file in that list.
</p>
<hr size="6">
<a name="Unimplemented-Features"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Multiple-Files-in-Viper" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="viper_3.html#Improvements-over-Vi" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Overview" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="viper_3.html#Improvements-over-Vi" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="viper.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="viper_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="viper_7.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="viper_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Unimplemented-Features-1"></a>
<h2 class="section">1.6 Unimplemented Features</h2>

<p>Unimplemented features include:
</p>
<ul>
<li>
<kbd>:ab</kbd> and <kbd>:una</kbd> are not implemented, since
<kbd>:ab</kbd> is considered obsolete, since Emacs has much
more powerful facilities for defining abbreviations.
</li><li>
<kbd>:set option?</kbd> is not implemented.  The current
<kbd>:set</kbd> can also be used to set Emacs variables.
</li><li>
<kbd>:se list</kbd> requires modification of the display code for Emacs, so
it is not implemented.
A useful alternative is <code>cat -t -e file</code>.  Unfortunately, it cannot
be used directly inside Emacs, since Emacs will obdurately change &lsquo;<samp>^I</samp>&rsquo;
back to normal tabs.
</li></ul>

<hr size="6">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Overview" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="viper_3.html#Improvements-over-Vi" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="viper.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="viper_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="viper_7.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="viper_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated by <em>a tester</em> on <em>a sunny day</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html</em></a>.
 </font>
 <br>

</p>
</body>
</html>
