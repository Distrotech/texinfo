<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created on a sunny day by texi2html
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>XEmacs User&rsquo;s Manual: 26 Reading Mail</title>

<meta name="description" content="XEmacs User&rsquo;s Manual: 26 Reading Mail">
<meta name="keywords" content="XEmacs User&rsquo;s Manual: 26 Reading Mail">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="Reading-Mail"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="xemacs_28.html#Sending-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_28.html#Mail-Mode" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar_002fDiary" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Reading-Mail-1"></a>
<h1 class="chapter">26 Reading Mail</h1>
<a name="index-mail-2"></a>
<a name="index-message-1"></a>

<p>XEmacs provides three separate mail-reading packages.  Each one comes with
its own manual, which is included standard with the XEmacs distribution.
</p>
<p>The recommended mail-reading package for new users is VM.  VM works
with standard Unix-mail-format folders and was designed as a replacement
for the older Rmail.
</p>
<p>XEmacs also provides a sophisticated and comfortable front-end to the
MH mail-processing system, called &lsquo;<samp>mh-e</samp>&rsquo;.  Unlike in other
mail programs, folders in MH are stored as file-system directories,
with each message occupying one (numbered) file.  This facilitates
working with mail using shell commands, and many other features of
MH are also designed to integrate well with the shell and with
shell scripts.  Keep in mind, however, that in order to use mh-e
you must have the MH mail-processing system installed on your
computer.
</p>
<p>Finally, XEmacs provides the Rmail package.  Rmail is (currently) the
only mail reading package distributed with FSF GNU Emacs, and is
powerful in its own right.  However, it stores mail folders in a special
format called &lsquo;<samp>Babyl</samp>&rsquo;, that is incompatible with all other
frequently-used mail programs.  A utility program is provided for
converting Babyl folders to standard Unix-mail format; however, unless
you already have mail in Babyl-format folders, you should consider
using VM or mh-e instead. (If at times you have to use FSF Emacs, it
is not hard to obtain and install VM for that editor.)
</p><hr>
<a name="Calendar_002fDiary"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Reading-Mail" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Reading-Mail" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Motion" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Calendar-Mode-and-the-Diary"></a>
<h2 class="section">26.1 Calendar Mode and the Diary</h2>
<a name="index-calendar"></a>
<a name="index-calendar-1"></a>

<p>  Emacs provides the functions of a desk calendar, with a diary of
planned or past events.  To enter the calendar, type <kbd>M-x calendar</kbd>;
this displays a three-month calendar centered on the current month, with
point on the current date.  With a numeric argument, as in <kbd>C-u M-x
calendar</kbd>, it prompts you for the month and year to be the center of the
three-month calendar.  The calendar uses its own buffer, whose major
mode is Calendar mode.
</p>
<p>  <kbd>Button2</kbd> in the calendar brings up a menu of operations on a
particular date; <kbd>Buttons3</kbd> brings up a menu of commonly used
calendar features that are independent of any particular date.  To exit
the calendar, type <kbd>q</kbd>.  See <a href="../lispref/Calendar.html#Calendar">Customizing the Calendar and Diary: (lispref)Calendar</a> section &lsquo;Calendar&rsquo; in <cite>The XEmacs Lisp Reference Manual</cite>, for customization
information about the calendar and diary.
</p> 
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Calendar-Motion">26.1.1 Movement in the Calendar</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Moving through the calendar; selecting a date.
</td></tr>
<tr><td align="left" valign="top"><a href="#Scroll-Calendar">26.1.2 Scrolling the Calendar through Time</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Bringing earlier or later months onto the screen.
</td></tr>
<tr><td align="left" valign="top"><a href="#Mark-and-Region">26.1.3 The Mark and the Region</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Remembering dates, the mark ring.
</td></tr>
<tr><td align="left" valign="top"><a href="#General-Calendar">26.1.4 Miscellaneous Calendar Commands</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Exiting or recomputing the calendar.
</td></tr>
<tr><td align="left" valign="top"><a href="#LaTeX-Calendar">26.2 LaTeX Calendar</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Print a calendar using LaTeX.
</td></tr>
<tr><td align="left" valign="top"><a href="#Holidays">26.2.1 Holidays</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Displaying dates of holidays.
</td></tr>
<tr><td align="left" valign="top"><a href="#Sunrise_002fSunset">26.2.2 Times of Sunrise and Sunset</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Displaying local times of sunrise and sunset.
</td></tr>
<tr><td align="left" valign="top"><a href="#Lunar-Phases">26.2.3 Phases of the Moon</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Displaying phases of the moon.
</td></tr>
<tr><td align="left" valign="top"><a href="#Other-Calendars">26.2.4 Conversion To and From Other Calendars</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Converting dates to other calendar systems.
</td></tr>
<tr><td align="left" valign="top"><a href="#Diary">26.5.2 The Diary</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                  Displaying events from your diary.
</td></tr>
<tr><td align="left" valign="top"><a href="#Calendar-Customization">26.5.8 Customizing the Calendar and Diary</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Altering the behavior of the features above.
</td></tr>
</table>

<hr>
<a name="Calendar-Motion"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar_002fDiary" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar_002fDiary" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Unit-Motion" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Movement-in-the-Calendar"></a>
<h3 class="subsection">26.1.1 Movement in the Calendar</h3>

<a name="index-moving-inside-the-calendar"></a>
<p>  Calendar mode lets you move through the calendar in logical units of
time such as days, weeks, months, and years.  If you move outside the
three months originally displayed, the calendar display &ldquo;scrolls&rdquo;
automatically through time to make the selected date visible.  Moving to
a date lets you view its holidays or diary entries, or convert it to other
calendars; moving longer time periods is also useful simply to scroll the
calendar.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Calendar-Unit-Motion">26.1.1.1 Motion by Integral Days, Weeks, Months, Years</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Moving by days, weeks, months, and years.
</td></tr>
<tr><td align="left" valign="top"><a href="#Move-to-Beginning-or-End">26.1.1.2 Beginning or End of Week, Month or Year</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Moving to start/end of weeks, months, and years.
</td></tr>
<tr><td align="left" valign="top"><a href="#Specified-Dates">26.1.1.3 Particular Dates</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Moving to the current date or another 
                               specific date.
</td></tr>
</table>

<hr>
<a name="Calendar-Unit-Motion"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Motion" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Motion" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Move-to-Beginning-or-End" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Motion-by-Integral-Days_002c-Weeks_002c-Months_002c-Years"></a>
<h4 class="subsubsection">26.1.1.1 Motion by Integral Days, Weeks, Months, Years</h4>

<p>  The commands for movement in the calendar buffer parallel the
commands for movement in text.  You can move forward and backward by
days, weeks, months, and years.
</p>
<dl compact="compact">
<dt><kbd>C-f</kbd></dt>
<dd><p>Move point one day forward (<code>calendar-forward-day</code>).
</p></dd>
<dt><kbd>C-b</kbd></dt>
<dd><p>Move point one day backward (<code>calendar-backward-day</code>).
</p></dd>
<dt><kbd>C-n</kbd></dt>
<dd><p>Move point one week forward (<code>calendar-forward-week</code>).
</p></dd>
<dt><kbd>C-p</kbd></dt>
<dd><p>Move point one week backward (<code>calendar-backward-week</code>).
</p></dd>
<dt><kbd>M-}</kbd></dt>
<dd><p>Move point one month forward (<code>calendar-forward-month</code>).
</p></dd>
<dt><kbd>M-{</kbd></dt>
<dd><p>Move point one month backward (<code>calendar-backward-month</code>).
</p></dd>
<dt><kbd>C-x ]</kbd></dt>
<dd><p>Move point one year forward (<code>calendar-forward-year</code>).
</p></dd>
<dt><kbd>C-x [</kbd></dt>
<dd><p>Move point one year backward (<code>calendar-backward-year</code>).
</p></dd>
</dl>

<a name="index-C_002df-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dforward_002dday"></a>
<a name="index-C_002db-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dbackward_002dday"></a>
<a name="index-C_002dn-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dforward_002dweek"></a>
<a name="index-C_002dp-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dbackward_002dweek"></a>
<p>  The day and week commands are natural analogues of the usual Emacs
commands for moving by characters and by lines.  Just as <kbd>C-n</kbd>
usually moves to the same column in the following line, in Calendar
mode it moves to the same day in the following week.  And <kbd>C-p</kbd>
moves to the same day in the previous week.
</p>
<p>  The arrow keys are equivalent to <kbd>C-f</kbd>, <kbd>C-b</kbd>, <kbd>C-n</kbd> and
<kbd>C-p</kbd>, just as they normally are in other modes.
</p>
<a name="index-M_002d_007d-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dforward_002dmonth"></a>
<a name="index-M_002d_007b-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dbackward_002dmonth"></a>
<a name="index-C_002dx-_005d-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dforward_002dyear"></a>
<a name="index-C_002dx-_005b-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dforward_002dyear-1"></a>
<p>  The commands for motion by months and years work like those for
weeks, but move a larger distance.  The month commands <kbd>M-}</kbd> and
<kbd>M-{</kbd> move forward or backward by an entire month&rsquo;s time.  The
year commands <kbd>C-x ]</kbd> and <kbd>C-x [</kbd> move forward or backward a
whole year.
</p>
<p>  The easiest way to remember these commands is to consider months and
years analogous to paragraphs and pages of text, respectively.  But the
commands themselves are not quite analogous.  The ordinary Emacs paragraph
commands move to the beginning or end of a paragraph, whereas these month
and year commands move by an entire month or an entire year, which usually
involves skipping across the end of a month or year.
</p>
<p>  All these commands accept a numeric argument as a repeat count.
For convenience, the digit keys and the minus sign specify numeric
arguments in Calendar mode even without the Meta modifier.  For example,
<kbd>100 C-f</kbd> moves point 100 days forward from its present location.
</p>
<hr>
<a name="Move-to-Beginning-or-End"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Unit-Motion" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Motion" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Specified-Dates" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Beginning-or-End-of-Week_002c-Month-or-Year"></a>
<h4 class="subsubsection">26.1.1.2 Beginning or End of Week, Month or Year</h4>

<p>  A week (or month, or year) is not just a quantity of days; we think of
weeks (months, years) as starting on particular dates.  So Calendar mode
provides commands to move to the beginning or end of a week, month or
year:
</p> 
<dl compact="compact">
<dd><a name="index-C_002da-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dbeginning_002dof_002dweek"></a>
</dd>
<dt><kbd>C-a</kbd></dt>
<dd><p>Move point to start of week (<code>calendar-beginning-of-week</code>).
<a name="index-C_002de-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dend_002dof_002dweek"></a>
</p></dd>
<dt><kbd>C-e</kbd></dt>
<dd><p>Move point to end of week (<code>calendar-end-of-week</code>).
<a name="index-M_002da-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dbeginning_002dof_002dmonth"></a>
</p></dd>
<dt><kbd>M-a</kbd></dt>
<dd><p>Move point to start of month (<code>calendar-beginning-of-month</code>).
<a name="index-M_002de-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dend_002dof_002dmonth"></a>
</p></dd>
<dt><kbd>M-e</kbd></dt>
<dd><p>Move point to end of month (<code>calendar-end-of-month</code>).
<a name="index-M_002d_003c-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dbeginning_002dof_002dyear"></a>
</p></dd>
<dt><kbd>M-&lt;</kbd></dt>
<dd><p>Move point to start of year (<code>calendar-beginning-of-year</code>).
<a name="index-M_002d_003e-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dend_002dof_002dyear"></a>
</p></dd>
<dt><kbd>M-&gt;</kbd></dt>
<dd><p>Move point to end of year (<code>calendar-end-of-year</code>).
</p></dd>
</dl>

<p>  These commands also take numeric arguments as repeat counts, with the
repeat count indicating how many weeks, months, or years to move
backward or forward.
</p>
<a name="index-calendar_002dweek_002dstart_002dday"></a>
<a name="index-weeks_002c-which-day-they-start-on"></a>
<a name="index-calendar_002c-first-day-of-week"></a>
<p>  By default, weeks begin on Sunday.  To make them begin on Monday
instead, set the variable <code>calendar-week-start-day</code> to 1.
</p>
<hr>
<a name="Specified-Dates"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Move-to-Beginning-or-End" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Motion" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Scroll-Calendar" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Particular-Dates"></a>
<h4 class="subsubsection">26.1.1.3 Particular Dates</h4>

<p>  Calendar mode provides commands for moving to a particular date
specified in various ways.
</p>
<dl compact="compact">
<dt><kbd>g d</kbd></dt>
<dd><p>Move point to specified date (<code>calendar-goto-date</code>).
</p></dd>
<dt><kbd>o</kbd></dt>
<dd><p>Center calendar around specified month (<code>calendar-other-month</code>).
</p></dd>
<dt><kbd>.</kbd></dt>
<dd><p>Move point to today&rsquo;s date (<code>calendar-goto-today</code>).
</p></dd>
</dl>

<a name="index-g-d-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dgoto_002ddate"></a>
<p>  <kbd>g d</kbd> (<code>calendar-goto-date</code>) prompts for a year, a month, and a day
of the month, and then moves to that date.  Because the calendar includes all
dates from the beginning of the current era, you must type the year in its
entirety; that is, type &lsquo;<samp>1990</samp>&rsquo;, not &lsquo;<samp>90</samp>&rsquo;.
</p>
<a name="index-o-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dother_002dmonth"></a>
<p>  <kbd>o</kbd> (<code>calendar-other-month</code>) prompts for a month and year,
then centers the three-month calendar around that month.
</p>
<a name="index-_002e-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dgoto_002dtoday"></a>
<p>  You can return to today&rsquo;s date with <kbd>.</kbd>
(<code>calendar-goto-today</code>).
</p>
<hr>
<a name="Scroll-Calendar"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Specified-Dates" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar_002fDiary" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Mark-and-Region" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Scrolling-the-Calendar-through-Time"></a>
<h3 class="subsection">26.1.2 Scrolling the Calendar through Time</h3>

<a name="index-scrolling-in-the-calendar"></a>
<p>  The calendar display scrolls automatically through time when you move out
of the visible portion.  You can also scroll it manually.  Imagine that the
calendar window contains a long strip of paper with the months on it.
Scrolling it means moving the strip so that new months become visible in
the window.
</p>
<dl compact="compact">
<dt><kbd>C-x &lt;</kbd></dt>
<dd><p>Scroll calendar one month forward (<code>scroll-calendar-left</code>).
</p></dd>
<dt><kbd>C-x &gt;</kbd></dt>
<dd><p>Scroll calendar one month backward (<code>scroll-calendar-right</code>).
</p></dd>
<dt><kbd>C-v</kbd></dt>
<dt><kbd>&lt;NEXT&gt;</kbd></dt>
<dd><p>Scroll calendar three months forward
(<code>scroll-calendar-left-three-months</code>).
</p></dd>
<dt><kbd>M-v</kbd></dt>
<dt><kbd>&lt;PRIOR&gt;</kbd></dt>
<dd><p>Scroll calendar three months backward
(<code>scroll-calendar-right-three-months</code>).
</p></dd>
</dl>

<a name="index-C_002dx-_003c-_0028Calendar-mode_0029"></a>
<a name="index-scroll_002dcalendar_002dleft"></a>
<a name="index-C_002dx-_003e-_0028Calendar-mode_0029"></a>
<a name="index-scroll_002dcalendar_002dright"></a>
<p>  The most basic calendar scroll commands scroll by one month at a
time.  This means that there are two months of overlap between the
display before the command and the display after.  <kbd>C-x &lt;</kbd> scrolls
the calendar contents one month to the left; that is, it moves the
display forward in time.  <kbd>C-x &gt;</kbd> scrolls the contents to the
right, which moves backwards in time.
</p>
<a name="index-C_002dv-_0028Calendar-mode_0029"></a>
<a name="index-scroll_002dcalendar_002dleft_002dthree_002dmonths"></a>
<a name="index-M_002dv-_0028Calendar-mode_0029"></a>
<a name="index-scroll_002dcalendar_002dright_002dthree_002dmonths"></a>
<p>  The commands <kbd>C-v</kbd> and <kbd>M-v</kbd> scroll the calendar by an entire
&ldquo;screenful&rdquo;&mdash;three months&mdash;in analogy with the usual meaning of
these commands.  <kbd>C-v</kbd> makes later dates visible and <kbd>M-v</kbd> makes
earlier dates visible.  These commands take a numeric argument as a
repeat count; in particular, since <kbd>C-u</kbd> multiplies the next command
by four, typing <kbd>C-u C-v</kbd> scrolls the calendar forward by a year and
typing <kbd>C-u M-v</kbd> scrolls the calendar backward by a year.
</p>
<p>  The function keys &lt;NEXT&gt; and &lt;PRIOR&gt; are equivalent to
<kbd>C-v</kbd> and <kbd>M-v</kbd>, just as they are in other modes.
</p>

<hr>
<a name="Mark-and-Region"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Scroll-Calendar" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar_002fDiary" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#General-Calendar" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-Mark-and-the-Region"></a>
<h3 class="subsection">26.1.3 The Mark and the Region</h3>

<p>  The concept of the mark applies to the calendar just as to any other
buffer, but it marks a <em>date</em>, not a <em>position</em> in the buffer.
The region consists of the days between the mark and point (including
the starting and stopping dates).
</p>
<dl compact="compact">
<dt><kbd>C-SPC</kbd></dt>
<dd><p>Set the mark to today&rsquo;s date (<code>calendar-set-mark</code>).
</p></dd>
<dt><kbd>C-@</kbd></dt>
<dd><p>The same.
</p></dd>
<dt><kbd>C-x C-x</kbd></dt>
<dd><p>Interchange mark and point (<code>calendar-exchange-point-and-mark</code>).
</p></dd>
<dt><kbd>M-=</kbd></dt>
<dd><p>Display the number of days in the current region
(<code>calendar-count-days-region</code>).
</p></dd>
</dl>

<a name="index-C_002d_0040-_0028Calendar-mode_0029"></a>
<a name="index-C_002dSPC-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dset_002dmark"></a>
<a name="index-C_002dx-C_002dx-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dexchange_002dpoint_002dand_002dmark"></a>
<p>  You set the mark in the calendar, as in any other buffer, by using <kbd>C-@</kbd>
or <kbd>C-SPC</kbd> (<code>calendar-set-mark</code>).  You return to the marked date
with the command <kbd>C-x C-x</kbd> (<code>calendar-exchange-point-and-mark</code>)
which puts the mark where point was and point where mark was.  The calendar
is scrolled as necessary, if the marked date was not visible on the
screen.  This does not change the extent of the region.
</p>
<a name="index-M_002d_003d-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dcount_002ddays_002dregion"></a>
<p>  To determine the number of days in the region, type <kbd>M-=</kbd>
(<code>calendar-count-days-region</code>).  The numbers of days printed is
<em>inclusive</em>; that is, it includes the days specified by mark and
point.
</p>
<a name="index-mark-ring-1"></a>
<p>  The main use of the mark in the calendar is to remember dates that you may
want to go back to.  To make this feature more useful, the mark ring
(see section <a href="xemacs_12.html#Mark-Ring">The Mark Ring</a>) operates exactly as in other buffers:  Emacs remembers
16 previous locations of the mark.  To return to a marked date, type <kbd>C-u
C-SPC</kbd> (or <kbd>C-u C-@</kbd>); this is the command <code>calendar-set-mark</code> given
a numeric argument.  It moves point to where the mark was, restores the mark
from the ring of former marks, and stores the previous point at the end of
the mark ring.  So, repeated use of this command moves point through all
the old marks on the ring, one by one.
</p>
<hr>
<a name="General-Calendar"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Mark-and-Region" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar_002fDiary" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#LaTeX-Calendar" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Miscellaneous-Calendar-Commands"></a>
<h3 class="subsection">26.1.4 Miscellaneous Calendar Commands</h3>

<dl compact="compact">
<dt><kbd>p d</kbd></dt>
<dd><p>Display day-in-year (<code>calendar-print-day-of-year</code>).
</p></dd>
<dt><kbd>?</kbd></dt>
<dd><p>Briefly describe calendar commands (<code>describe-calendar-mode</code>).
</p></dd>
<dt><kbd>C-c C-l</kbd></dt>
<dd><p>Regenerate the calendar window (<code>redraw-calendar</code>).
</p></dd>
<dt><kbd>SPC</kbd></dt>
<dd><p>Scroll the next window (<code>scroll-other-window</code>).
</p></dd>
<dt><kbd>q</kbd></dt>
<dd><p>Exit from calendar (<code>exit-calendar</code>).
</p></dd>
</dl>

<a name="index-p-d-_0028Calendar-mode_0029"></a>
<a name="index-day-of-year"></a>
<a name="index-calendar_002dprint_002dday_002dof_002dyear"></a>
<p>  If you want to know how many days have elapsed since the start of
the year, or the number of days remaining in the year, type the <kbd>p d</kbd>
command (<code>calendar-print-day-of-year</code>).  This displays both
of those numbers in the echo area.
</p>
<a name="index-_003f-_0028Calendar-mode_0029"></a>
<a name="index-describe_002dcalendar_002dmode"></a>
<p>  To display a brief description of the calendar commands, type <kbd>?</kbd>
(<code>describe-calendar-mode</code>).  For a fuller description, type <kbd>C-h m</kbd>.
</p>
<a name="index-SPC-_0028Calendar-mode_0029"></a>
<a name="index-scroll_002dother_002dwindow-1"></a>
<p>  You can use <kbd>SPC</kbd> (<code>scroll-other-window</code>) to scroll the other
window.  This is handy when you display a list of holidays or diary entries
in another window.
</p>
<a name="index-C_002dc-C_002dl-_0028Calendar-mode_0029"></a>
<a name="index-redraw_002dcalendar"></a>
<p>  If the calendar window text gets corrupted, type <kbd>C-c C-l</kbd>
(<code>redraw-calendar</code>) to redraw it.  (This can only happen if you use
non-Calendar-mode editing commands.)
</p>
<a name="index-SPC-_0028Calendar-mode_0029-1"></a>
<p>  In Calendar mode, you can use <kbd>SPC</kbd> (<code>scroll-other-window</code>)
to scroll the other window.  This is handy when you display a list of
holidays or diary entries in another window.
</p>
<a name="index-q-_0028Calendar-mode_0029"></a>
<a name="index-exit_002dcalendar"></a>
<p>  To exit from the calendar, type <kbd>q</kbd> (<code>exit-calendar</code>).  This
buries all buffers related to the calendar, selecting other buffers.
(If a frame contains a dedicated calendar window, exiting from the
calendar iconifies that frame.)
</p>
<hr>
<a name="LaTeX-Calendar"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#General-Calendar" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Reading-Mail" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Holidays" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="LaTeX-Calendar-1"></a>
<h2 class="section">26.2 LaTeX Calendar</h2>
<a name="index-calendar-and-LaTeX"></a>

<p>   The Calendar LaTeX commands produce a buffer of LaTeX code that
prints as a calendar.  Depending on the command you use, the printed
calendar covers the day, week, month or year that point is in.
</p>
<a name="index-t-_0028Calendar-mode_0029"></a>
<dl compact="compact">
<dt><kbd>t m</kbd></dt>
<dd><p>Generate a one-month calendar (<code>cal-tex-cursor-month</code>).
</p></dd>
<dt><kbd>t M</kbd></dt>
<dd><p>Generate a sideways-printing one-month calendar
(<code>cal-tex-cursor-month-landscape</code>).
</p></dd>
<dt><kbd>t d</kbd></dt>
<dd><p>Generate a one-day calendar
(<code>cal-tex-cursor-day</code>).
</p></dd>
<dt><kbd>t w 1</kbd></dt>
<dd><p>Generate a one-page calendar for one week
(<code>cal-tex-cursor-week</code>).
</p></dd>
<dt><kbd>t w 2</kbd></dt>
<dd><p>Generate a two-page calendar for one week
(<code>cal-tex-cursor-week2</code>).
</p></dd>
<dt><kbd>t w 3</kbd></dt>
<dd><p>Generate an ISO-style calendar for one week
(<code>cal-tex-cursor-week-iso</code>).
</p></dd>
<dt><kbd>t w 4</kbd></dt>
<dd><p>Generate a calendar for one Monday-starting week
(<code>cal-tex-cursor-week-monday</code>).
</p></dd>
<dt><kbd>t f w</kbd></dt>
<dd><p>Generate a Filofax-style two-weeks-at-a-glance calendar
(<code>cal-tex-cursor-filofax-2week</code>).
</p></dd>
<dt><kbd>t f W</kbd></dt>
<dd><p>Generate a Filofax-style one-week-at-a-glance calendar
(<code>cal-tex-cursor-filofax-week</code>).
</p></dd>
<dt><kbd>t y</kbd></dt>
<dd><p>Generate a calendar for one year
(<code>cal-tex-cursor-year</code>).
</p></dd>
<dt><kbd>t Y</kbd></dt>
<dd><p>Generate a sideways-printing calendar for one year
(<code>cal-tex-cursor-year-landscape</code>).
</p></dd>
<dt><kbd>t f y</kbd></dt>
<dd><p>Generate a Filofax-style calendar for one year
(<code>cal-tex-cursor-filofax-year</code>).
</p></dd>
</dl>

<p>  Some of these commands print the calendar sideways (in &ldquo;landscape
mode&rdquo;), so it can be wider than it is long.  Some of them use Filofax
paper size (3.75in x 6.75in).  All of these commands accept a prefix
argument which specifies how many days, weeks, months or years to print
(starting always with the selected one).
</p>
<p>  If the variable <code>cal-tex-holidays</code> is non-<code>nil</code> (the
default), then the printed calendars show the holidays in
<code>calendar-holidays</code>.  If the variable <code>cal-tex-diary</code> is
non-<code>nil</code> (the default is <code>nil</code>), diary entries are included
also (in weekly and monthly calendars only).
</p>
<hr>
<a name="Holidays"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#LaTeX-Calendar" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#LaTeX-Calendar" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Sunrise_002fSunset" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Holidays-1"></a>
<h3 class="subsection">26.2.1 Holidays</h3>
<a name="index-holidays"></a>

<p>  The Emacs calendar knows about all major and many minor holidays,
and can display them.
</p>
<dl compact="compact">
<dt><kbd>h</kbd></dt>
<dd><p>Display holidays for the selected date
(<code>calendar-cursor-holidays</code>).
</p></dd>
<dt><kbd>Button2 Holidays</kbd></dt>
<dd><p>Display any holidays for the date you click on.
</p></dd>
<dt><kbd>x</kbd></dt>
<dd><p>Mark holidays in the calendar window (<code>mark-calendar-holidays</code>).
</p></dd>
<dt><kbd>u</kbd></dt>
<dd><p>Unmark calendar window (<code>calendar-unmark</code>).
</p></dd>
<dt><kbd>a</kbd></dt>
<dd><p>List all holidays for the displayed three months in another window
(<code>list-calendar-holidays</code>).
</p></dd>
<dt><kbd>M-x holidays</kbd></dt>
<dd><p>List all holidays for three months around today&rsquo;s date in another
window.
</p></dd>
<dt><kbd>M-x list-holidays</kbd></dt>
<dd><p>List holidays in another window for a specified range of years.
</p></dd>
</dl>

<a name="index-h-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dcursor_002dholidays"></a>
<p>  To see if any holidays fall on a given date, position point on that
date in the calendar window and use the <kbd>h</kbd> command.  Alternatively,
click on that date with <kbd>Button2</kbd> and then choose <kbd>Holidays</kbd>
from the menu that appears.  Either way, this displays the holidays for
that date, in the echo area if they fit there, otherwise in a separate
window.
</p>
<a name="index-x-_0028Calendar-mode_0029"></a>
<a name="index-mark_002dcalendar_002dholidays"></a>
<a name="index-u-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dunmark"></a>
<p>  To view the distribution of holidays for all the dates shown in the
calendar, use the <kbd>x</kbd> command.  This displays the dates that are
holidays in a different face (or places a &lsquo;<samp>*</samp>&rsquo; after these dates, if 
display with multiple faces is not available). The command applies both
to the currently visible months and to other months that subsequently
become visible by scrolling.  To turn marking off and erase the current
marks, type <kbd>u</kbd>, which also erases any diary marks (see section <a href="#Diary">The Diary</a>).
</p>
<a name="index-a-_0028Calendar-mode_0029"></a>
<a name="index-list_002dcalendar_002dholidays"></a>
<p>  To get even more detailed information, use the <kbd>a</kbd> command, which
displays a separate buffer containing a list of all holidays in the
current three-month range.  You can use &lt;SPC&gt; in the calendar window
to scroll that list.
</p>
<a name="index-holidays-1"></a>
<p>  The command <kbd>M-x holidays</kbd> displays the list of holidays for the
current month and the preceding and succeeding months; this works even
if you don&rsquo;t have a calendar window.  If you want the list of holidays
centered around a different month, use <kbd>C-u M-x holidays</kbd>, which
prompts for the month and year.
</p>
<p>  The holidays known to Emacs include United States holidays and the
major Christian, Jewish, and Islamic holidays; also the solstices and
equinoxes.
</p>
<a name="index-list_002dholidays"></a>
<p>   The command <kbd>M-x list-holidays</kbd> displays the list of holidays for
a range of years.  This function asks you for the starting and stopping
years, and allows you to choose all the holidays or one of several
categories of holidays.  You can use this command even if you don&rsquo;t have
a calendar window.
</p>
<p>  The dates used by Emacs for holidays are based on <em>current
practice</em>, not historical fact.  Historically, for instance, the start
of daylight savings time and even its existence have varied from year to
year, but present United States law mandates that daylight savings time
begins on the first Sunday in April.  When the daylight savings rules
are set up for the United States, Emacs always uses the present
definition, even though it is wrong for some prior years.
</p>
<hr>
<a name="Sunrise_002fSunset"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Holidays" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#LaTeX-Calendar" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Lunar-Phases" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Times-of-Sunrise-and-Sunset"></a>
<h3 class="subsection">26.2.2 Times of Sunrise and Sunset</h3>
<a name="index-sunrise-and-sunset"></a>

<p>  Special calendar commands can tell you, to within a minute or two, the
times of sunrise and sunset for any date.
</p>
<dl compact="compact">
<dt><kbd>S</kbd></dt>
<dd><p>Display times of sunrise and sunset for the selected date
(<code>calendar-sunrise-sunset</code>).
</p></dd>
<dt><kbd>Button2 Sunrise/Sunset</kbd></dt>
<dd><p>Display times of sunrise and sunset for the date you click on.
</p></dd>
<dt><kbd>M-x sunrise-sunset</kbd></dt>
<dd><p>Display times of sunrise and sunset for today&rsquo;s date.
</p></dd>
<dt><kbd>C-u M-x sunrise-sunset</kbd></dt>
<dd><p>Display times of sunrise and sunset for a specified date.
</p></dd>
</dl>

<a name="index-S-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dsunrise_002dsunset"></a>
<a name="index-sunrise_002dsunset"></a>
<p>  Within the calendar, to display the <em>local times</em> of sunrise and
sunset in the echo area, move point to the date you want, and type
<kbd>S</kbd>.  Alternatively, click <kbd>Button2</kbd> on the date, then choose
<kbd>Sunrise/Sunset</kbd> from the menu that appears.  The command <kbd>M-x
sunrise-sunset</kbd> is available outside the calendar to display this
information for today&rsquo;s date or a specified date.  To specify a date
other than today, use <kbd>C-u M-x sunrise-sunset</kbd>, which prompts for
the year, month, and day.
</p>
<p>  You can display the times of sunrise and sunset for any location and
any date with <kbd>C-u C-u M-x sunrise-sunset</kbd>.  This asks you for a
longitude, latitude, number of minutes difference from Coordinated
Universal Time, and date, and then tells you the times of sunrise and
sunset for that location on that date.
</p>
<p>  Because the times of sunrise and sunset depend on the location on
earth, you need to tell Emacs your latitude, longitude, and location
name before using these commands.  Here is an example of what to set:
</p>
<a name="index-calendar_002dlocation_002dname"></a>
<a name="index-calendar_002dlongitude"></a>
<a name="index-calendar_002dlatitude"></a>
<div class="example">
<pre class="example">(setq calendar-latitude 40.1)
(setq calendar-longitude -88.2)
(setq calendar-location-name &quot;Urbana, IL&quot;)
</pre></div>

<p>Use one decimal place in the values of <code>calendar-latitude</code> and
<code>calendar-longitude</code>.
</p>
<p>  Your time zone also affects the local time of sunrise and sunset.
Emacs usually gets time zone information from the operating system, but
if these values are not what you want (or if the operating system does
not supply them), you must set them yourself.  Here is an example:
</p>
<a name="index-calendar_002dtime_002dzone"></a>
<a name="index-calendar_002dstandard_002dtime_002dzone_002dname"></a>
<a name="index-calendar_002ddaylight_002dtime_002dzone_002dname"></a>
<div class="example">
<pre class="example">(setq calendar-time-zone -360)
(setq calendar-standard-time-zone-name &quot;CST&quot;)
(setq calendar-daylight-time-zone-name &quot;CDT&quot;)
</pre></div>

<p>The value of <code>calendar-time-zone</code> is the number of minutes
difference between your local standard time and Coordinated Universal
Time (Greenwich time).  The values of
<code>calendar-standard-time-zone-name</code> and
<code>calendar-daylight-time-zone-name</code> are the abbreviations used in
your time zone.  Emacs displays the times of sunrise and sunset
<em>corrected for daylight savings time</em>.  See section <a href="#Daylight-Savings">Daylight Savings Time</a>,
for how daylight savings time is determined.
</p>
<p>  As a user, you might find it convenient to set the calendar location
variables for your usual physical location in your init file.  And when
you install Emacs on a machine, you can create a &lsquo;<tt>default.el</tt>&rsquo; file
which sets them properly for the typical location of most users of that
machine.  See section <a href="xemacs_30.html#Init-File">The Init File</a>.
</p>
<hr>
<a name="Lunar-Phases"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Sunrise_002fSunset" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#LaTeX-Calendar" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Calendars" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Phases-of-the-Moon"></a>
<h3 class="subsection">26.2.3 Phases of the Moon</h3>
<a name="index-phases-of-the-moon"></a>
<a name="index-moon_002c-phases-of"></a>

<p>  These calendar commands display the dates and times of the phases of
the moon (new moon, first quarter, full moon, last quarter).  This
feature is useful for debugging problems that &ldquo;depend on the phase of
the moon.&rdquo;
</p>
<dl compact="compact">
<dt><kbd>M</kbd></dt>
<dd><p>Display the dates and times for all the quarters of the moon for the
three-month period shown (<code>calendar-phases-of-moon</code>).
</p></dd>
<dt><kbd>M-x phases-of-moon</kbd></dt>
<dd><p>Display dates and times of the quarters of the moon for three months around
today&rsquo;s date.
</p></dd>
</dl>

<a name="index-M-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dphases_002dof_002dmoon"></a>
<p>  Within the calendar, use the <kbd>M</kbd> command to display a separate
buffer of the phases of the moon for the current three-month range.  The
dates and times listed are accurate to within a few minutes.
</p>
<a name="index-phases_002dof_002dmoon"></a>
<p>  Outside the calendar, use the command <kbd>M-x phases-of-moon</kbd> to
display the list of the phases of the moon for the current month and the
preceding and succeeding months.  For information about a different
month, use <kbd>C-u M-x phases-of-moon</kbd>, which prompts for the month and
year.
</p> 
<p>  The dates and times given for the phases of the moon are given in
local time (corrected for daylight savings, when appropriate); but if
the variable <code>calendar-time-zone</code> is void, Coordinated Universal
Time (the Greenwich time zone) is used.  See section <a href="#Daylight-Savings">Daylight Savings Time</a>.
</p>
<hr>
<a name="Other-Calendars"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Lunar-Phases" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#LaTeX-Calendar" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Systems" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Conversion-To-and-From-Other-Calendars"></a>
<h3 class="subsection">26.2.4 Conversion To and From Other Calendars</h3>

<a name="index-Gregorian-calendar"></a>
<p>  The Emacs calendar displayed is <em>always</em> the Gregorian calendar,
sometimes called the &ldquo;new style&rdquo; calendar, which is used in most of
the world today.  However, this calendar did not exist before the
sixteenth century and was not widely used before the eighteenth century;
it did not fully displace the Julian calendar and gain universal
acceptance until the early twentieth century.  The Emacs calendar can
display any month since January, year 1 of the current era, but the
calendar displayed is the Gregorian, even for a date at which the
Gregorian calendar did not exist.
</p>
<p>  While Emacs cannot display other calendars, it can convert dates to
and from several other calendars.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Calendar-Systems">26.3 Supported Calendar Systems</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      The calendars Emacs understands
                            (aside from Gregorian).
</td></tr>
<tr><td align="left" valign="top"><a href="#To-Other-Calendar">26.4 Converting To Other Calendars</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Converting the selected date to various calendars.
</td></tr>
<tr><td align="left" valign="top"><a href="#From-Other-Calendar">26.5 Converting From Other Calendars</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Moving to a date specified in another calendar.
</td></tr>
<tr><td align="left" valign="top"><a href="#Mayan-Calendar">26.5.1 Converting from the Mayan Calendar</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Moving to a date specified in a Mayan calendar.
</td></tr>
</table>

<p>  If you are interested in these calendars, you can convert dates one at a
time.  Put point on the desired date of the Gregorian calendar and press the
appropriate keys.  The <kbd>p</kbd> is a mnemonic for &ldquo;print&rdquo; since Emacs
&ldquo;prints&rsquo; the equivalent date in the echo area.
</p><hr>
<a name="Calendar-Systems"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Calendars" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Reading-Mail" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#To-Other-Calendar" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Supported-Calendar-Systems"></a>
<h2 class="section">26.3 Supported Calendar Systems</h2>

<a name="index-ISO-commercial-calendar"></a>
<p>  The ISO commercial calendar is used largely in Europe.
</p>
<a name="index-Julian-calendar"></a>
<p>  The Julian calendar, named after Julius Caesar, was the one used in Europe
throughout medieval times, and in many countries up until the nineteenth
century.
</p>
<a name="index-Julian-day-numbers"></a>
<a name="index-astronomical-day-numbers"></a>
<p>  Astronomers use a simple counting of days elapsed since noon, Monday,
January 1, 4713 B.C. on the Julian calendar.  The number of days elapsed
is called the <em>Julian day number</em> or the <em>Astronomical day number</em>.
</p>
<a name="index-Hebrew-calendar"></a>
<p>  The Hebrew calendar is used by tradition in the Jewish religion.  The
Emacs calendar program uses the Hebrew calendar to determine the dates
of Jewish holidays.  Hebrew calendar dates begin and end at sunset.
</p>
<a name="index-Islamic-calendar"></a>
<p>  The Islamic calendar is used in many predominantly Islamic countries.
Emacs uses it to determine the dates of Islamic holidays.  There is no
universal agreement in the Islamic world about the calendar; Emacs uses
a widely accepted version, but the precise dates of Islamic holidays
often depend on proclamation by religious authorities, not on
calculations.  As a consequence, the actual dates of observance can vary
slightly from the dates computed by Emacs.  Islamic calendar dates begin
and end at sunset.
</p>
<a name="index-French-Revolutionary-calendar"></a>
<p>  The French Revolutionary calendar was created by the Jacobins after the 1789
revolution, to represent a more secular and nature-based view of the annual
cycle, and to install a 10-day week in a rationalization measure similar to
the metric system.  The French government officially abandoned this
calendar at the end of 1805.
</p>
<a name="index-Mayan-calendar"></a>
<p>  The Maya of Central America used three separate, overlapping calendar
systems, the <em>long count</em>, the <em>tzolkin</em>, and the <em>haab</em>.
Emacs knows about all three of these calendars.  Experts dispute the
exact correlation between the Mayan calendar and our calendar; Emacs uses the
Goodman-Martinez-Thompson correlation in its calculations.
</p>
<a name="index-Coptic-calendar"></a>
<a name="index-Ethiopic-calendar"></a>
<p>  The Copts use a calendar based on the ancient Egyptian solar calendar.
Their calendar consists of twelve 30-day months followed by an extra
five-day period.  Once every fourth year they add a leap day to this
extra period to make it six days.  The Ethiopic calendar is identical in
structure, but has different year numbers and month names.
</p>
<a name="index-Persian-calendar"></a>
<p>  The Persians use a solar calendar based on a design of Omar Khayyam.
Their calendar consists of twelve months of which the first six have 31
days, the next five have 30 days, and the last has 29 in ordinary years
and 30 in leap years.  Leap years occur in a complicated pattern every
four or five years.
</p>
<a name="index-Chinese-calendar"></a>
<p>  The Chinese calendar is a complicated system of lunar months arranged
into solar years.  The years go in cycles of sixty, each year containing
either twelve months in an ordinary year or thirteen months in a leap
year; each month has either 29 or 30 days.  Years, ordinary months, and
days are named by combining one of ten &ldquo;celestial stems&rdquo; with one of
twelve &ldquo;terrestrial branches&rdquo; for a total of sixty names that are
repeated in a cycle of sixty.
</p>
<hr>
<a name="To-Other-Calendar"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Systems" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Reading-Mail" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#From-Other-Calendar" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Converting-To-Other-Calendars"></a>
<h2 class="section">26.4 Converting To Other Calendars</h2>

<p>  The following commands describe the selected date (the date at point)
in various other calendar systems:
</p>
<dl compact="compact">
<dt><kbd>Button2  Other Calendars</kbd></dt>
<dd><p>Display the date that you click on, expressed in various other calendars.
<a name="index-p-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dprint_002diso_002ddate"></a>
</p></dd>
<dt><kbd>p c</kbd></dt>
<dd><p>Display ISO commercial calendar equivalent for selected day
(<code>calendar-print-iso-date</code>).
<a name="index-calendar_002dprint_002djulian_002ddate"></a>
</p></dd>
<dt><kbd>p j</kbd></dt>
<dd><p>Display Julian date for selected day (<code>calendar-print-julian-date</code>).
<a name="index-calendar_002dprint_002dastro_002dday_002dnumber"></a>
</p></dd>
<dt><kbd>p a</kbd></dt>
<dd><p>Display astronomical (Julian) day number for selected day
(<code>calendar-print-astro-day-number</code>).
<a name="index-calendar_002dprint_002dhebrew_002ddate"></a>
</p></dd>
<dt><kbd>p h</kbd></dt>
<dd><p>Display Hebrew date for selected day (<code>calendar-print-hebrew-date</code>).
<a name="index-calendar_002dprint_002dislamic_002ddate"></a>
</p></dd>
<dt><kbd>p i</kbd></dt>
<dd><p>Display Islamic date for selected day (<code>calendar-print-islamic-date</code>).
<a name="index-calendar_002dprint_002dfrench_002ddate"></a>
</p></dd>
<dt><kbd>p f</kbd></dt>
<dd><p>Display French Revolutionary date for selected day
(<code>calendar-print-french-date</code>).
<a name="index-calendar_002dprint_002dchinese_002ddate"></a>
</p></dd>
<dt><kbd>p C</kbd></dt>
<dd><p>Display Chinese date for selected day
(<code>calendar-print-chinese-date</code>).
<a name="index-calendar_002dprint_002dcoptic_002ddate"></a>
</p></dd>
<dt><kbd>p k</kbd></dt>
<dd><p>Display Coptic date for selected day
(<code>calendar-print-coptic-date</code>).
<a name="index-calendar_002dprint_002dethiopic_002ddate"></a>
</p></dd>
<dt><kbd>p e</kbd></dt>
<dd><p>Display Ethiopic date for selected day
(<code>calendar-print-ethiopic-date</code>).
<a name="index-calendar_002dprint_002dpersian_002ddate"></a>
</p></dd>
<dt><kbd>p p</kbd></dt>
<dd><p>Display Persian date for selected day
(<code>calendar-print-persian-date</code>).
<a name="index-calendar_002dprint_002dmayan_002ddate"></a>
</p></dd>
<dt><kbd>p m</kbd></dt>
<dd><p>Display Mayan date for selected day (<code>calendar-print-mayan-date</code>).
</p></dd>
</dl>

<p>  If you are using X, the easiest way to translate a date into other
calendars is to click on it with <kbd>Button2</kbd>, then choose <kbd>Other
Calendars</kbd> from the menu that appears.  This displays the equivalent
forms of the date in all the calendars Emacs understands, in the form of
a menu.  (Choosing an alternative from this menu doesn&rsquo;t actually do
anything&mdash;the menu is used only for display.)
</p>
<p>  Put point on the desired date of the Gregorian calendar, then type the
appropriate keys.  The <kbd>p</kbd> is a mnemonic for &ldquo;print&rdquo; since Emacs
&ldquo;prints&rdquo; the equivalent date in the echo area.
</p>
<hr>
<a name="From-Other-Calendar"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#To-Other-Calendar" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Reading-Mail" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Mayan-Calendar" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Converting-From-Other-Calendars"></a>
<h2 class="section">26.5 Converting From Other Calendars</h2>

<p>  You can use the other supported calendars to specify a date to move
to.  This section describes the commands for doing this using calendars
other than Mayan; for the Mayan calendar, see the following section.
</p>
<a name="index-g-char-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dgoto_002diso_002ddate"></a>
<a name="index-calendar_002dgoto_002djulian_002ddate"></a>
<a name="index-calendar_002dgoto_002dastro_002dday_002dnumber"></a>
<a name="index-calendar_002dgoto_002dhebrew_002ddate"></a>
<a name="index-calendar_002dgoto_002dislamic_002ddate"></a>
<a name="index-calendar_002dgoto_002dfrench_002ddate"></a>
<a name="index-calendar_002dgoto_002dchinese_002ddate"></a>
<a name="index-calendar_002dgoto_002dpersian_002ddate"></a>
<a name="index-calendar_002dgoto_002dcoptic_002ddate"></a>
<a name="index-calendar_002dgoto_002dethiopic_002ddate"></a>
<dl compact="compact">
<dt><kbd>g c</kbd></dt>
<dd><p>Move to a date specified in the ISO commercial calendar
(<code>calendar-goto-iso-date</code>).
</p></dd>
<dt><kbd>g j</kbd></dt>
<dd><p>Move to a date specified in the Julian calendar
(<code>calendar-goto-julian-date</code>).
</p></dd>
<dt><kbd>g a</kbd></dt>
<dd><p>Move to a date specified in astronomical (Julian) day number
(<code>calendar-goto-astro-day-number</code>).
</p></dd>
<dt><kbd>g h</kbd></dt>
<dd><p>Move to a date specified in the Hebrew calendar
(<code>calendar-goto-hebrew-date</code>).
</p></dd>
<dt><kbd>g i</kbd></dt>
<dd><p>Move to a date specified in the Islamic calendar
(<code>calendar-goto-islamic-date</code>).
</p></dd>
<dt><kbd>g f</kbd></dt>
<dd><p>Move to a date specified in the French Revolutionary calendar
(<code>calendar-goto-french-date</code>).
</p></dd>
<dt><kbd>g C</kbd></dt>
<dd><p>Move to a date specified in the Chinese calendar
(<code>calendar-goto-chinese-date</code>).
</p></dd>
<dt><kbd>g p</kbd></dt>
<dd><p>Move to a date specified in the Persian calendar
(<code>calendar-goto-persian-date</code>).
</p></dd>
<dt><kbd>g k</kbd></dt>
<dd><p>Move to a date specified in the Coptic calendar
(<code>calendar-goto-coptic-date</code>).
</p></dd>
<dt><kbd>g e</kbd></dt>
<dd><p>Move to a date specified in the Ethiopic calendar
(<code>calendar-goto-ethiopic-date</code>).
</p></dd>
</dl>

<p>  These commands ask you for a date on the other calendar, move point to
the Gregorian calendar date equivalent to that date, and display the
other calendar&rsquo;s date in the echo area.  Emacs uses strict completion
(see section <a href="xemacs_9.html#Completion">Completion</a>) whenever it asks you to type a month name, so you
don&rsquo;t have to worry about the spelling of Hebrew, Islamic, or French names.
</p>
<a name="index-list_002dyahrzeit_002ddates"></a>
<a name="index-yahrzeits"></a>
<p>  One common question concerning the Hebrew calendar is the computation
of the anniversary of a date of death, called a &ldquo;yahrzeit.&rdquo;  The Emacs
calendar includes a facility for such calculations.  If you are in the
calendar, the command <kbd>M-x list-yahrzeit-dates</kbd> asks you for a
range of years and then displays a list of the yahrzeit dates for those
years for the date given by point.  If you are not in the calendar,
this command first asks you for the date of death and the range of
years, and then displays the list of yahrzeit dates.
</p>
<hr>
<a name="Mayan-Calendar"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#From-Other-Calendar" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#From-Other-Calendar" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Diary" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Converting-from-the-Mayan-Calendar"></a>
<h3 class="subsection">26.5.1 Converting from the Mayan Calendar</h3>

<p>  Here are the commands to select dates based on the Mayan calendar:
</p>
<dl compact="compact">
<dt><kbd>g m l</kbd></dt>
<dd><p>Move to a date specified by the long count calendar
(<code>calendar-goto-mayan-long-count-date</code>).
</p></dd>
<dt><kbd>g m n t</kbd></dt>
<dd><p>Move to the next occurrence of a place in the
tzolkin calendar (<code>calendar-next-tzolkin-date</code>).
</p></dd>
<dt><kbd>g m p t</kbd></dt>
<dd><p>Move to the previous occurrence of a place in the
tzolkin calendar (<code>calendar-previous-tzolkin-date</code>).
</p></dd>
<dt><kbd>g m n h</kbd></dt>
<dd><p>Move to the next occurrence of a place in the
haab calendar (<code>calendar-next-haab-date</code>).
</p></dd>
<dt><kbd>g m p h</kbd></dt>
<dd><p>Move to the previous occurrence of a place in the
haab calendar (<code>calendar-previous-haab-date</code>).
</p></dd>
<dt><kbd>g m n c</kbd></dt>
<dd><p>Move to the next occurrence of a place in the
calendar round (<code>calendar-next-calendar-round-date</code>).
</p></dd>
<dt><kbd>g m p c</kbd></dt>
<dd><p>Move to the previous occurrence of a place in the
calendar round (<code>calendar-previous-calendar-round-date</code>).
</p></dd>
</dl>

<a name="index-Mayan-long-count"></a>
<p>  To understand these commands, you need to understand the Mayan calendars.
The <em>long count</em> is a counting of days with these units:
</p> 
<div class="display">
<pre class="display">1 kin = 1 day&nbsp;&nbsp;&nbsp;1 uinal = 20 kin&nbsp;&nbsp;&nbsp;1 tun = 18 uinal
1 katun = 20 tun&nbsp;&nbsp;&nbsp;1 baktun = 20 katun
</pre></div>

<a name="index-g-m-l-_0028Calendar-mode_0029"></a>
<a name="index-calendar_002dgoto_002dmayan_002dlong_002dcount_002ddate"></a>
<p>Thus, the long count date 12.16.11.16.6 means 12 baktun, 16 katun, 11
tun, 16 uinal, and 6 kin.  The Emacs calendar can handle Mayan long
count dates as early as 7.17.18.13.1, but no earlier.  When you use the
<kbd>g m l</kbd> command, type the Mayan long count date with the baktun,
katun, tun, uinal, and kin separated by periods.
</p>
<a name="index-calendar_002dprevious_002dtzolkin_002ddate"></a>
<a name="index-calendar_002dnext_002dtzolkin_002ddate"></a>
<a name="index-Mayan-tzolkin-calendar"></a>
<p>  The Mayan tzolkin calendar is a cycle of 260 days formed by a pair of
independent cycles of 13 and 20 days.  Since this cycle repeats
endlessly, Emacs provides commands to move backward and forward to the
previous or next point in the cycle.  Type <kbd>g m p t</kbd> to go to the
previous tzolkin date; Emacs asks you for a tzolkin date and moves point
to the previous occurrence of that date.  Similarly, type <kbd>g m n t</kbd>
to go to the next occurrence of a tzolkin date.
</p>
<a name="index-calendar_002dprevious_002dhaab_002ddate"></a>
<a name="index-calendar_002dnext_002dhaab_002ddate"></a>
<a name="index-Mayan-haab-calendar"></a>
<p>  The Mayan haab calendar is a cycle of 365 days arranged as 18 months
of 20 days each, followed a 5-day monthless period.  Like the tzolkin
cycle, this cycle repeats endlessly, and there are commands to move
backward and forward to the previous or next point in the cycle.  Type
<kbd>g m p h</kbd> to go to the previous haab date; Emacs asks you for a haab
date and moves point to the previous occurrence of that date.
Similarly, type <kbd>g m n h</kbd> to go to the next occurrence of a haab
date.
</p>
<a name="index-calendar_002dnext_002dcalendar_002dround_002ddate"></a>
<a name="index-Mayan-calendar-round"></a>
<p>  The Maya also used the combination of the tzolkin date and the haab
date.  This combination is a cycle of about 52 years called a
<em>calendar round</em>.  If you type <kbd>g m p c</kbd>, Emacs asks you for
both a haab and a tzolkin date and then moves point to the previous
occurrence of that combination.  Use <kbd>g m n c</kbd> to move point to the
next occurrence of a combination.  These commands signal an error if the
haab/tzolkin date combination you have typed is impossible.
</p>
<p>  Emacs uses strict completion (see section <a href="xemacs_9.html#Completion">Completion</a>) whenever it
asks you to type a Mayan name, so you don&rsquo;t have to worry about
spelling.
</p>
<hr>
<a name="Diary"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Mayan-Calendar" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#From-Other-Calendar" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Diary-Commands" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-Diary"></a>
<h3 class="subsection">26.5.2 The Diary</h3>
<a name="index-diary"></a>

<p>  The Emacs diary keeps track of appointments or other events on a daily
basis, in conjunction with the calendar.  To use the diary feature, you
must first create a <em>diary file</em> containing a list of events and
their dates.  Then Emacs can automatically pick out and display the
events for today, for the immediate future, or for any specified
date.
</p>
<p>  By default, Emacs uses &lsquo;<tt>~/diary</tt>&rsquo; as the diary file.  This is the
same file that the <code>calendar</code> utility uses.  A sample
&lsquo;<tt>~/diary</tt>&rsquo; file is:
</p>
<div class="example">
<pre class="example">12/22/1988 Twentieth wedding anniversary!!
&amp;1/1. Happy New Year!
10/22 Ruth's birthday.
* 21, *: Payday
Tuesday--weekly meeting with grad students at 10am
         Supowit, Shen, Bitner, and Kapoor to attend.
1/13/89 Friday the thirteenth!!
&amp;thu 4pm squash game with Lloyd.
mar 16 Dad's birthday
April 15, 1989 Income tax due.
&amp;* 15 time cards due.
</pre></div>

<p>This example uses extra spaces to align the event descriptions of most
of the entries.  Such formatting is purely a matter of taste.
</p>
<p>  Although you probably will start by creating a diary manually, Emacs
provides a number of commands to let you view, add, and change diary
entries.  You can also share diary entries with other users
(see section <a href="#Included-Diary-Files">Included Diary Files</a>).
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Diary-Commands">26.5.3 Commands Displaying Diary Entries</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Viewing diary entries and associated calendar dates.
</td></tr>
<tr><td align="left" valign="top"><a href="#Format-of-Diary-File">26.5.4 The Diary File</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Entering events in your diary.
</td></tr>
<tr><td align="left" valign="top"><a href="#Date-Formats">26.5.5 Date Formats</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Various ways you can specify dates.
</td></tr>
<tr><td align="left" valign="top"><a href="#Adding-to-Diary">26.5.6 Commands to Add to the Diary</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Commands to create diary entries.
</td></tr>
<tr><td align="left" valign="top"><a href="#Special-Diary-Entries">26.5.7 Special Diary Entries</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  Anniversaries, blocks of dates, cyclic entries, etc.
</td></tr>
</table>

<hr>
<a name="Diary-Commands"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Diary" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#From-Other-Calendar" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Format-of-Diary-File" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Commands-Displaying-Diary-Entries"></a>
<h3 class="subsection">26.5.3 Commands Displaying Diary Entries</h3>

<p>  Once you have created a &lsquo;<tt>~/diary</tt>&rsquo; file, you can use the calendar
to view it.  You can also view today&rsquo;s events outside of Calendar mode.
</p>
<dl compact="compact">
<dt><kbd>d</kbd></dt>
<dd><p>Display all diary entries for the selected date
(<code>view-diary-entries</code>).
</p></dd>
<dt><kbd>Button2 Diary</kbd></dt>
<dd><p>Display all diary entries for the date you click on.
</p></dd>
<dt><kbd>s</kbd></dt>
<dd><p>Display the entire diary file (<code>show-all-diary-entries</code>).
</p></dd>
<dt><kbd>m</kbd></dt>
<dd><p>Mark all visible dates that have diary entries
(<code>mark-diary-entries</code>).
</p></dd>
<dt><kbd>u</kbd></dt>
<dd><p>Unmark the calendar window (<code>calendar-unmark</code>).
</p></dd>
<dt><kbd>M-x print-diary-entries</kbd></dt>
<dd><p>Print hard copy of the diary display as it appears.
</p></dd>
<dt><kbd>M-x diary</kbd></dt>
<dd><p>Display all diary entries for today&rsquo;s date.
</p></dd>
<dt><kbd>M-x diary-mail-entries</kbd></dt>
<dd><p>Mail yourself email reminders about upcoming diary entries.
</p></dd>
</dl>

<a name="index-d-_0028Calendar-mode_0029"></a>
<a name="index-view_002ddiary_002dentries"></a>
<p>  Displaying the diary entries with <kbd>d</kbd> shows in a separate window
the diary entries for the selected date in the calendar.  The mode line
of the new window shows the date of the diary entries and any holidays
that fall on that date.  If you specify a numeric argument with <kbd>d</kbd>,
it shows all the diary entries for that many successive days.  Thus,
<kbd>2 d</kbd> displays all the entries for the selected date and for the
following day.
</p>
<p>  Another way to display the diary entries for a date is to click
<kbd>Button2</kbd> on the date, and then choose <kbd>Diary</kbd> from the menu
that appears.
</p>
<a name="index-m-_0028Calendar-mode_0029"></a>
<a name="index-mark_002ddiary_002dentries"></a>
<a name="index-u-_0028Calendar-mode_0029-1"></a>
<a name="index-calendar_002dunmark-1"></a>
<p>  To get a broader view of which days are mentioned in the diary, use
the <kbd>m</kbd> command.  This displays the dates that have diary entries
in a different face (or places a &lsquo;<samp>+</samp>&rsquo; after these dates, if
display with multiple faces is not available).  The command applies both
to the currently visible months and to other months that subsequently
become visible by scrolling.  To turn marking off and erase the current
marks, type <kbd>u</kbd>, which also turns off holiday marks
(see section <a href="#Holidays">Holidays</a>).
</p>
<a name="index-s-_0028Calendar-mode_0029"></a>
<a name="index-show_002dall_002ddiary_002dentries"></a>
<p>  To see the full diary file, rather than just some of the entries, use
the <kbd>s</kbd> command.
</p>
<p>  Display of selected diary entries uses the selective display feature
to hide entries that don&rsquo;t apply.
</p>
<a name="index-print_002ddiary_002dentries"></a>
<p>  The diary buffer as you see it is an illusion, so simply printing the
buffer does not print what you see on your screen.  There is a special
command to print hard copy of the diary buffer <em>as it appears</em>;
this command is <kbd>M-x print-diary-entries</kbd>.  It sends the data
directly to the printer.  You can customize it like <code>lpr-region</code>
(see section <a href="#Hardcopy">Hardcopy Output</a>).
</p>
<a name="index-diary-1"></a>
<p>  The command <kbd>M-x diary</kbd> displays the diary entries for the current
date, independently of the calendar display, and optionally for the next
few days as well; the variable <code>number-of-diary-entries</code> specifies
how many days to include (see section <a href="xemacs_30.html#Customization">Customization</a>).
</p>
<p>  If you put <code>(diary)</code> in your init file, this
automatically displays a window with the day&rsquo;s diary entries, when you
enter Emacs.  See section <a href="xemacs_30.html#Init-File">The Init File</a>.  The mode line of the displayed window
shows the date and any holidays that fall on that date.
</p>
<a name="index-diary_002dmail_002dentries"></a>
<a name="index-diary_002dmail_002ddays"></a>
<p>  Many users like to receive notice of events in their diary as email.
To send such mail to yourself, use the command <kbd>M-x
diary-mail-entries</kbd>.  A prefix argument specifies how many days
(starting with today) to check; otherwise, the variable
<code>diary-mail-days</code> says how many days.
</p>
<hr>
<a name="Format-of-Diary-File"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Diary-Commands" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#From-Other-Calendar" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Date-Formats" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-Diary-File"></a>
<h3 class="subsection">26.5.4 The Diary File</h3>
<a name="index-diary-file"></a>

<a name="index-diary_002dfile"></a>
<p>  Your <em>diary file</em> is a file that records events associated with
particular dates.  The name of the diary file is specified by the
variable <code>diary-file</code>; &lsquo;<tt>~/diary</tt>&rsquo; is the default.  The
<code>calendar</code> utility program supports a subset of the format allowed
by the Emacs diary facilities, so you can use that utility to view the
diary file, with reasonable results aside from the entries it cannot
understand.
</p>
<p>  Each entry in the diary file describes one event and consists of one
or more lines.  An entry always begins with a date specification at the
left margin.  The rest of the entry is simply text to describe the
event.  If the entry has more than one line, then the lines after the
first must begin with whitespace to indicate they continue a previous
entry.  Lines that do not begin with valid dates and do not continue a
preceding entry are ignored.
</p>
<p>  You can inhibit the marking of certain diary entries in the calendar
window; to do this, insert an ampersand (&lsquo;<samp>&amp;</samp>&rsquo;) at the beginning of
the entry, before the date.  This has no effect on display of the entry
in the diary window; it affects only marks on dates in the calendar
window.  Nonmarking entries are especially useful for generic entries
that would otherwise mark many different dates.
</p>
<p>  If the first line of a diary entry consists only of the date or day
name with no following blanks or punctuation, then the diary window
display doesn&rsquo;t include that line; only the continuation lines appear.
For example, this entry:
</p>
<div class="example">
<pre class="example">02/11/1989
      Bill B. visits Princeton today
      2pm Cognitive Studies Committee meeting
      2:30-5:30 Liz at Lawrenceville
      4:00pm Dentist appt
      7:30pm Dinner at George's
      8:00-10:00pm concert
</pre></div>

<p>appears in the diary window without the date line at the beginning.
This style of entry looks neater when you display just a single day&rsquo;s
entries, but can cause confusion if you ask for more than one day&rsquo;s
entries.
</p>
<p>  You can edit the diary entries as they appear in the window, but it is
important to remember that the buffer displayed contains the <em>entire</em>
diary file, with portions of it concealed from view.  This means, for
instance, that the <kbd>C-f</kbd> (<code>forward-char</code>) command can put point
at what appears to be the end of the line, but what is in reality the
middle of some concealed line.  
</p>
<p>  <em>Be careful when editing the diary entries!</em>  Inserting
additional lines or adding/deleting characters in the middle of a
visible line cannot cause problems, but editing at the end of a line may
not do what you expect.  Deleting a line may delete other invisible
entries that follow it.  Before editing the diary, it is best to display
the entire file with <kbd>s</kbd> (<code>show-all-diary-entries</code>).
</p>
<hr>
<a name="Date-Formats"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Format-of-Diary-File" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#From-Other-Calendar" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Adding-to-Diary" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Date-Formats-1"></a>
<h3 class="subsection">26.5.5 Date Formats</h3>

<p>  Here are some sample diary entries, illustrating different ways of
formatting a date.  The examples all show dates in American order
(month, day, year), but Calendar mode supports European order (day,
month, year) as an option.
</p>
<div class="example">
<pre class="example">4/20/93  Switch-over to new tabulation system
apr. 25  Start tabulating annual results
4/30  Results for April are due
*/25  Monthly cycle finishes
Friday  Don't leave without backing up files
</pre></div>

<p>  The first entry appears only once, on April 20, 1993.  The second and
third appear every year on the specified dates, and the fourth uses a
wildcard (asterisk) for the month, so it appears on the 25th of every
month.  The final entry appears every week on Friday.
</p>
<p>  You can use just numbers to express a date, as in
&lsquo;<samp><var>month</var>/<var>day</var></samp>&rsquo; or &lsquo;<samp><var>month</var>/<var>day</var>/<var>year</var></samp>&rsquo;.
This must be followed by a nondigit.  In the date itself, <var>month</var>
and <var>day</var> are numbers of one or two digits.  The optional <var>year</var>
is also a number, and may be abbreviated to the last two digits; that
is, you can use &lsquo;<samp>11/12/1989</samp>&rsquo; or &lsquo;<samp>11/12/89</samp>&rsquo;.
</p>
<p>  Dates can also have the form &lsquo;<samp><var>monthname</var> <var>day</var></samp>&rsquo; or
&lsquo;<samp><var>monthname</var> <var>day</var>, <var>year</var></samp>&rsquo;, where the month&rsquo;s name can
be spelled in full or abbreviated to three characters (with or without a
period).  Case is not significant.
</p>
<p>  A date may be <em>generic</em>; that is, partially unspecified.  Then the
entry applies to all dates that match the specification.  If the date
does not contain a year, it is generic and applies to any year.
Alternatively, <var>month</var>, <var>day</var>, or <var>year</var> can be a &lsquo;<samp>*</samp>&rsquo;;
this matches any month, day, or year, respectively.  Thus, a diary entry
&lsquo;<samp>3/*/*</samp>&rsquo; matches any day in March of any year; so does &lsquo;<samp>march
*</samp>&rsquo;.
</p>
<a name="index-european_002dcalendar_002dstyle"></a>
<a name="index-european_002dcalendar"></a>
<a name="index-american_002dcalendar"></a>
<p>  If you prefer the European style of writing dates&mdash;in which the day
comes before the month&mdash;type <kbd>M-x european-calendar</kbd> while in the
calendar, or set the variable <code>european-calendar-style</code> to <code>t</code>
<em>before</em> using any calendar or diary command.  This mode interprets
all dates in the diary in the European manner, and also uses European
style for displaying diary dates.  (Note that there is no comma after
the <var>monthname</var> in the European style.)  To go back to the (default)
American style of writing dates, type <kbd>M-x american-calendar</kbd>.
</p> 
<p>  You can use the name of a day of the week as a generic date which
applies to any date falling on that day of the week.  You can abbreviate
the day of the week to three letters (with or without a period) or spell
it in full; case is not significant.
</p>
<hr>
<a name="Adding-to-Diary"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Date-Formats" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#From-Other-Calendar" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Diary-Entries" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Commands-to-Add-to-the-Diary"></a>
<h3 class="subsection">26.5.6 Commands to Add to the Diary</h3>

<p>  While in the calendar, there are several commands to create diary
entries:
</p>
<dl compact="compact">
<dt><kbd>i d</kbd></dt>
<dd><p>Add a diary entry for the selected date (<code>insert-diary-entry</code>).
</p></dd>
<dt><kbd>i w</kbd></dt>
<dd><p>Add a diary entry for the selected day of the week (<code>insert-weekly-diary-entry</code>).
</p></dd>
<dt><kbd>i m</kbd></dt>
<dd><p>Add a diary entry for the selected day of the month (<code>insert-monthly-diary-entry</code>).
</p></dd>
<dt><kbd>i y</kbd></dt>
<dd><p>Add a diary entry for the selected day of the year (<code>insert-yearly-diary-entry</code>).
</p></dd>
</dl>

<a name="index-i-d-_0028Calendar-mode_0029"></a>
<a name="index-insert_002ddiary_002dentry"></a>
<p>  You can make a diary entry for a specific date by selecting that date
in the calendar window and typing the <kbd>i d</kbd> command.  This command
displays the end of your diary file in another window and inserts the
date; you can then type the rest of the diary entry.
</p>
<a name="index-i-w-_0028Calendar-mode_0029"></a>
<a name="index-insert_002dweekly_002ddiary_002dentry"></a>
<a name="index-i-m-_0028Calendar-mode_0029"></a>
<a name="index-insert_002dmonthly_002ddiary_002dentry"></a>
<a name="index-i-y-_0028Calendar-mode_0029"></a>
<a name="index-insert_002dyearly_002ddiary_002dentry"></a>
<p>  If you want to make a diary entry that applies to a specific day of
the week, select that day of the week (any occurrence will do) and type
<kbd>i w</kbd>.  This inserts the day-of-week as a generic date; you can then
type the rest of the diary entry.  You can make a monthly diary entry in
the same fashion.  Select the day of the month, use the <kbd>i m</kbd>
command, and type rest of the entry.  Similarly, you can insert a yearly
diary entry with the <kbd>i y</kbd> command.
</p>
<p>  All of the above commands make marking diary entries by default.  To
make a nonmarking diary entry, give a numeric argument to the command.
For example, <kbd>C-u i w</kbd> makes a nonmarking weekly diary entry.
</p>
<p>  When you modify the diary file, be sure to save the file before
exiting Emacs.
</p> 
<hr>
<a name="Special-Diary-Entries"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Adding-to-Diary" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#From-Other-Calendar" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Customization" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Special-Diary-Entries-1"></a>
<h3 class="subsection">26.5.7 Special Diary Entries</h3>

<p>  In addition to entries based on calendar dates, the diary file can
contain <em>sexp entries</em> for regular events such as anniversaries.
These entries are based on Lisp expressions (sexps) that Emacs evaluates
as it scans the diary file.  Instead of a date, a sexp entry contains
&lsquo;<samp>%%</samp>&rsquo; followed by a Lisp expression which must begin and end with
parentheses.  The Lisp expression determines which dates the entry
applies to.
</p>
<p>  Calendar mode provides commands to insert certain commonly used
sexp entries:
</p>
<dl compact="compact">
<dt><kbd>i a</kbd></dt>
<dd><p>Add an anniversary diary entry for the selected date 
(<code>insert-anniversary-diary-entry</code>).
</p></dd>
<dt><kbd>i b</kbd></dt>
<dd><p>Add a block diary entry for the current region 
(<code>insert-block-diary-entry</code>).
</p></dd>
<dt><kbd>i c</kbd></dt>
<dd><p>Add a cyclic diary entry starting at the date 
(<code>insert-cyclic-diary-entry</code>).
</p></dd>
</dl>

<a name="index-i-a-_0028Calendar-mode_0029"></a>
<a name="index-insert_002danniversary_002ddiary_002dentry"></a>
<p>  If you want to make a diary entry that applies to the anniversary of a
specific date, move point to that date and use the <kbd>i a</kbd> command.
This displays the end of your diary file in another window and inserts
the anniversary description; you can then type the rest of the diary
entry. The entry looks like this:
</p>
<a name="index-diary_002danniversary"></a>
<p>  The effect of <kbd>i a</kbd> is to add a <code>diary-anniversary</code> sexp to your
diary file.  You can also add one manually, for instance:
</p>
<div class="example">
<pre class="example">%%(diary-anniversary 10 31 1948) Arthur's birthday
</pre></div>

<p>This entry applies to October 31 in any year after 1948; &lsquo;<samp>10 31
1948</samp>&rsquo; specifies the date.  (If you are using the European calendar
style, the month and day are interchanged.)  The reason this expression
requires a beginning year is that advanced diary functions can use it to
calculate the number of elapsed years.
</p>
<p>  A <em>block</em> diary entry applies to a specified range of consecutive
dates.  Here is a block diary entry that applies to all dates from June
24, 1990 through July 10, 1990:
</p>
<a name="index-diary_002dblock"></a>
<div class="example">
<pre class="example">%%(diary-block 6 24 1990 7 10 1990) Vacation
</pre></div>

<p>The &lsquo;<samp>6 24 1990</samp>&rsquo; indicates the starting date and the &lsquo;<samp>7 10 1990</samp>&rsquo;
indicates the stopping date.  (Again, if you are using the European calendar
style, the month and day are interchanged.)
</p>
<a name="index-i-b-_0028Calendar-mode_0029"></a>
<a name="index-insert_002dblock_002ddiary_002dentry"></a>
<p>  To insert a block entry, place point and the mark on the two
dates that begin and end the range, and type <kbd>i b</kbd>.  This command
displays the end of your diary file in another window and inserts the
block description; you can then type the diary entry.
</p>
<a name="index-i-c-_0028Calendar-mode_0029"></a>
<a name="index-insert_002dcyclic_002ddiary_002dentry"></a>
<p>   <em>Cyclic</em> diary entries repeat after a fixed interval of days.  To
create one, select the starting date and use the <kbd>i c</kbd> command.  The
command prompts for the length of interval, then inserts the entry,
which looks like this:
</p>
<a name="index-diary_002dcyclic"></a>
<div class="example">
<pre class="example">%%(diary-cyclic 50 3 1 1990) Renew medication
</pre></div>

<p>This entry applies to March 1, 1990 and every 50th day following;
&lsquo;<samp>3 1 1990</samp>&rsquo; specifies the starting date.  (If you are using the
European calendar style, the month and day are interchanged.)
</p>
<p>  All three of these commands make marking diary entries.  To insert a
nonmarking entry, give a numeric argument to the command.  For example,
<kbd>C-u i a</kbd> makes a nonmarking anniversary diary entry.
</p>
<p>  Marking sexp diary entries in the calendar is <em>extremely</em>
time-consuming, since every date visible in the calendar window must be
individually checked.  So it&rsquo;s a good idea to make sexp diary entries
nonmarking (with &lsquo;<samp>&amp;</samp>&rsquo;) when possible.
</p>
<p>  Another sophisticated kind of sexp entry, a <em>floating</em> diary entry,
specifies a regularly occurring event by offsets specified in days,
weeks, and months.  It is comparable to a crontab entry interpreted by
the <code>cron</code> utility.  Here is a nonmarking, floating diary entry
that applies to the last Thursday in November:
</p> 
<a name="index-diary_002dfloat"></a>
<div class="example">
<pre class="example">&amp;%%(diary-float 11 4 -1) American Thanksgiving
</pre></div>

<p>The 11 specifies November (the eleventh month), the 4 specifies Thursday
(the fourth day of the week, where Sunday is numbered zero), and the
-1 specifies &ldquo;last&rdquo; (1 would mean &ldquo;first&rdquo;, 2 would mean
&ldquo;second&rdquo;, -2 would mean &ldquo;second-to-last&rdquo;, and so on).  The
month can be a single month or a list of months.  Thus you could change
the 11 above to &lsquo;<samp>'(1 2 3)</samp>&rsquo; and have the entry apply to the last
Thursday of January, February, and March.  If the month is <code>t</code>, the
entry applies to all months of the year.
</p>
<p>  The sexp feature of the diary allows you to specify diary entries
based on any Emacs Lisp expression.  You can use the library of built-in
functions or you can write your own functions.  The built-in functions
include the ones shown in this section, plus a few others (see section <a href="#Sexp-Diary-Entries">Sexp Entries and the Fancy Diary Display</a>).
</p>
<p>  The generality of sexps lets you specify any diary entry that you can
describe algorithmically.  Suppose you get paid on the 21st of the month
if it is a weekday, and to the Friday before if the 21st is on a
weekend.  The diary entry
</p>
<div class="example">
<pre class="example">&amp;%%(let ((dayname (calendar-day-of-week date))
         (day (car (cdr date))))
      (or (and (= day 21) (memq dayname '(1 2 3 4 5)))
          (and (memq day '(19 20)) (= dayname 5)))
         ) Pay check deposited
</pre></div>

<p>to just those dates.  This example illustrates how the sexp can depend
on the variable <code>date</code>; this variable is a list (<var>month</var>
<var>day</var> <var>year</var>) that gives the Gregorian date for which the diary
entries are being found.  If the value of the sexp is <code>t</code>, the
entry applies to that date.  If the sexp evaluates to <code>nil</code>, the
entry does <em>not</em> apply to that date.
</p>

<hr>
<a name="Calendar-Customization"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Diary-Entries" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#From-Other-Calendar" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Customizing" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Customizing-the-Calendar-and-Diary"></a>
<h3 class="subsection">26.5.8 Customizing the Calendar and Diary</h3>

<p>  There are many customizations that you can use to make the calendar and
diary suit your personal tastes.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Calendar-Customizing">26.5.8.1 Customizing the Calendar</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Defaults you can set.
</td></tr>
<tr><td align="left" valign="top"><a href="#Holiday-Customizing">26.5.8.2 Customizing the Holidays</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Defining your own holidays.
</td></tr>
<tr><td align="left" valign="top"><a href="#Date-Display-Format">26.5.8.3 Date Display Format</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Changing the format.
</td></tr>
<tr><td align="left" valign="top"><a href="#Time-Display-Format">26.5.8.4 Time Display Format</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Changing the format.
</td></tr>
<tr><td align="left" valign="top"><a href="#Daylight-Savings">26.5.8.5 Daylight Savings Time</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Changing the default.
</td></tr>
<tr><td align="left" valign="top"><a href="#Diary-Customizing">26.5.8.6 Customizing the Diary</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Defaults you can set.
</td></tr>
<tr><td align="left" valign="top"><a href="#Hebrew_002fIslamic-Entries">26.5.8.7 Hebrew- and Islamic-Date Diary Entries</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> How to obtain them.
</td></tr>
<tr><td align="left" valign="top"><a href="#Fancy-Diary-Display">26.5.8.8 Fancy Diary Display</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Enhancing the diary display, sorting entries.
</td></tr>
<tr><td align="left" valign="top"><a href="#Included-Diary-Files">26.5.8.9 Included Diary Files</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Sharing a common diary file.
</td></tr>
<tr><td align="left" valign="top"><a href="#Sexp-Diary-Entries">26.5.8.10 Sexp Entries and the Fancy Diary Display</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Fancy things you can do.
</td></tr>
<tr><td align="left" valign="top"><a href="#Appt-Customizing">26.5.8.11 Customizing Appointment Reminders</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">	   Customizing appointment reminders.
</td></tr>
</table>

<hr>
<a name="Calendar-Customizing"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Customization" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Customization" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Holiday-Customizing" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Customizing-the-Calendar"></a>
<h4 class="subsubsection">26.5.8.1 Customizing the Calendar</h4>
<a name="index-view_002ddiary_002dentries_002dinitially"></a>

<p>  If you set the variable <code>view-diary-entries-initially</code> to
<code>t</code>, calling up the calendar automatically displays the diary
entries for the current date as well.  The diary dates appear only if
the current date is visible.  If you add both of the following lines to
your init file:
</p>
<div class="example">
<pre class="example">(setq view-diary-entries-initially t)
(calendar)
</pre></div>

<p>this displays both the calendar and diary windows whenever you start
Emacs.  See section <a href="xemacs_30.html#Init-File">The Init File</a>.
</p>
<a name="index-view_002dcalendar_002dholidays_002dinitially"></a>
<p>  Similarly, if you set the variable
<code>view-calendar-holidays-initially</code> to <code>t</code>, entering the
calendar automatically displays a list of holidays for the current
three-month period.  The holiday list appears in a separate
window.
</p> 
<a name="index-mark_002ddiary_002dentries_002din_002dcalendar"></a>
<p>  You can set the variable <code>mark-diary-entries-in-calendar</code> to
<code>t</code> in order to mark any dates with diary entries.  This takes
effect whenever the calendar window contents are recomputed.  There are
two ways of marking these dates: by changing the face (see section <a href="xemacs_30.html#Faces">Faces</a>),
if the display supports that, or by placing a plus sign (&lsquo;<samp>+</samp>&rsquo;)
beside the date otherwise.
</p>
<a name="index-mark_002dholidays_002din_002dcalendar"></a>
<p>  Similarly, setting the variable <code>mark-holidays-in-calendar</code> to
<code>t</code> marks holiday dates, either with a change of face or with an
asterisk (&lsquo;<samp>*</samp>&rsquo;).
</p>
<a name="index-calendar_002dholiday_002dmarker"></a>
<a name="index-diary_002dentry_002dmarker"></a>
<p>  The variable <code>calendar-holiday-marker</code> specifies how to mark a
date as being a holiday.  Its value may be a character to insert next to
the date, or a face name to use for displaying the date.  Likewise, the
variable <code>diary-entry-marker</code> specifies how to mark a date that has
diary entries.  The calendar creates faces named <code>holiday-face</code> and
<code>diary-face</code> for these purposes; those symbols are the default
values of these variables, when Emacs supports multiple faces on your
terminal.
</p>
<a name="index-calendar_002dload_002dhook"></a>
<p>  The variable <code>calendar-load-hook</code> is a normal hook run when the
calendar package is first loaded (before actually starting to display
the calendar).
</p>
<a name="index-initial_002dcalendar_002dwindow_002dhook"></a>
<p>  Starting the calendar runs the normal hook
<code>initial-calendar-window-hook</code>.  Recomputation of the calendar
display does not run this hook.  But if you leave the calendar with the
<kbd>q</kbd> command and reenter it, the hook runs again.
</p>
<a name="index-today_002dvisible_002dcalendar_002dhook"></a>
<p>  The variable <code>today-visible-calendar-hook</code> is a normal hook run
after the calendar buffer has been prepared with the calendar when the
current date is visible in the window.  One use of this hook is to
replace today&rsquo;s date with asterisks; to do that, use the hook function
<code>calendar-star-date</code>.
</p>
<a name="index-calendar_002dstar_002ddate"></a>
<div class="example">
<pre class="example">(add-hook 'today-visible-calendar-hook 'calendar-star-date)
</pre></div>

<p>Another standard hook function marks the current date, either by
changing its face or by adding an asterisk.  Here&rsquo;s how to use it:
</p>
<a name="index-calendar_002dmark_002dtoday"></a>
<div class="example">
<pre class="example">(add-hook 'today-visible-calendar-hook 'calendar-mark-today)
</pre></div>

<a name="index-calendar_002dtoday_002dmarker"></a>
<p>The variable <code>calendar-today-marker</code> specifies how to mark today&rsquo;s
date.  Its value should be a character to insert next to the date or a
face name to use for displaying the date.  A face named
<code>calendar-today-face</code> is provided for this purpose; that symbol is
the default for this variable when Emacs supports multiple faces on your
terminal.
</p>
<a name="index-today_002dinvisible_002dcalendar_002dhook"></a>
<p>  A similar normal hook, <code>today-invisible-calendar-hook</code> is run if
the current date is <em>not</em> visible in the window.
</p>
<hr>
<a name="Holiday-Customizing"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Customizing" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Customization" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Date-Display-Format" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Customizing-the-Holidays"></a>
<h4 class="subsubsection">26.5.8.2 Customizing the Holidays</h4>

<a name="index-calendar_002dholidays"></a>
<a name="index-christian_002dholidays"></a>
<a name="index-hebrew_002dholidays"></a>
<a name="index-islamic_002dholidays"></a>
<p>  Emacs knows about holidays defined by entries on one of several lists.
You can customize these lists of holidays to your own needs, adding or
deleting holidays.  The lists of holidays that Emacs uses are for
general holidays (<code>general-holidays</code>), local holidays
(<code>local-holidays</code>), Christian holidays (<code>christian-holidays</code>),
Hebrew (Jewish) holidays (<code>hebrew-holidays</code>), Islamic (Moslem)
holidays (<code>islamic-holidays</code>), and other holidays
(<code>other-holidays</code>).
</p>
<a name="index-general_002dholidays"></a>
<p>  The general holidays are, by default, holidays common throughout the
United States.  To eliminate these holidays, set <code>general-holidays</code>
to <code>nil</code>.
</p>
<a name="index-local_002dholidays"></a>
<p>  There are no default local holidays (but sites may supply some).  You
can set the variable <code>local-holidays</code> to any list of holidays, as
described below.
</p>
<a name="index-all_002dchristian_002dcalendar_002dholidays"></a>
<a name="index-all_002dhebrew_002dcalendar_002dholidays"></a>
<a name="index-all_002dislamic_002dcalendar_002dholidays"></a>
<p>  By default, Emacs does not include all the holidays of the religions
that it knows, only those commonly found in secular calendars.  For a
more extensive collection of religious holidays, you can set any (or
all) of the variables <code>all-christian-calendar-holidays</code>,
<code>all-hebrew-calendar-holidays</code>, or
<code>all-islamic-calendar-holidays</code> to <code>t</code>.  If you want to
eliminate the religious holidays, set any or all of the corresponding
variables <code>christian-holidays</code>, <code>hebrew-holidays</code>, and
<code>islamic-holidays</code> to <code>nil</code>.
</p>
<a name="index-other_002dholidays"></a>
<p>  You can set the variable <code>other-holidays</code> to any list of
holidays.  This list, normally empty, is intended for individual use.
</p>
<a name="index-holiday-forms"></a>
<p>  Each of the lists (<code>general-holidays</code>, <code>local-holidays</code>,
<code>christian-holidays</code>, <code>hebrew-holidays</code>,
<code>islamic-holidays</code>, and <code>other-holidays</code>) is a list of
<em>holiday forms</em>, each holiday form describing a holiday (or
sometimes a list of holidays).
</p>
<p>  Here is a table of the possible kinds of holiday form.  Day numbers
and month numbers count starting from 1, but &ldquo;dayname&rdquo; numbers
count Sunday as 0.  The element <var>string</var> is always the
name of the holiday, as a string.
</p>
<dl compact="compact">
<dt><code>(holiday-fixed <var>month</var> <var>day</var> <var>string</var>)</code></dt>
<dd><p>A fixed date on the Gregorian calendar.  <var>month</var> and <var>day</var> are
numbers, <var>string</var> is the name of the holiday.
</p>
</dd>
<dt><code>(holiday-float <var>month</var> <var>dayname</var> <var>k</var> <var>string</var>)</code></dt>
<dd><p>The <var>k</var>th <var>dayname</var> in <var>month</var> on the Gregorian calendar
(<var>dayname</var>=0 for Sunday, and so on); negative <var>k</var> means count back
from the end of the month.  <var>string</var> is the name of the holiday.
</p>
</dd>
<dt><code>(holiday-hebrew <var>month</var> <var>day</var> <var>string</var>)</code></dt>
<dd><p>A fixed date on the Hebrew calendar.  <var>month</var> and <var>day</var> are
numbers, <var>string</var> is the name of the holiday.
</p>
</dd>
<dt><code>(holiday-islamic <var>month</var> <var>day</var> <var>string</var>)</code></dt>
<dd><p>A fixed date on the Islamic calendar.  <var>month</var> and <var>day</var> are
numbers, <var>string</var> is the name of the holiday.
</p>
</dd>
<dt><code>(holiday-julian <var>month</var> <var>day</var> <var>string</var>)</code></dt>
<dd><p>A fixed date on the Julian calendar.  <var>month</var> and <var>day</var> are
numbers, <var>string</var> is the name of the holiday.
</p>
</dd>
<dt><code>(holiday-sexp <var>sexp</var> <var>string</var>)</code></dt>
<dd><p>A date calculated by the Lisp expression <var>sexp</var>.  The expression
should use the variable <code>year</code> to compute and return the date of a
holiday, or <code>nil</code> if the holiday doesn&rsquo;t happen this year.  The
value of <var>sexp</var> must represent the date as a list of the form
<code>(<var>month</var> <var>day</var> <var>year</var>)</code>.  <var>string</var> is the name of
the holiday.
</p>
</dd>
<dt><code>(if <var>condition</var> <var>holiday-form</var> &amp;optional <var>holiday-form</var>)</code></dt>
<dd><p>A holiday that happens only if <var>condition</var> is true.
</p>
</dd>
<dt><code>(<var>function</var> <span class="roman">[</span><var>args</var><span class="roman">]</span>)</code></dt>
<dd><p>A list of dates calculated by the function <var>function</var>, called with
arguments <var>args</var>.
</p></dd>
</dl>

<p>  For example, suppose you want to add Bastille Day, celebrated in
France on July 14.  You can do this by adding the following line
to your init file:
</p>
<div class="smallexample">
<pre class="smallexample">(setq other-holidays '((holiday-fixed 7 14 &quot;Bastille Day&quot;)))
</pre></div>

<p>See section <a href="xemacs_30.html#Init-File">The Init File</a>.
</p>
<p>The holiday form <code>(holiday-fixed 7 14 &quot;Bastille Day&quot;)</code> specifies the
fourteenth day of the seventh month (July).
</p>
<p>  Many holidays occur on a specific day of the week, at a specific time
of month.  Here is a holiday form describing Hurricane Supplication Day,
celebrated in the Virgin Islands on the fourth Monday in August:
</p>
<div class="smallexample">
<pre class="smallexample">(holiday-float 8 1 4 &quot;Hurricane Supplication Day&quot;)
</pre></div>

<p>Here the 8 specifies August, the 1 specifies Monday (Sunday is 0,
Tuesday is 2, and so on), and the 4 specifies the fourth occurrence in
the month (1 specifies the first occurrence, 2 the second occurrence,
-1 the last occurrence, -2 the second-to-last occurrence, and
so on).
</p>
<p>  You can specify holidays that occur on fixed days of the Hebrew,
Islamic, and Julian calendars too.  For example,
</p>
<div class="smallexample">
<pre class="smallexample">(setq other-holidays
      '((holiday-hebrew 10 2 &quot;Last day of Hanukkah&quot;)
        (holiday-islamic 3 12 &quot;Mohammed's Birthday&quot;)
        (holiday-julian 4 2 &quot;Jefferson's Birthday&quot;)))
</pre></div>

<p>adds the last day of Hanukkah (since the Hebrew months are numbered with
1 starting from Nisan), the Islamic feast celebrating Mohammed&rsquo;s
birthday (since the Islamic months are numbered from 1 starting with
Muharram), and Thomas Jefferson&rsquo;s birthday, which is 2 April 1743 on the
Julian calendar.
</p>
<p>  To include a holiday conditionally, use either Emacs Lisp&rsquo;s <code>if</code> or the
<code>holiday-sexp</code> form.  For example, American presidential elections
occur on the first Tuesday after the first Monday in November of years
divisible by 4:
</p>
<div class="smallexample">
<pre class="smallexample">(holiday-sexp (if (= 0 (% year 4))
                   (calendar-gregorian-from-absolute
                 (1+ (calendar-dayname-on-or-before
                       1 (+ 6 (calendar-absolute-from-gregorian
                                (list 11 1 year))))))
              &quot;US Presidential Election&quot;))
</pre></div>

<p>or
</p>
<div class="smallexample">
<pre class="smallexample">(if (= 0 (% displayed-year 4))
    (fixed 11
           (extract-calendar-day
             (calendar-gregorian-from-absolute
               (1+ (calendar-dayname-on-or-before
                     1 (+ 6 (calendar-absolute-from-gregorian
                              (list 11 1 displayed-year)))))))
           &quot;US Presidential Election&quot;))
</pre></div>

<p>  Some holidays just don&rsquo;t fit into any of these forms because special
calculations are involved in their determination.  In such cases you
must write a Lisp function to do the calculation.  To include eclipses,
for example, add <code>(eclipses)</code> to <code>other-holidays</code>
and write an Emacs Lisp function <code>eclipses</code> that returns a
(possibly empty) list of the relevant Gregorian dates among the range
visible in the calendar window, with descriptive strings, like this:
</p>
<div class="smallexample">
<pre class="smallexample">(((6 27 1991) &quot;Lunar Eclipse&quot;) ((7 11 1991) &quot;Solar Eclipse&quot;) ... )
</pre></div>

<hr>
<a name="Date-Display-Format"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Holiday-Customizing" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Customization" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Time-Display-Format" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Date-Display-Format-1"></a>
<h4 class="subsubsection">26.5.8.3 Date Display Format</h4>
<a name="index-calendar_002ddate_002ddisplay_002dform"></a>

<p>  You can customize the manner of displaying dates in the diary, in mode
lines, and in messages by setting <code>calendar-date-display-form</code>.
This variable holds a list of expressions that can involve the variables
<code>month</code>, <code>day</code>, and <code>year</code>, which are all numbers in
string form, and <code>monthname</code> and <code>dayname</code>, which are both
alphabetic strings.  In the American style, the default value of this
list is as follows:
</p>
<div class="smallexample">
<pre class="smallexample">((if dayname (concat dayname &quot;, &quot;)) monthname &quot; &quot; day &quot;, &quot; year)
</pre></div>

<p>while in the European style this value is the default:
</p>
<div class="smallexample">
<pre class="smallexample">((if dayname (concat dayname &quot;, &quot;)) day &quot; &quot; monthname &quot; &quot; year)
</pre></div>

<p>+The ISO standard date representation is this:
</p>
<div class="smallexample">
<pre class="smallexample">(year &quot;-&quot; month &quot;-&quot; day)
</pre></div>

<p>This specifies a typical American format:
</p>
<div class="smallexample">
<pre class="smallexample">(month &quot;/&quot; day &quot;/&quot; (substring year -2))
</pre></div>

<hr>
<a name="Time-Display-Format"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Date-Display-Format" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Customization" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Daylight-Savings" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Time-Display-Format-1"></a>
<h4 class="subsubsection">26.5.8.4 Time Display Format</h4>
<a name="index-calendar_002dtime_002ddisplay_002dform"></a>

<p>  The calendar and diary by default display times of day in the
conventional American style with the hours from 1 through 12, minutes,
and either &lsquo;<samp>am</samp>&rsquo; or &lsquo;<samp>pm</samp>&rsquo;.  If you prefer the European style,
also known in the US as military, in which the hours go from 00 to 23,
you can alter the variable <code>calendar-time-display-form</code>.  This
variable is a list of expressions that can involve the variables
<code>12-hours</code>, <code>24-hours</code>, and <code>minutes</code>, which are all
numbers in string form, and <code>am-pm</code> and <code>time-zone</code>, which are
both alphabetic strings.  The default value of
<code>calendar-time-display-form</code> is as follows:
</p>
<div class="smallexample">
<pre class="smallexample">(12-hours &quot;:&quot; minutes am-pm
          (if time-zone &quot; (&quot;) time-zone (if time-zone &quot;)&quot;))
</pre></div>

<p>Here is a value that provides European style times:
</p>
<div class="smallexample">
<pre class="smallexample">(24-hours &quot;:&quot; minutes
          (if time-zone &quot; (&quot;) time-zone (if time-zone &quot;)&quot;))
</pre></div>

<p>gives military-style times like &lsquo;<samp>21:07 (UT)</samp>&rsquo; if time zone names are
defined, and times like &lsquo;<samp>21:07</samp>&rsquo; if they are not.
</p>
<hr>
<a name="Daylight-Savings"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Time-Display-Format" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Customization" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Diary-Customizing" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Daylight-Savings-Time"></a>
<h4 class="subsubsection">26.5.8.5 Daylight Savings Time</h4>
<a name="index-daylight-savings-time"></a>

<p>  Emacs understands the difference between standard time and daylight
savings time&mdash;the times given for sunrise, sunset, solstices,
equinoxes, and the phases of the moon take that into account.  The rules
for daylight savings time vary from place to place and have also varied
historically from year to year.  To do the job properly, Emacs needs to
know which rules to use.
</p>
<p>  Some operating systems keep track of the rules that apply to the place
where you are; on these systems, Emacs gets the information it needs
from the system automatically.  If some or all of this information is
missing, Emacs fills in the gaps with the rules currently used in
Cambridge, Massachusetts.  If the resulting rules are not what you want,
you can tell Emacs the rules to use by setting certain variables.
</p>
<a name="index-calendar_002ddaylight_002dsavings_002dstarts"></a>
<a name="index-calendar_002ddaylight_002dsavings_002dends"></a>
<p>  If the default choice of rules is not appropriate for your location,
you can tell Emacs the rules to use by setting the variables
<code>calendar-daylight-savings-starts</code> and
<code>calendar-daylight-savings-ends</code>.  Their values should be Lisp
expressions that refer to the variable <code>year</code>, and evaluate to the
Gregorian date on which daylight savings time starts or (respectively)
ends, in the form of a list <code>(<var>month</var> <var>day</var> <var>year</var>)</code>.
The values should be <code>nil</code> if your area does not use daylight
savings time.
</p>
<p>  Emacs uses these expressions to determine the starting date of
daylight savings time for the holiday list  and for correcting times of
day in the solar and lunar calculations.
</p> 
<p>  The values for Cambridge, Massachusetts are as follows:
</p>
<div class="example">
<pre class="example">(calendar-nth-named-day 1 0 4 year)
(calendar-nth-named-day -1 0 10 year)
</pre></div>

<p>That is, the first 0th day (Sunday) of the fourth month (April) in
the year specified by <code>year</code>, and the last Sunday of the tenth month
(October) of that year.  If daylight savings time were
changed to start on October 1, you would set
<code>calendar-daylight-savings-starts</code> to this:
</p>
<div class="example">
<pre class="example">(list 10 1 year)
</pre></div>

<p>  For a more complex example, suppose daylight savings time begins on
the first of Nisan on the Hebrew calendar.  You should set
<code>calendar-daylight-savings-starts</code> to this value:
</p>
<div class="example">
<pre class="example">(calendar-gregorian-from-absolute
  (calendar-absolute-from-hebrew
    (list 1 1 (+ year 3760))))
</pre></div>

<p>because Nisan is the first month in the Hebrew calendar and the Hebrew
year differs from the Gregorian year by 3760 at Nisan.
</p>
<p>  If there is no daylight savings time at your location, or if you want
all times in standard time, set <code>calendar-daylight-savings-starts</code>
and <code>calendar-daylight-savings-ends</code> to <code>nil</code>.
</p>
<a name="index-calendar_002ddaylight_002dtime_002doffset"></a>
<p>  The variable <code>calendar-daylight-time-offset</code> specifies the
difference between daylight savings time and standard time, measured in
minutes.  The value for Cambridge, Massachusetts is 60.
</p>
<a name="index-calendar_002ddaylight_002dsavings_002dends_002dtime"></a>
<p>  The two variables <code>calendar-daylight-savings-starts-time</code> and
<code>calendar-daylight-savings-ends-time</code> specify the number of minutes
after midnight local time when the transition to and from daylight
savings time should occur.  For Cambridge, Massachusetts both variables&rsquo;
values are 120.
</p> 
<hr>
<a name="Diary-Customizing"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Daylight-Savings" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Customization" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Hebrew_002fIslamic-Entries" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Customizing-the-Diary"></a>
<h4 class="subsubsection">26.5.8.6 Customizing the Diary</h4>

<a name="index-holidays_002din_002ddiary_002dbuffer"></a>
<p>  Ordinarily, the mode line of the diary buffer window indicates any
holidays that fall on the date of the diary entries.  The process of
checking for holidays can take several seconds, so including holiday
information delays the display of the diary buffer noticeably.  If you&rsquo;d
prefer to have a faster display of the diary buffer but without the
holiday information, set the variable <code>holidays-in-diary-buffer</code> to
<code>nil</code>.
</p>
<a name="index-number_002dof_002ddiary_002dentries"></a>
<p>  The variable <code>number-of-diary-entries</code> controls the number of
days of diary entries to be displayed at one time.  It affects the
initial display when <code>view-diary-entries-initially</code> is <code>t</code>, as
well as the command <kbd>M-x diary</kbd>.  For example, the default value is
1, which says to display only the current day&rsquo;s diary entries.  If the
value is 2, both the current day&rsquo;s and the next day&rsquo;s entries are
displayed.  The value can also be a vector of seven elements: for
example, if the value is <code>[0 2 2 2 2 4 1]</code> then no diary entries
appear on Sunday, the current date&rsquo;s and the next day&rsquo;s diary entries
appear Monday through Thursday, Friday through Monday&rsquo;s entries appear
on Friday, while on Saturday only that day&rsquo;s entries appear.
</p>
<a name="index-print_002ddiary_002dentries_002dhook"></a>
<a name="index-print_002ddiary_002dentries-1"></a>
<p>  The variable <code>print-diary-entries-hook</code> is a normal hook run
after preparation of a temporary buffer containing just the diary
entries currently visible in the diary buffer.  (The other, irrelevant
diary entries are really absent from the temporary buffer; in the diary
buffer, they are merely hidden.)  The default value of this hook does
the printing with the command <code>lpr-buffer</code>.  If you want to use a
different command to do the printing, just change the value of this
hook.  Other uses might include, for example, rearranging the lines into
order by day and time.
</p>
<a name="index-diary_002ddate_002dforms"></a>
<p>  You can customize the form of dates in your diary file, if neither the
standard American nor European styles suits your needs, by setting the
variable <code>diary-date-forms</code>.  This variable is a list of patterns
for recognizing a date.  Each date pattern is a list whose elements may
be regular expressions (see section <a href="xemacs_15.html#Regexps">Syntax of Regular Expressions</a>) or the symbols
<code>month</code>, <code>day</code>, <code>year</code>, <code>monthname</code>, and
<code>dayname</code>.  All these elements serve as patterns that match certain
kinds of text in the diary file.  In order for the date pattern, as a
whole, to match, all of its elements must match consecutively.
</p>
<p>  A regular expression in a date pattern matches in its usual fashion,
using the standard syntax table altered so that &lsquo;<samp>*</samp>&rsquo; is a word
constituent.
</p>
<p>  The symbols <code>month</code>, <code>day</code>, <code>year</code>, <code>monthname</code>,
and <code>dayname</code> match the month number, day number, year number,
month name, and day name of the date being considered.  The symbols that
match numbers allow leading zeros; those that match names allow
three-letter abbreviations and capitalization.  All the symbols can
match &lsquo;<samp>*</samp>&rsquo;; since &lsquo;<samp>*</samp>&rsquo; in a diary entry means &ldquo;any day&rdquo;, &ldquo;any
month&rdquo;, and so on, it should match regardless of the date being
considered.
</p>
<p>  The default value of <code>diary-date-forms</code> in the American style is
this:
</p>
<div class="example">
<pre class="example">((month &quot;/&quot; day &quot;[^/0-9]&quot;)
 (month &quot;/&quot; day &quot;/&quot; year &quot;[^0-9]&quot;)
 (monthname &quot; *&quot; day &quot;[^,0-9]&quot;)
 (monthname &quot; *&quot; day &quot;, *&quot; year &quot;[^0-9]&quot;)
 (dayname &quot;\\W&quot;))
</pre></div>

<p>Emacs matches of the diary entries with the date forms is done with the
standard syntax table from Fundamental mode
(see <a href="../lispref/Syntax-Tables.html#Syntax-Tables">(lispref)Syntax Tables</a> section &lsquo;Syntax Tables&rsquo; in <cite>XEmacs Lisp Reference Manual</cite>),
but with the &lsquo;<samp>*</samp>&rsquo; changed so that it is a word constituent.
</p>
<p>  The date patterns in the list must be <em>mutually exclusive</em> and
must not match any portion of the diary entry itself, just the date and
one character of whitespace.  If, to be mutually exclusive, the pattern
must match a portion of the diary entry text&mdash;beyond the whitespace
that ends the date&mdash;then the first element of the date pattern
<em>must</em> be <code>backup</code>.  This causes the date recognizer to back
up to the beginning of the current word of the diary entry, after
finishing the match.  Even if you use <code>backup</code>, the date pattern
must absolutely not match more than a portion of the first word of the
diary entry.  The default value of <code>diary-date-forms</code> in the
European style is this list:
</p>
<div class="example">
<pre class="example">((day &quot;/&quot; month &quot;[^/0-9]&quot;)
 (day &quot;/&quot; month &quot;/&quot; year &quot;[^0-9]&quot;)
 (backup day &quot; *&quot; monthname &quot;\\W+\\&lt;[^*0-9]&quot;)
 (day &quot; *&quot; monthname &quot; *&quot; year &quot;[^0-9]&quot;)
 (dayname &quot;\\W&quot;))
</pre></div>

<p>Notice the use of <code>backup</code> in the third pattern, because it needs
to match part of a word beyond the date itself to distinguish it from
the fourth pattern.
</p> 
<hr>
<a name="Hebrew_002fIslamic-Entries"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Diary-Customizing" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Customization" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Fancy-Diary-Display" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Hebrew_002d-and-Islamic_002dDate-Diary-Entries"></a>
<h4 class="subsubsection">26.5.8.7 Hebrew- and Islamic-Date Diary Entries</h4>

<p>  Your diary file can have entries based on Hebrew or Islamic dates, as
well as entries based on the world-standard Gregorian calendar.
However, because recognition of such entries is time-consuming and most
people don&rsquo;t use them, you must explicitly enable their use.  If you
want the diary to recognize Hebrew-date diary entries, for example, 
you must do this:
</p> 
<a name="index-nongregorian_002ddiary_002dlisting_002dhook"></a>
<a name="index-nongregorian_002ddiary_002dmarking_002dhook"></a>
<a name="index-list_002dhebrew_002ddiary_002dentries"></a>
<a name="index-mark_002dhebrew_002ddiary_002dentries"></a>
<div class="smallexample">
<pre class="smallexample">(add-hook 'nongregorian-diary-listing-hook 'list-hebrew-diary-entries)
(add-hook 'nongregorian-diary-marking-hook 'mark-hebrew-diary-entries)
</pre></div>

<p>If you want Islamic-date entries, do this:
</p>
<a name="index-list_002dislamic_002ddiary_002dentries"></a>
<a name="index-mark_002dislamic_002ddiary_002dentries"></a>
<div class="smallexample">
<pre class="smallexample">(add-hook 'nongregorian-diary-listing-hook 'list-islamic-diary-entries)
(add-hook 'nongregorian-diary-marking-hook 'mark-islamic-diary-entries)
</pre></div>

<p>  Hebrew- and Islamic-date diary entries have the same formats as
Gregorian-date diary entries, except that &lsquo;<samp>H</samp>&rsquo; precedes a Hebrew
date and &lsquo;<samp>I</samp>&rsquo; precedes an Islamic date.  Moreover, because the
Hebrew and Islamic month names are not uniquely specified by the first
three letters, you may not abbreviate them.  For example, a diary entry
for the Hebrew date Heshvan 25 could look like this:
</p>
<div class="smallexample">
<pre class="smallexample">HHeshvan 25 Happy Hebrew birthday!
</pre></div>

<p>and would appear in the diary for any date that corresponds to Heshvan 25
on the Hebrew calendar.  And here is  Islamic-date diary entry  that matches
Dhu al-Qada 25:
</p>
<div class="smallexample">
<pre class="smallexample">IDhu al-Qada 25 Happy Islamic birthday!
</pre></div>

<p>and would appear in the diary for any date that corresponds to Dhu al-Qada 25
on the Islamic calendar.
</p>
<p>  As with Gregorian-date diary entries, Hebrew- and Islamic-date entries
are nonmarking if they are preceded with an ampersand (&lsquo;<samp>&amp;</samp>&rsquo;).
</p>
<p>  Here is a table of commands used in the calendar to create diary entries
that match the selected date and other dates that are similar in the Hebrew
or Islamic calendar:
</p> 
<dl compact="compact">
<dt><kbd>i h d</kbd></dt>
<dd><p>Add a diary entry for the Hebrew date corresponding to the selected date
(<code>insert-hebrew-diary-entry</code>).
</p></dd>
<dt><kbd>i h m</kbd></dt>
<dd><p>Add a diary entry for the day of the Hebrew month corresponding to the
selected date (<code>insert-monthly-hebrew-diary-entry</code>).  This diary
entry matches any date that has the same Hebrew day-within-month as the
selected date.
</p></dd>
<dt><kbd>i h y</kbd></dt>
<dd><p>Add a diary entry for the day of the Hebrew year corresponding to the
selected date (<code>insert-yearly-hebrew-diary-entry</code>).  This diary 
entry matches any date which has the same Hebrew month and day-within-month
as the selected date.
</p></dd>
<dt><kbd>i i d</kbd></dt>
<dd><p>Add a diary entry for the Islamic date corresponding to the selected date
(<code>insert-islamic-diary-entry</code>).
</p></dd>
<dt><kbd>i i m</kbd></dt>
<dd><p>Add a diary entry for the day of the Islamic month corresponding to the
selected date (<code>insert-monthly-islamic-diary-entry</code>).
</p></dd>
<dt><kbd>i i y</kbd></dt>
<dd><p>Add a diary entry for the day of the Islamic year corresponding to the
selected date (<code>insert-yearly-islamic-diary-entry</code>).
</p></dd>
</dl>

<a name="index-insert_002dhebrew_002ddiary_002dentry"></a>
<a name="index-insert_002dmonthly_002dhebrew_002ddiary_002dentry"></a>
<a name="index-insert_002dyearly_002dhebrew_002ddiary_002dentry"></a>
<a name="index-insert_002dislamic_002ddiary_002dentry"></a>
<a name="index-insert_002dmonthly_002dislamic_002ddiary_002dentry"></a>
<a name="index-insert_002dyearly_002dislamic_002ddiary_002dentry"></a>
<p>  These commands work much like the corresponding commands for ordinary
diary entries: they apply to the date that point is on in the calendar
window, and what they do is insert just the date portion of a diary entry
at the end of your diary file.  You must then insert the rest of the 
diary entry.
</p> 
<hr>
<a name="Fancy-Diary-Display"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Hebrew_002fIslamic-Entries" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Customization" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Included-Diary-Files" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Fancy-Diary-Display-1"></a>
<h4 class="subsubsection">26.5.8.8 Fancy Diary Display</h4>
<a name="index-diary_002ddisplay_002dhook"></a>
<a name="index-simple_002ddiary_002ddisplay"></a>

<p>  Diary display works by preparing the diary buffer and then running the
hook <code>diary-display-hook</code>.  The default value of this hook
(<code>simple-diary-display</code>) hides the irrelevant diary entries and
then displays the buffer.  However, if you specify the hook as follows,
</p> 
<a name="index-diary-buffer"></a>
<a name="index-fancy_002ddiary_002ddisplay"></a>
<div class="example">
<pre class="example">(add-hook 'diary-display-hook 'fancy-diary-display)
</pre></div>

<p>this enables fancy diary display.  It displays diary entries and
holidays by copying them into a special buffer that exists only for the
sake of display.  Copying to a separate buffer provides an opportunity
to change the displayed text to make it prettier&mdash;for example, to sort
the entries by the dates they apply to.
</p>
<p>  As with simple diary display, you can print a hard copy of the buffer
with <code>print-diary-entries</code>.  To print a hard copy of a day-by-day
diary for a week by positioning point on Sunday of that week, type
<kbd>7 d</kbd> and then do <kbd>M-x print-diary-entries</kbd>.  As usual, the
inclusion of the holidays slows down the display slightly; you can speed
things up by setting the variable <code>holidays-in-diary-buffer</code> to
<code>nil</code>.
</p>
<a name="index-diary_002dlist_002dinclude_002dblanks"></a>
<p>  Ordinarily, the fancy diary buffer does not show days for which there are
no diary entries, even if that day is a holiday.  If you want such days to be
shown in the fancy diary buffer, set the variable
<code>diary-list-include-blanks</code> to <code>t</code>.
</p>
<a name="index-sorting-diary-entries"></a>
<p>  If you use the fancy diary display, you can use the normal hook
<code>list-diary-entries-hook</code> to sort each day&rsquo;s diary entries by their
time of day.  Add this line to your init file:
</p>
<a name="index-sort_002ddiary_002dentries"></a>
<div class="example">
<pre class="example">(add-hook 'list-diary-entries-hook 'sort-diary-entries t)
</pre></div>

<p>See section <a href="xemacs_30.html#Init-File">The Init File</a>.
</p>
<p>For each day, this sorts diary entries that begin with a recognizable
time of day according to their times.  Diary entries without times come
first within each day.
</p>
<hr>
<a name="Included-Diary-Files"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Fancy-Diary-Display" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Customization" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Sexp-Diary-Entries" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Included-Diary-Files-1"></a>
<h4 class="subsubsection">26.5.8.9 Included Diary Files</h4>

<p>  Fancy diary display also has the ability to process included diary
files.  This permits a group of people to share a diary file for events
that apply to all of them.  Lines in the diary file of this form:
</p> 
<div class="smallexample">
<pre class="smallexample">#include &quot;<var>filename</var>&quot;
</pre></div>

<p>includes the diary entries from the file <var>filename</var> in the fancy
diary buffer.  The include mechanism is recursive, so that included files
can include other files, and so on; you must be careful not to have a
cycle of inclusions, of course.  Here is how to enable the include
facility:
</p>
<a name="index-list_002ddiary_002dentries_002dhook"></a>
<a name="index-mark_002ddiary_002dentries_002dhook"></a>
<a name="index-include_002dother_002ddiary_002dfiles"></a>
<a name="index-mark_002dincluded_002ddiary_002dfiles"></a>
<div class="smallexample">
<pre class="smallexample">(add-hook 'list-diary-entries-hook 'include-other-diary-files)
(add-hook 'mark-diary-entries-hook 'mark-included-diary-files)
</pre></div>

<p>The include mechanism works only with the fancy diary display, because
ordinary diary display shows the entries directly from your diary file.
</p>
<hr>
<a name="Sexp-Diary-Entries"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Included-Diary-Files" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Customization" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Appt-Customizing" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Sexp-Entries-and-the-Fancy-Diary-Display"></a>
<h4 class="subsubsection">26.5.8.10 Sexp Entries and the Fancy Diary Display</h4>
<a name="index-sexp-diary-entries"></a>

<p>  Sexp diary entries allow you to do more than just have complicated
conditions under which a diary entry applies.  If you use the fancy
diary display, sexp entries can generate the text of the entry depending
on the date itself.  For example, an anniversary diary entry can insert
the number of years since the anniversary date into the text of the
diary entry.  Thus the &lsquo;<samp>%d</samp>&rsquo; in this dairy entry:
</p>
<a name="index-diary_002danniversary-1"></a>
<div class="smallexample">
<pre class="smallexample">%%(diary-anniversary 10 31 1948) Arthur's birthday (%d years old)
</pre></div>

<p>gets replaced by the age, so on October 31, 1990 the entry appears in
the fancy diary buffer like this:
</p>
<div class="smallexample">
<pre class="smallexample">Arthur's birthday (42 years old)
</pre></div>

<p>If the diary file instead contains this entry:
</p>
<div class="smallexample">
<pre class="smallexample">%%(diary-anniversary 10 31 1948) Arthur's %d%s birthday
</pre></div>

<p>the entry in the fancy diary buffer for October 31, 1990 appears like this:
</p>
<div class="smallexample">
<pre class="smallexample">Arthur's 42nd birthday
</pre></div>

<p>  Similarly, cyclic diary entries can interpolate the number of repetitions
that have occurred:
</p>
<a name="index-diary_002dcyclic-1"></a>
<div class="smallexample">
<pre class="smallexample">%%(diary-cyclic 50 1 1 1990) Renew medication (%d%s time)
</pre></div>

<p>looks like this:
</p>
<div class="smallexample">
<pre class="smallexample">Renew medication (5th time)
</pre></div>

<p>in the fancy diary display on September 8, 1990.
</p>
<p>  The generality of sexp diary entries lets you specify any diary entry
that you can describe algorithmically.  A sexp diary entry contains an
expression that computes whether the entry applies to any given date.
If its value is non-<code>nil</code>, the entry applies to that date;
otherwise, it does not.  The expression can use the variable  <code>date</code>
to find the date being considered; its value is a list (<var>month</var>
<var>day</var> <var>year</var>) that refers to the Gregorian calendar.
</p>
<p>  Suppose you get paid on the 21st of the month if it is a weekday, and
on the Friday before if the 21st is on a weekend.  Here is how to write
a sexp diary entry that matches those dates:
</p>
<div class="smallexample">
<pre class="smallexample">&amp;%%(let ((dayname (calendar-day-of-week date))
         (day (car (cdr date))))
      (or (and (= day 21) (memq dayname '(1 2 3 4 5)))
          (and (memq day '(19 20)) (= dayname 5)))
         ) Pay check deposited
</pre></div>

<p>applies to just those dates.  This example illustrates how the sexp can
depend on the variable <code>date</code>; this variable is a list (<var>month</var>
<var>day</var> <var>year</var>) that gives the Gregorian date for which the diary
entries are being found.  If the value of the expression is <code>t</code>,
the entry applies to that date.  If the expression evaluates to
<code>nil</code>, the entry does <em>not</em> apply to that date.
</p>
<p>  The following sexp diary entries take advantage of the ability (in the fancy
diary display) to concoct diary entries whose text varies based on the date:
</p>
<a name="index-diary_002dsunrise_002dsunset"></a>
<a name="index-diary_002dphases_002dof_002dmoon"></a>
<a name="index-diary_002dday_002dof_002dyear"></a>
<a name="index-diary_002diso_002ddate"></a>
<a name="index-diary_002djulian_002ddate"></a>
<a name="index-diary_002dastro_002dday_002dnumber"></a>
<a name="index-diary_002dhebrew_002ddate"></a>
<a name="index-diary_002dislamic_002ddate"></a>
<a name="index-diary_002dfrench_002ddate"></a>
<a name="index-diary_002dmayan_002ddate"></a>
<dl compact="compact">
<dt><code>%%(diary-sunrise-sunset)</code></dt>
<dd><p>Make a diary entry for the local times of today&rsquo;s sunrise and sunset.
</p></dd>
<dt><code>%%(diary-phases-of-moon)</code></dt>
<dd><p>Make a diary entry for the phases (quarters) of the moon.
</p></dd>
<dt><code>%%(diary-day-of-year)</code></dt>
<dd><p>Make a diary entry with today&rsquo;s day number in the current year and the number
of days remaining in the current year.
</p></dd>
<dt><code>%%(diary-iso-date)</code></dt>
<dd><p>Make a diary entry with today&rsquo;s equivalent ISO commercial date.
</p></dd>
<dt><code>%%(diary-julian-date)</code></dt>
<dd><p>Make a diary entry with today&rsquo;s equivalent date on the Julian calendar.
</p></dd>
<dt><code>%%(diary-astro-day-number)</code></dt>
<dd><p>Make a diary entry with today&rsquo;s equivalent astronomical (Julian) day number.
</p></dd>
<dt><code>%%(diary-hebrew-date)</code></dt>
<dd><p>Make a diary entry with today&rsquo;s equivalent date on the Hebrew calendar.
</p></dd>
<dt><code>%%(diary-islamic-date)</code></dt>
<dd><p>Make a diary entry with today&rsquo;s equivalent date on the Islamic calendar.
</p></dd>
<dt><code>%%(diary-french-date)</code></dt>
<dd><p>Make a diary entry with today&rsquo;s equivalent date on the French Revolutionary
calendar.
</p></dd>
<dt><code>%%(diary-mayan-date)</code></dt>
<dd><p>Make a diary entry with today&rsquo;s equivalent date on the Mayan calendar.
</p></dd>
</dl>

<p>Thus including the diary entry
</p>
<div class="smallexample">
<pre class="smallexample">&amp;%%(diary-hebrew-date)
</pre></div>

<p>causes every day&rsquo;s diary display to contain the equivalent date on the
Hebrew calendar, if you are using the fancy diary display.  (With simple
diary display, the line &lsquo;<samp>&amp;%%(diary-hebrew-date)</samp>&rsquo; appears in the
diary for any date, but does nothing particularly useful.)
</p>
<p>  These functions can be used to construct sexp diary entries based on
the Hebrew calendar in certain standard ways:
</p> 
<a name="index-rosh-hodesh"></a>
<a name="index-diary_002drosh_002dhodesh"></a>
<a name="index-parasha_002c-weekly"></a>
<a name="index-diary_002dparasha"></a>
<a name="index-candle-lighting-times"></a>
<a name="index-diary_002dsabbath_002dcandles"></a>
<a name="index-omer-count"></a>
<a name="index-diary_002domer"></a>
<a name="index-yahrzeits-1"></a>
<a name="index-diary_002dyahrzeit"></a>
<dl compact="compact">
<dt><code>%%(diary-rosh-hodesh)</code></dt>
<dd><p>Make a diary entry that tells the occurrence and ritual announcement of each
new Hebrew month.
</p></dd>
<dt><code>%%(diary-parasha)</code></dt>
<dd><p>Make a Saturday diary entry that tells the weekly synagogue scripture reading.
</p></dd>
<dt><code>%%(diary-sabbath-candles)</code></dt>
<dd><p>Make a Friday diary entry that tells the <em>local time</em> of Sabbath
candle lighting.
</p></dd>
<dt><code>%%(diary-omer)</code></dt>
<dd><p>Make a diary entry that gives the omer count, when appropriate.
</p></dd>
<dt><code>%%(diary-yahrzeit <var>month</var> <var>day</var> <var>year</var>) <var>name</var></code></dt>
<dd><p>Make a diary entry marking the anniversary of a date of death.  The date
is the <em>Gregorian</em> (civil) date of death.  The diary entry appears
on the proper Hebrew calendar anniversary and on the day before.  (In
the European style, the order of the parameters is changed to <var>day</var>,
<var>month</var>, <var>year</var>.)
</p></dd>
</dl>

<hr>
<a name="Appt-Customizing"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Sexp-Diary-Entries" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Calendar-Customization" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Sorting" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Customizing-Appointment-Reminders"></a>
<h4 class="subsubsection">26.5.8.11 Customizing Appointment Reminders</h4>

<p>  You can specify exactly how Emacs reminds you of an appointment, and
how far in advance it begins doing so, by setting these variables:
</p>
<a name="index-appt_002dmessage_002dwarning_002dtime"></a>
<a name="index-appt_002daudible"></a>
<a name="index-appt_002dvisible"></a>
<a name="index-appt_002ddisplay_002dmode_002dline"></a>
<a name="index-appt_002dmsg_002dwindow"></a>
<a name="index-appt_002ddisplay_002dduration"></a>
<dl compact="compact">
<dt><code>appt-message-warning-time</code></dt>
<dd><p>The time in minutes before an appointment that the reminder begins.  The
default is 10 minutes.
</p></dd>
<dt><code>appt-audible</code></dt>
<dd><p>If this is <code>t</code> (the default), Emacs rings the terminal bell for
appointment reminders.
</p></dd>
<dt><code>appt-visible</code></dt>
<dd><p>If this is <code>t</code> (the default), Emacs displays the appointment
message in echo area.
</p></dd>
<dt><code>appt-display-mode-line</code></dt>
<dd><p>If this is <code>t</code> (the default), Emacs displays the number of minutes
to the appointment on the mode line.
</p></dd>
<dt><code>appt-msg-window</code></dt>
<dd><p>If this is <code>t</code> (the default), Emacs displays the appointment
message in another window.
</p></dd>
<dt><code>appt-display-duration</code></dt>
<dd><p>The number of seconds an appointment message is displayed.  The default
is 5 seconds.
</p></dd>
</dl>


<hr>
<a name="Sorting"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Appt-Customizing" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Reading-Mail" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Shell" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Sorting-Text"></a>
<h2 class="section">26.6 Sorting Text</h2>
<a name="index-sorting"></a>

<p>  XEmacs provides several commands for sorting text in a buffer.  All
operate on the contents of the region (the text between point and the
mark).  They divide the text of the region into many <em>sort records</em>,
identify a <em>sort key</em> for each record, and then reorder the records
using the order determined by the sort keys.  The records are ordered so
that their keys are in alphabetical order, or, for numerical sorting, in
numerical order.  In alphabetical sorting, all upper-case letters &lsquo;A&rsquo;
through &lsquo;Z&rsquo; come before lower-case &lsquo;a&rsquo;, in accordance with the ASCII
character sequence.
</p>
<p>  The sort commands differ in how they divide the text into sort
records and in which part of each record they use as the sort key.  Most of
the commands make each line a separate sort record, but some commands use
paragraphs or pages as sort records.  Most of the sort commands use each
entire sort record as its own sort key, but some use only a portion of the
record as the sort key.
</p>
<a name="index-sort_002dlines"></a>
<a name="index-sort_002dparagraphs"></a>
<a name="index-sort_002dpages"></a>
<a name="index-sort_002dfields"></a>
<a name="index-sort_002dnumeric_002dfields"></a>
<dl compact="compact">
<dt><kbd>M-x sort-lines</kbd></dt>
<dd><p>Divide the region into lines and sort by comparing the entire
text of a line.  A prefix argument means sort in descending order.
</p>
</dd>
<dt><kbd>M-x sort-paragraphs</kbd></dt>
<dd><p>Divide the region into paragraphs and sort by comparing the entire
text of a paragraph (except for leading blank lines).  A prefix
argument means sort in descending order.
</p>
</dd>
<dt><kbd>M-x sort-pages</kbd></dt>
<dd><p>Divide the region into pages and sort by comparing the entire
text of a page (except for leading blank lines).  A prefix
argument means sort in descending order.
</p>
</dd>
<dt><kbd>M-x sort-fields</kbd></dt>
<dd><p>Divide the region into lines and sort by comparing the contents of
one field in each line.  Fields are defined as separated by
whitespace, so the first run of consecutive non-whitespace characters
in a line constitutes field 1, the second such run constitutes field
2, etc.
</p>
<p>You specify which field to sort by with a numeric argument: 1 to sort
by field 1, etc.  A negative argument means sort in descending
order.  Thus, minus 2 means sort by field 2 in reverse-alphabetical
order.
</p>
</dd>
<dt><kbd>M-x sort-numeric-fields</kbd></dt>
<dd><p>Like <kbd>M-x sort-fields</kbd>, except the specified field is converted
to a number for each line and the numbers are compared.  &lsquo;<samp>10</samp>&rsquo;
comes before &lsquo;<samp>2</samp>&rsquo; when considered as text, but after it when
considered as a number.
</p>
</dd>
<dt><kbd>M-x sort-columns</kbd></dt>
<dd><p>Like <kbd>M-x sort-fields</kbd>, except that the text within each line
used for comparison comes from a fixed range of columns.  An explanation
is given below.
</p></dd>
</dl>

<p>For example, if the buffer contains:
</p>
<div class="smallexample">
<pre class="smallexample">On systems where clash detection (locking of files being edited) is
implemented, XEmacs also checks the first time you modify a buffer
whether the file has changed on disk since it was last visited or
saved.  If it has, you are asked to confirm that you want to change
the buffer.
</pre></div>

<p>then if you apply <kbd>M-x sort-lines</kbd> to the entire buffer you get:
</p>
<div class="smallexample">
<pre class="smallexample">On systems where clash detection (locking of files being edited) is
implemented, XEmacs also checks the first time you modify a buffer
saved.  If it has, you are asked to confirm that you want to change
the buffer.
whether the file has changed on disk since it was last visited or
</pre></div>

<p>where the upper case &lsquo;O&rsquo; comes before all lower case letters.  If you apply
instead <kbd>C-u 2 M-x sort-fields</kbd> you get:
</p>
<div class="smallexample">
<pre class="smallexample">saved.  If it has, you are asked to confirm that you want to change
implemented, XEmacs also checks the first time you modify a buffer
the buffer.
On systems where clash detection (locking of files being edited) is
whether the file has changed on disk since it was last visited or
</pre></div>

<p>where the sort keys were &lsquo;<samp>If</samp>&rsquo;, &lsquo;<samp>XEmacs</samp>&rsquo;, &lsquo;<samp>buffer</samp>&rsquo;,
&lsquo;<samp>systems</samp>&rsquo;, and &lsquo;<samp>the</samp>&rsquo;.
</p>
<a name="index-sort_002dcolumns"></a>
<p>  <kbd>M-x sort-columns</kbd> requires more explanation.  You specify the
columns by putting point at one of the columns and the mark at the other
column.  Because this means you cannot put point or the mark at the
beginning of the first line to sort, this command uses an unusual
definition of &lsquo;region&rsquo;: all of the line point is in is considered part of
the region, and so is all of the line the mark is in.
</p>
<p>  For example, to sort a table by information found in columns 10 to 15,
you could put the mark on column 10 in the first line of the table, and
point on column 15 in the last line of the table, and then use this command.
Or you could put the mark on column 15 in the first line and point on
column 10 in the last line.
</p>
<p>  This can be thought of as sorting the rectangle specified by point and
the mark, except that the text on each line to the left or right of the
rectangle moves along with the text inside the rectangle.
See section <a href="xemacs_12.html#Rectangles">Rectangles</a>.
</p>
<hr>
<a name="Shell"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Sorting" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Reading-Mail" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Single-Shell" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Running-Shell-Commands-from-XEmacs"></a>
<h2 class="section">26.7 Running Shell Commands from XEmacs</h2>
<a name="index-subshell"></a>
<a name="index-shell-commands"></a>

<p>  XEmacs has commands for passing single command lines to inferior shell
processes; it can also run a shell interactively with input and output to
an XEmacs buffer &lsquo;<samp>*shell*</samp>&rsquo;.
</p>
<dl compact="compact">
<dt><kbd>M-!</kbd></dt>
<dd><p>Run a specified shell command line and display the output
(<code>shell-command</code>).
</p></dd>
<dt><kbd>M-|</kbd></dt>
<dd><p>Run a specified shell command line with region contents as input;
optionally replace the region with the output
(<code>shell-command-on-region</code>).
</p></dd>
<dt><kbd>M-x shell</kbd></dt>
<dd><p>Run a subshell with input and output through an XEmacs buffer.
You can then give commands interactively.
</p></dd>
<dt><kbd>M-x term</kbd></dt>
<dd><p>Run a subshell with input and output through an XEmacs buffer.
You can then give commands interactively.
Full terminal emulation is available.
</p></dd>
</dl>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Single-Shell">26.7.1 Single Shell Commands</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         How to run one shell command and return.
</td></tr>
<tr><td align="left" valign="top"><a href="#Interactive-Shell">26.7.2 Interactive Inferior Shell</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Permanent shell taking input via XEmacs.
</td></tr>
<tr><td align="left" valign="top"><a href="#Shell-Mode">26.7.3 Shell Mode</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Special XEmacs commands used with permanent shell.
</td></tr>
<tr><td align="left" valign="top"><a href="#Terminal-emulator">26.7.4 Interactive Inferior Shell with Terminal Emulator</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    An XEmacs window as a terminal emulator.
</td></tr>
<tr><td align="left" valign="top"><a href="#Term-Mode">26.7.5 Term Mode</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Special XEmacs commands used in Term mode.
</td></tr>
<tr><td align="left" valign="top"><a href="#Paging-in-Term">26.7.6 Paging in the terminal emulator</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
</table>

<hr>
<a name="Single-Shell"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Shell" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Shell" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Interactive-Shell" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Single-Shell-Commands"></a>
<h3 class="subsection">26.7.1 Single Shell Commands</h3>

<a name="index-M_002d_0021"></a>
<a name="index-shell_002dcommand"></a>
<p>  <kbd>M-!</kbd> (<code>shell-command</code>) reads a line of text using the
minibuffer and creates an inferior shell to execute the line as a command.
Standard input from the command comes from the null device.  If the shell
command produces any output, the output goes to an XEmacs buffer named
&lsquo;<samp>*Shell Command Output*</samp>&rsquo;, which is displayed in another window but not
selected.  A numeric argument, as in <kbd>M-1 M-!</kbd>, directs this command to
insert any output into the current buffer.  In that case, point is left
before the output and the mark is set after the output.
</p>
<a name="index-M_002d_007c"></a>
<a name="index-shell_002dcommand_002don_002dregion"></a>
<p>  <kbd>M-|</kbd> (<code>shell-command-on-region</code>) is like <kbd>M-!</kbd> but passes
the contents of the region as input to the shell command, instead of no
input.  If a numeric argument is used to direct  output to the current
buffer, then the old region is deleted first and the output replaces it as
the contents of the region.
</p>
<a name="index-shell_002dfile_002dname"></a>
<a name="index-environment"></a>
<p>  Both <kbd>M-!</kbd> and <kbd>M-|</kbd> use <code>shell-file-name</code> to specify the
shell to use.  This variable is initialized based on your <code>SHELL</code>
environment variable when you start XEmacs.  If the file name does not
specify a directory, the directories in the list <code>exec-path</code> are
searched; this list is initialized based on the <code>PATH</code> environment
variable when you start XEmacs.  You can override either or both of these
default initializations in your init file. See section <a href="xemacs_30.html#Init-File">The Init File</a>.
</p>
<p>  When you use <kbd>M-!</kbd> and <kbd>M-|</kbd>, XEmacs has to wait until the
shell command completes.  You can quit with <kbd>C-g</kbd>; that terminates
the shell command.
</p>
<hr>
<a name="Interactive-Shell"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Single-Shell" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Shell" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Shell-Mode" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Interactive-Inferior-Shell"></a>
<h3 class="subsection">26.7.2 Interactive Inferior Shell</h3>

<a name="index-shell"></a>
<p>  To run a subshell interactively with its typescript in an XEmacs
buffer, use <kbd>M-x shell</kbd>.  This creates (or reuses) a buffer named
&lsquo;<samp>*shell*</samp>&rsquo; and runs a subshell with input coming from and output going
to that buffer.  That is to say, any &ldquo;terminal output&rdquo; from the subshell
will go into the buffer, advancing point, and any &ldquo;terminal input&rdquo; for
the subshell comes from text in the buffer.  To give input to the subshell,
go to the end of the buffer and type the input, terminated by &lt;RET&gt;.
</p>
<p>  XEmacs does not wait for the subshell to do anything.  You can switch
windows or buffers and edit them while the shell is waiting, or while it is
running a command.  Output from the subshell waits until XEmacs has time to
process it; this happens whenever XEmacs is waiting for keyboard input or
for time to elapse.
</p>
<p> To get multiple subshells, change the name of buffer
&lsquo;<samp>*shell*</samp>&rsquo; to something different by using <kbd>M-x rename-buffer</kbd>.  The
next use of <kbd>M-x shell</kbd> creates a new buffer &lsquo;<samp>*shell*</samp>&rsquo; with
its own subshell.  By renaming this buffer as well you can create a third
one, and so on.  All the subshells run independently and in parallel.
</p>
<a name="index-explicit_002dshell_002dfile_002dname"></a>
<p>  The file name used to load the subshell is the value of the variable
<code>explicit-shell-file-name</code>, if that is non-<code>nil</code>.  Otherwise, the
environment variable <code>ESHELL</code> is used, or the environment variable
<code>SHELL</code> if there is no <code>ESHELL</code>.  If the file name specified
is relative, the directories in the list <code>exec-path</code> are searched
(see section <a href="#Single-Shell">Single Shell Commands</a>).
</p>
<p>  As soon as the subshell is started, it is sent as input the contents of
the file &lsquo;<tt>~/.emacs_<var>shellname</var></tt>&rsquo;, if that file exists, where
<var>shellname</var> is the name of the file that the shell was loaded from.
For example, if you use <code>csh</code>, the file sent to it is
&lsquo;<tt>~/.emacs_csh</tt>&rsquo;.
</p>
<a name="index-shell_002dpushd_002dregexp"></a>
<a name="index-shell_002dpopd_002dregexp"></a>
<a name="index-shell_002dcd_002dregexp"></a>
<p>  <code>cd</code>, <code>pushd</code>, and <code>popd</code> commands given to the inferior
shell are watched by XEmacs so it can keep the &lsquo;<samp>*shell*</samp>&rsquo; buffer&rsquo;s
default directory the same as the shell&rsquo;s working directory.  These
commands are recognized syntactically by examining lines of input that are
sent.  If you use aliases for these commands, you can tell XEmacs to
recognize them also.  For example, if the value of the variable
<code>shell-pushd-regexp</code> matches the beginning of a shell command line,
that line is regarded as a <code>pushd</code> command.  Change this variable when
you add aliases for &lsquo;<samp>pushd</samp>&rsquo;.  Likewise, <code>shell-popd-regexp</code> and
<code>shell-cd-regexp</code> are used to recognize commands with the meaning of
&lsquo;<samp>popd</samp>&rsquo; and &lsquo;<samp>cd</samp>&rsquo;.
</p>
<p><kbd>M-x shell-resync-dirs</kbd> queries the shell and resynchronizes XEmacs&rsquo;
idea of what the current directory stack is.  <kbd>M-x
shell-dirtrack-toggle</kbd> turns directory tracking on and off.
</p>
<a name="index-input_002dring_002dsize"></a>
<p>XEmacs keeps a history of the most recent commands you have typed in the
&lsquo;<samp>*shell*</samp>&rsquo; buffer.  If you are at the beginning of a shell command
line and type &lt;M-p&gt;, the previous shell input is inserted into the
buffer before point.  Immediately typing &lt;M-p&gt; again deletes that
input and inserts the one before it.  By repeating &lt;M-p&gt; you can
move backward through your commands until you find one you want to
repeat.  You may then edit the command before typing &lt;RET&gt; if you
wish. &lt;M-n&gt; moves forward through the command history, in case you
moved backward past the one you wanted while using &lt;M-p&gt;.  If you
type the first few characters of a previous command and then type
&lt;M-p&gt;, the most recent shell input starting with those characters is
inserted.  This can be very convenient when you are repeating a sequence
of shell commands.  The variable <code>input-ring-size</code> controls how
many commands are saved in your input history.  The default is 30.
</p>

<hr>
<a name="Shell-Mode"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Interactive-Shell" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Shell" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Terminal-emulator" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Shell-Mode-1"></a>
<h3 class="subsection">26.7.3 Shell Mode</h3>

<a name="index-Shell-mode"></a>
<p>  The shell buffer uses Shell mode, which defines several special keys
attached to the <kbd>C-c</kbd> prefix.  They are chosen to resemble the usual
editing and job control characters present in shells that are not under
XEmacs, except that you must type <kbd>C-c</kbd> first.  Here is a list
of the special key bindings of Shell mode:
</p>
<a name="index-RET-_0028Shell-mode_0029"></a>
<a name="index-C_002dc-C_002dd-_0028Shell-mode_0029"></a>
<a name="index-C_002dd-_0028Shell-mode_0029"></a>
<a name="index-C_002dc-C_002du-_0028Shell-mode_0029"></a>
<a name="index-C_002dc-C_002dw-_0028Shell-mode_0029"></a>
<a name="index-C_002dc-C_002dc-_0028Shell-mode_0029"></a>
<a name="index-C_002dc-C_002dz-_0028Shell-mode_0029"></a>
<a name="index-C_002dc-C_002d_005c-_0028Shell-mode_0029"></a>
<a name="index-C_002dc-C_002do-_0028Shell-mode_0029"></a>
<a name="index-C_002dc-C_002dr-_0028Shell-mode_0029"></a>
<a name="index-C_002dc-C_002dy-_0028Shell-mode_0029"></a>
<a name="index-M_002dp-_0028Shell-mode_0029"></a>
<a name="index-M_002dn-_0028Shell-mode_0029"></a>
<a name="index-TAB-_0028Shell-mode_0029"></a>
<a name="index-send_002dshell_002dinput"></a>
<a name="index-shell_002dsend_002deof"></a>
<a name="index-comint_002ddelchar_002dor_002dmaybe_002deof"></a>
<a name="index-interrupt_002dshell_002dsubjob"></a>
<a name="index-stop_002dshell_002dsubjob"></a>
<a name="index-quit_002dshell_002dsubjob"></a>
<a name="index-kill_002doutput_002dfrom_002dshell"></a>
<a name="index-show_002doutput_002dfrom_002dshell"></a>
<a name="index-copy_002dlast_002dshell_002dinput"></a>
<a name="index-comint_002dprevious_002dinput"></a>
<a name="index-comint_002dnext_002dinput"></a>
<a name="index-comint_002ddynamic_002dcomplete"></a>
<a name="index-shell_002dprompt_002dpattern"></a>
<dl compact="compact">
<dt><kbd>&lt;RET&gt;</kbd></dt>
<dd><p>At end of buffer send line as input; otherwise, copy current line to end of
buffer and send it (<code>send-shell-input</code>).  When a line is copied, any
text at the beginning of the line that matches the variable
<code>shell-prompt-pattern</code> is left out; this variable&rsquo;s value should be a
regexp string that matches the prompts that you use in your subshell.
</p></dd>
<dt><kbd>C-c C-d</kbd></dt>
<dd><p>Send end-of-file as input, probably causing the shell or its current
subjob to finish (<code>shell-send-eof</code>).
</p></dd>
<dt><kbd>C-d</kbd></dt>
<dd><p>If point is not at the end of the buffer, delete the next character just
like most other modes.  If point is at the end of the buffer, send
end-of-file as input, instead of generating an error as in other modes
(<code>comint-delchar-or-maybe-eof</code>).
</p></dd>
<dt><kbd>C-c C-u</kbd></dt>
<dd><p>Kill all text that has yet to be sent as input (<code>kill-shell-input</code>).
</p></dd>
<dt><kbd>C-c C-w</kbd></dt>
<dd><p>Kill a word before point (<code>backward-kill-word</code>).
</p></dd>
<dt><kbd>C-c C-c</kbd></dt>
<dd><p>Interrupt the shell or its current subjob if any
(<code>interrupt-shell-subjob</code>).
</p></dd>
<dt><kbd>C-c C-z</kbd></dt>
<dd><p>Stop the shell or its current subjob if any (<code>stop-shell-subjob</code>).
</p></dd>
<dt><kbd>C-c C-\</kbd></dt>
<dd><p>Send quit signal to the shell or its current subjob if any
(<code>quit-shell-subjob</code>).
</p></dd>
<dt><kbd>C-c C-o</kbd></dt>
<dd><p>Delete last batch of output from shell (<code>kill-output-from-shell</code>).
</p></dd>
<dt><kbd>C-c C-r</kbd></dt>
<dd><p>Scroll top of last batch of output to top of window
(<code>show-output-from-shell</code>).
</p></dd>
<dt><kbd>C-c C-y</kbd></dt>
<dd><p>Copy the previous bunch of shell input and insert it into the
buffer before point (<code>copy-last-shell-input</code>).  No final newline
is inserted, and the input copied is not resubmitted until you type
&lt;RET&gt;.
</p></dd>
<dt><kbd>M-p</kbd></dt>
<dd><p>Move backward through the input history.  Search for a matching command
if you have typed the beginning of a command (<code>comint-previous-input</code>).
</p></dd>
<dt><kbd>M-n</kbd></dt>
<dd><p>Move forward through the input history.  Useful when you are
using &lt;M-p&gt; quickly and go past the desired command 
(<code>comint-next-input</code>).
</p></dd>
<dt><kbd>&lt;TAB&gt;</kbd></dt>
<dd><p>Complete the file name preceding point (<code>comint-dynamic-complete</code>).
</p></dd>
</dl>

<hr>
<a name="Terminal-emulator"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Shell-Mode" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Shell" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Term-Mode" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Interactive-Inferior-Shell-with-Terminal-Emulator"></a>
<h3 class="subsection">26.7.4 Interactive Inferior Shell with Terminal Emulator</h3>
<a name="index-term"></a>

<p>  To run a subshell in a terminal emulator, putting its typescript in an XEmacs
buffer, use <kbd>M-x term</kbd>.  This creates (or reuses) a buffer named
&lsquo;<samp>*term*</samp>&rsquo; and runs a subshell with input coming from your keyboard and
output going to that buffer.
</p>
<p>All the normal keys that you type are sent without any interpretation
by XEmacs directly to the subshell, as &ldquo;terminal input.&rdquo;
Any &ldquo;echo&rdquo; of your input is the responsibility of the subshell.
(The exception is the terminal escape character,
which by default is <kbd>C-c</kbd>. see section <a href="#Term-Mode">Term Mode</a>.)
Any &ldquo;terminal output&rdquo; from the subshell goes into the buffer,
advancing point.
</p>
<p>  Some programs (such as XEmacs itself) need to control the
appearance on the terminal screen in detail.  They do this by
sending special control codes.  The exact control
codes needed vary from terminal to terminal, but nowadays
most terminals and terminal emulators (including xterm)
understand the so-called &quot;ANSI escape sequences&quot; (first
popularized by the Digital&rsquo;s VT100 family of terminal).
The term mode also understands these escape sequences,
and for each control code does the appropriate thing
to change the buffer so that the appearance of the window
will match what it would be on a real terminal.
Thus you can actually run XEmacs inside an XEmacs Term window!
</p>
<p>   XEmacs does not wait for the subshell to do anything.  You can switch
windows or buffers and edit them while the shell is waiting, or while
it is running a command.  Output from the subshell waits until XEmacs
has time to process it; this happens whenever XEmacs is waiting for
keyboard input or for time to elapse.
</p>
<p>   To make multiple terminal emulators, rename the buffer &lsquo;<samp>*term*</samp>&rsquo;
to something different using <kbd>M-x rename-uniquely</kbd>,
just as with Shell mode.
</p>
<p>   The file name used to load the subshell is determined
the same way as for Shell mode.
</p>
<p>Unlike Shell mode, Term mode does not track the current directory
by examining your input.  Instead, if you use a programmable
shell, you can have it tell Term what the current directory is.
This is done automatically by bash for version 1.15 and later.
</p>
<hr>
<a name="Term-Mode"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Terminal-emulator" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Shell" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Paging-in-Term" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Term-Mode-1"></a>
<h3 class="subsection">26.7.5 Term Mode</h3>
<a name="index-Term-mode"></a>
<a name="index-mode_002c-Term"></a>

<p>  Term uses Term mode, which has two input modes:
In line mode, Term basically acts like Shell mode.  See section <a href="#Shell-Mode">Shell Mode</a>.
In Char mode, each character is sent directly to the inferior subshell,
except for the Term escape character, normally <kbd>C-c</kbd>.
</p>
<p>To switch between line and char mode, use these commands:
</p><dl compact="compact">
<dd><a name="index-C_002dc-C_002dj-_0028Term-mode_0029"></a>
<p>findex term-char-mode
</p></dd>
<dt><kbd>C-c C-j</kbd></dt>
<dd><p>Switch to line mode.  Do nothing if already in line mode.
</p>
<a name="index-C_002dc-C_002dk-_0028Term-mode_0029"></a>
<a name="index-term_002dline_002dmode"></a>
</dd>
<dt><kbd>C-c C-k</kbd></dt>
<dd><p>Switch to char mode.  Do nothing if already in char mode.
</p></dd>
</dl>

<p>The following commands are only available in Char mode:
</p><dl compact="compact">
<dt><kbd>C-c C-c</kbd></dt>
<dd><p>Send a literal &lt;C-c&gt; to the sub-shell.
</p>
</dd>
<dt><kbd>C-c C-x</kbd></dt>
<dd><p>A prefix command to conveniently access the global &lt;C-x&gt; commands.
For example, <kbd>C-c C-x o</kbd> invokes the global binding of
<kbd>C-x o</kbd>, which is normally &lsquo;<samp>other-window</samp>&rsquo;.
</p></dd>
</dl>

<hr>
<a name="Paging-in-Term"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Term-Mode" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Shell" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Narrowing" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Paging-in-the-terminal-emulator"></a>
<h3 class="subsection">26.7.6 Paging in the terminal emulator</h3>

<p>Term mode has a pager feature.  When the pager is enabled,
term mode will pause at the end of each screenful.
</p>
<dl compact="compact">
<dd><a name="index-C_002dc-C_002dq-_0028Term-mode_0029"></a>
<a name="index-term_002dpager_002dtoggle"></a>
</dd>
<dt><kbd>C-c C-q</kbd></dt>
<dd><p>Toggles the pager feature:  Disables the pager if it is enabled,
and vice versa.  This works in both line and char modes.
If the pager enabled, the mode-line contains the word &lsquo;<samp>page</samp>&rsquo;.
</p></dd>
</dl>

<p>If the pager is enabled, and Term receives more than a screenful
of output since your last input, Term will enter More break mode.
This is indicated by &lsquo;<samp>**MORE**</samp>&rsquo; in the mode-line.
Type a <kbd>Space</kbd> to display the next screenful of output.
Type <kbd>?</kbd> to see your other options.  The interface is similar
to the Unix &lsquo;<samp>more</samp>&rsquo; program.
</p>
<hr>
<a name="Narrowing"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Paging-in-Term" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Reading-Mail" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Hardcopy" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Narrowing-1"></a>
<h2 class="section">26.8 Narrowing</h2>
<a name="index-widening"></a>
<a name="index-restriction"></a>
<a name="index-narrowing"></a>

<p>  <em>Narrowing</em> means focusing in on some portion of the buffer, making
the rest temporarily invisible and inaccessible.  Cancelling the narrowing
and making the entire buffer once again visible is called <em>widening</em>.
The amount of narrowing in effect in a buffer at any time is called the
buffer&rsquo;s <em>restriction</em>.
</p>
<dl compact="compact">
<dt><kbd>C-x n n</kbd></dt>
<dd><p>Narrow down to between point and mark (<code>narrow-to-region</code>).
</p></dd>
<dt><kbd>C-x n w</kbd></dt>
<dd><p>Widen to make the entire buffer visible again (<code>widen</code>).
</p></dd>
</dl>

<p>  Narrowing sometimes makes it easier to concentrate on a single
subroutine or paragraph by eliminating clutter.  It can also be used to
restrict the range of operation of a replace command or repeating
keyboard macro.  The word &lsquo;<samp>Narrow</samp>&rsquo; appears in the mode line
whenever narrowing is in effect.  When you have narrowed to a part of the
buffer, that part appears to be all there is.  You can&rsquo;t see the rest,
can&rsquo;t move into it (motion commands won&rsquo;t go outside the visible part),
and can&rsquo;t change it in any way.  However, the invisible text is not
gone; if you save the file, it will be saved.
</p>
<a name="index-C_002dx-n-n"></a>
<a name="index-narrow_002dto_002dregion"></a>
<p>  The primary narrowing command is <kbd>C-x n n</kbd> (<code>narrow-to-region</code>).
It sets the current buffer&rsquo;s restrictions so that the text in the current
region remains visible but all text before the region or after the region
is invisible.  Point and mark do not change.
</p>
<p>  Because narrowing can easily confuse users who do not understand it,
<code>narrow-to-region</code> is normally a disabled command.  Attempting to use
this command asks for confirmation and gives you the option of enabling it;
once you enable the command, confirmation will no longer be required.  See section <a href="xemacs_30.html#Disabling">Disabling Commands</a>.
</p>
<a name="index-C_002dx-n-w"></a>
<a name="index-widen"></a>
<p>   To undo narrowing, use <kbd>C-x n w</kbd> (<code>widen</code>).  This makes all
text in the buffer accessible again.
</p>
<p>   Use the <kbd>C-x =</kbd> command to get information on what part of the
buffer you narrowed down.  See section <a href="xemacs_7.html#Position-Info">Cursor Position Information</a>.
</p>
<hr>
<a name="Hardcopy"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Narrowing" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Reading-Mail" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Recursive-Edit" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Hardcopy-Output"></a>
<h2 class="section">26.9 Hardcopy Output</h2>
<a name="index-hardcopy"></a>

<p>  The XEmacs commands for making hardcopy derive their names from the
Unix commands &lsquo;<samp>print</samp>&rsquo; and &lsquo;<samp>lpr</samp>&rsquo;.
</p>
<dl compact="compact">
<dt><kbd>M-x print-buffer</kbd></dt>
<dd><p>Print hardcopy of current buffer using Unix command &lsquo;<samp>print</samp>&rsquo;
<br>(&lsquo;<samp>lpr -p</samp>&rsquo;).  This command adds page headings containing the file name
and page number.
</p></dd>
<dt><kbd>M-x lpr-buffer</kbd></dt>
<dd><p>Print hardcopy of current buffer using Unix command &lsquo;<samp>lpr</samp>&rsquo;.
This command does not add page headings.
</p></dd>
<dt><kbd>M-x print-region</kbd></dt>
<dd><p>Like <code>print-buffer</code>, but prints only the current region.
</p></dd>
<dt><kbd>M-x lpr-region</kbd></dt>
<dd><p>Like <code>lpr-buffer</code>, but prints only the current region.
</p></dd>
</dl>

<a name="index-print_002dbuffer"></a>
<a name="index-print_002dregion"></a>
<a name="index-lpr_002dbuffer"></a>
<a name="index-lpr_002dregion"></a>
<a name="index-lpr_002dswitches"></a>
<p>  All the hardcopy commands pass extra switches to the <code>lpr</code> program
based on the value of the variable <code>lpr-switches</code>.  Its value should
be a list of strings, each string a switch starting with &lsquo;<samp>-</samp>&rsquo;.  For
example, the value could be <code>(&quot;-Pfoo&quot;)</code> to print on printer
&lsquo;<samp>foo</samp>&rsquo;.
</p>
<hr>
<a name="Recursive-Edit"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Hardcopy" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Reading-Mail" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Dissociated-Press" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Recursive-Editing-Levels"></a>
<h2 class="section">26.10 Recursive Editing Levels</h2>
<a name="index-recursive-editing-level"></a>
<a name="index-editing-level_002c-recursive"></a>

<p>  A <em>recursive edit</em> is a situation in which you are using XEmacs
commands to perform arbitrary editing while in the middle of another
XEmacs command.  For example, when you type <kbd>C-r</kbd> inside a
<code>query-replace</code>, you enter a recursive edit in which you can change
the current buffer.  When you exit from the recursive edit, you go back to
the <code>query-replace</code>.
</p>
<a name="index-C_002dM_002dc"></a>
<a name="index-exit_002drecursive_002dedit"></a>
<a name="index-exiting-1"></a>
<p>  <em>Exiting</em> a recursive edit means returning to the unfinished
command, which continues execution.  For example, exiting the recursive
edit requested by <kbd>C-r</kbd> in <code>query-replace</code> causes query replacing
to resume.  Exiting is done with <kbd>C-M-c</kbd> (<code>exit-recursive-edit</code>).
</p>
<a name="index-C_002d_005d"></a>
<a name="index-abort_002drecursive_002dedit"></a>
<p>  You can also <em>abort</em> a recursive edit.  This is like exiting, but
also quits the unfinished command immediately.  Use the command <kbd>C-]</kbd>
(<code>abort-recursive-edit</code>) for this.  See section <a href="xemacs_30.html#Quitting">Quitting and Aborting</a>.
</p>
<p>  The mode line shows you when you are in a recursive edit by displaying
square brackets around the parentheses that always surround the major
and minor mode names.  Every window&rsquo;s mode line shows the square
brackets, since XEmacs as a whole, rather than any particular buffer, is
in a recursive edit.
</p>
<a name="index-top_002dlevel"></a>
<p>  It is possible to be in recursive edits within recursive edits.  For
example, after typing <kbd>C-r</kbd> in a <code>query-replace</code>, you might
type a command that entered the debugger.  In such a case, two or
more sets of square brackets appear in the mode line(s).  Exiting the
inner recursive edit (here with the debugger <kbd>c</kbd> command)
resumes the query-replace command where it called the debugger.  After
the end of the query-replace command, you would be able to exit the
first recursive edit.  Aborting exits only one level of recursive edit;
it returns to the command level of the previous recursive edit.  You can
then abort that one as well.
</p>
<p>  The command <kbd>M-x top-level</kbd> aborts all levels of
recursive edits, returning immediately to the top level command reader.
</p>
<p>  The text you edit inside the recursive edit need not be the same text
that you were editing at top level.  If the command that invokes the
recursive edit selects a different buffer first, that is the buffer you
will edit recursively.  You can switch buffers within the recursive edit
in the normal manner (as long as the buffer-switching keys have not been
rebound).  While you could theoretically do the rest of your editing
inside the recursive edit, including visiting files, this could have
surprising effects (such as stack overflow) from time to time.  It is
best if you always exit or abort a recursive edit when you no longer
need it.
</p>
<p>  In general, XEmacs tries to avoid using recursive edits.  It is
usually preferable to allow users to switch among the possible editing
modes in any order they like.  With recursive edits, the only way to get
to another state is to go &ldquo;back&rdquo; to the state that the recursive edit
was invoked from.
</p>
<hr>
<a name="Dissociated-Press"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Recursive-Edit" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Reading-Mail" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#CONX" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Dissociated-Press-1"></a>
<h2 class="section">26.11 Dissociated Press</h2>

<a name="index-dissociated_002dpress"></a>
<p>  <kbd>M-x dissociated-press</kbd> is a command for scrambling a file of text
either word by word or character by character.  Starting from a buffer of
straight English, it produces extremely amusing output.  The input comes
from the current XEmacs buffer.  Dissociated Press writes its output in a
buffer named &lsquo;<samp>*Dissociation*</samp>&rsquo;, and redisplays that buffer after every
couple of lines (approximately) to facilitate reading it.
</p>
<p>  <code>dissociated-press</code> asks every so often whether to continue
operating.  Answer <kbd>n</kbd> to stop it.  You can also stop at any time by
typing <kbd>C-g</kbd>.  The dissociation output remains in the &lsquo;<samp>*Dissociation*</samp>&rsquo;
buffer for you to copy elsewhere if you wish.
</p>
<a name="index-presidentagon"></a>
<p>  Dissociated Press operates by jumping at random from one point in the
buffer to another.  In order to produce plausible output rather than
gibberish, it insists on a certain amount of overlap between the end of one
run of consecutive words or characters and the start of the next.  That is,
if it has just printed out &lsquo;president&rsquo; and then decides to jump to a
different point in the file, it might spot the &lsquo;ent&rsquo; in &lsquo;pentagon&rsquo; and
continue from there, producing &lsquo;presidentagon&rsquo;.  Long sample texts produce
the best results.
</p>
<a name="index-againformation"></a>
<p>  A positive argument to <kbd>M-x dissociated-press</kbd> tells it to operate
character by character, and specifies the number of overlap characters.  A
negative argument tells it to operate word by word and specifies the number
of overlap words.  In this mode, whole words are treated as the elements to
be permuted, rather than characters.  No argument is equivalent to an
argument of two.  For your againformation, the output goes only into the
buffer &lsquo;<samp>*Dissociation*</samp>&rsquo;.  The buffer you start with is not changed.
</p>
<a name="index-Markov-chain"></a>
<a name="index-ignoriginal"></a>
<a name="index-techniquitous"></a>
<p>  Dissociated Press produces nearly the same results as a Markov chain
based on a frequency table constructed from the sample text.  It is,
however, an independent, ignoriginal invention.  Dissociated Press
techniquitously copies several consecutive characters from the sample
between random choices, whereas a Markov chain would choose randomly for
each word or character.  This makes for more plausible sounding results
and runs faster.
</p>
<a name="index-outragedy"></a>
<a name="index-buggestion"></a>
<a name="index-properbose"></a>
<p>  It is a mustatement that too much use of Dissociated Press can be a
developediment to your real work.  Sometimes to the point of outragedy.
And keep dissociwords out of your documentation, if you want it to be well
userenced and properbose.  Have fun.  Your buggestions are welcome.
</p>
<hr>
<a name="CONX"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dissociated-Press" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Reading-Mail" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Amusements" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="CONX-1"></a>
<h2 class="section">26.12 CONX</h2>
<a name="index-random-sentences"></a>

<p>Besides producing a file of scrambled text with Dissociated Press, you 
can generate random sentences by using CONX.
</p>
<dl compact="compact">
<dt><kbd>M-x conx</kbd></dt>
<dd><p>Generate random sentences in the <code>*conx*</code> buffer.
</p></dd>
<dt><kbd>M-x conx-buffer</kbd></dt>
<dd><p>Absorb the text in the current buffer into the <code>conx</code> database.
</p></dd>
<dt><kbd>M-x conx-init</kbd></dt>
<dd><p>Forget the current word-frequency tree.
</p></dd>
<dt><kbd>M-x conx-load</kbd></dt>
<dd><p>Load a <code>conx</code> database that has been previously saved with 
<code>M-x conx-save</code>.
</p></dd>
<dt><kbd>M-x conx-region</kbd></dt>
<dd><p>Absorb the text in the current buffer into the <code>conx</code> database.
</p></dd>
<dt><kbd>M-x conx-save</kbd></dt>
<dd><p>Save the current <code>conx</code> database to a file for future retrieval.
</p></dd>
</dl>

<a name="index-conx"></a>
<a name="index-conx_002dbuffer"></a>
<a name="index-conx_002dload"></a>
<a name="index-conx_002dregion"></a>
<a name="index-conx_002dinit"></a>
<a name="index-conx_002dsave"></a>

<p>Copy text from a buffer using <kbd>M-x conx-buffer</kbd> or <kbd>M-x conx-region</kbd>
and then type <kbd>M-x conx</kbd>.  Output is continuously generated until you
type &lt;^G&gt;. You can save the <code>conx</code> database to a file with
<kbd>M-x conx-save</kbd>, which you can retrieve with <code>M-x conx-load</code>. 
To clear the database, use <code>M-x conx-init</code>.
</p>
<hr>
<a name="Amusements"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#CONX" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Reading-Mail" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Emulation" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Other-Amusements"></a>
<h2 class="section">26.13 Other Amusements</h2>
<a name="index-boredom"></a>
<a name="index-hanoi"></a>
<a name="index-yow"></a>

<p>  If you are a little bit bored, you can try <kbd>M-x hanoi</kbd>.  If you are
considerably bored, give it a numeric argument.  If you are very, very
bored, try an argument of 9.  Sit back and watch.
</p>
<p>  When you are frustrated, try the famous Eliza program.  Just do
<kbd>M-x doctor</kbd>.  End each input by typing <kbd>RET</kbd> twice.
</p>
<p>  When you are feeling strange, type <kbd>M-x yow</kbd>.
</p>
<hr>
<a name="Emulation"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Amusements" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Reading-Mail" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Emulation-1"></a>
<h2 class="section">26.14 Emulation</h2>
<a name="index-other-editors"></a>
<a name="index-vi"></a>
<a name="index-EDT"></a>

<p>  XEmacs can be programmed to emulate (more or less) most other
editors.  Standard facilities can emulate these:
</p>
<dl compact="compact">
<dt>Viper (a vi emulator)</dt>
<dd><a name="index-Viper"></a>
<p>In XEmacs, Viper is the preferred emulation of vi within XEmacs.
Viper is designed to allow you to take advantage of the best
features of XEmacs while still doing your basic editing in a
familiar, vi-like fashion.  Viper provides various different
levels of vi emulation, from a quite complete emulation that
allows almost no access to native XEmacs commands, to an
&ldquo;expert&rdquo; mode that combines the most useful vi commands with
the most useful XEmacs commands.
</p>
<p>To start Viper, put the command
</p>
<div class="example">
<pre class="example">(viper-mode)
</pre></div>

<p>in your init file.  See section <a href="xemacs_30.html#Init-File">The Init File</a>.
</p>
<p>Viper comes with a separate manual that is provided standard
with the XEmacs distribution.
</p>

</dd>
<dt>EDT (DEC VMS editor)</dt>
<dd><a name="index-edt_002demulation_002don"></a>
<a name="index-edt_002demulation_002doff"></a>
<p>Turn on EDT emulation with <kbd>M-x edt-emulation-on</kbd>.  <kbd>M-x
<br>edt-emulation-off</kbd> restores normal Emacs command bindings.
</p>
<p>Most of the EDT emulation commands are keypad keys, and most standard
Emacs key bindings are still available.  The EDT emulation rebindings
are done in the global keymap, so there is no problem switching
buffers or major modes while in EDT emulation.
</p>
</dd>
<dt>Gosling Emacs</dt>
<dd><a name="index-set_002dgosmacs_002dbindings"></a>
<a name="index-set_002dgnu_002dbindings"></a>
<p>Turn on emulation of Gosling Emacs (aka Unipress Emacs) with <kbd>M-x
set-gosmacs-bindings</kbd>.  This redefines many keys, mostly on the
<kbd>C-x</kbd> and <kbd>ESC</kbd> prefixes, to work as they do in Gosmacs.
<kbd>M-x set-gnu-bindings</kbd> returns to normal XEmacs by rebinding
the same keys to the definitions they had at the time <kbd>M-x
set-gosmacs-bindings</kbd> was done.
</p>
<p>It is also possible to run Mocklisp code written for Gosling Emacs.
See section <a href="xemacs_25.html#Mocklisp">Converting Mocklisp to Lisp</a>.
</p></dd>
</dl>

<hr>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Reading-Mail" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="xemacs_30.html#Customization" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="xemacs.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_33.html#Key-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="xemacs_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated on <i>a sunny day</i> using <a href="http://www.nongnu.org/texi2html/"><i>texi2html</i></a>.
 </font>
 <br>

</p>
</body>
</html>
