<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on a sunny day by texi2html -->
<!--
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people <dev@texi2html.cvshome.org>
Send bugs and suggestions to <users@texi2html.cvshome.org>

-->
<head>
<title>CVS--Concurrent Versions System v1.12.0.1: 12. Keyword substitution</title>

<meta name="description" content="CVS--Concurrent Versions System v1.12.0.1: 12. Keyword substitution">
<meta name="keywords" content="CVS--Concurrent Versions System v1.12.0.1: 12. Keyword substitution">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="NOD98"></a>
<a name="SEC98"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="cvs_11.html#SEC97" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC99" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; <td valign="middle" align="left">[<a href="cvs_11.html#SEC96" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="cvs.html#SEC_Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="cvs_13.html#SEC104" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left">[<a href="cvs.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="cvs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="cvs_24.html#SEC188" title="Concept index">Index</a>]</td>
<td valign="middle" align="left">[<a href="cvs_abt.html#SEC_About" title="About (this page)"> ? </a>]</td>
</tr></table>
<h1> 12. Keyword substitution </h1>

<p>As long as you edit source files inside a working
directory you can always find out the state of
your files via `<samp>cvs status</samp>' and `<samp>cvs log</samp>'.
But as soon as you export the files from your
development environment it becomes harder to identify
which revisions they are.
</p><p><small>CVS</small> can use a mechanism known as <em>keyword
substitution</em> (or <em>keyword expansion</em>) to help
identifying the files.  Embedded strings of the form
<code>$<var>keyword</var>$</code> and
<code>$<var>keyword</var>:<small>...</small>$</code> in a file are replaced
with strings of the form
<code>$<var>keyword</var>:<var>value</var>$</code> whenever you obtain
a new revision of the file.
</p><table border="0" cellspacing="0">

<tr><td align="left" valign="top"><a href="#SEC99">12.1 Keyword List</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Keywords</td></tr>
<tr><td align="left" valign="top"><a href="#SEC100">12.2 Using keywords</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC101">12.3 Avoiding substitution</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC102">12.4 Substitution modes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC103">12.5 Problems with the $Log$ keyword.</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
</table>

<hr size="6">
<a name="NOD99"></a>
<a name="SEC99"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC98" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC100" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; <td valign="middle" align="left">[<a href="#SEC98" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC98" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="cvs_13.html#SEC104" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left">[<a href="cvs.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="cvs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="cvs_24.html#SEC188" title="Concept index">Index</a>]</td>
<td valign="middle" align="left">[<a href="cvs_abt.html#SEC_About" title="About (this page)"> ? </a>]</td>
</tr></table>
<h2> 12.1 Keyword List </h2>

<p>This is a list of the keywords:
</p><dl compact="compact">
<dd><p>
<a name="IDX190"></a>
</p></dd>
<dt><code> $Author$
</code></dt>
<dd><p>The login name of the user who checked in the revision.
</p><a name="IDX191"></a>
</dd>
<dt><code> $Date$
</code></dt>
<dd><p>The date and time (UTC) the revision was checked in.
</p><a name="IDX192"></a>
</dd>
<dt><code> $Header$
</code></dt>
<dd><p>A standard header containing the full pathname of the
<small>RCS</small> file, the revision number, the date (UTC), the
author, the state, and the locker (if locked).  Files
will normally never be locked when you use <small>CVS</small>.
</p><a name="IDX193"></a>
</dd>
<dt><code> $Id$
</code></dt>
<dd><p>Same as <code>$Header$</code>, except that the <small>RCS</small>
filename is without a path.
</p><a name="IDX194"></a>
</dd>
<dt><code> $Name$
</code></dt>
<dd><p>Tag name used to check out this file.  The keyword is
expanded only if one checks out with an explicit tag
name.  For example, when running the command <code>cvs
co -r first</code>, the keyword expands to `<samp>Name: first</samp>'.
</p><a name="IDX195"></a>
</dd>
<dt><code> $Locker$
</code></dt>
<dd><p>The login name of the user who locked the revision
(empty if not locked, which is the normal case unless
<code>cvs admin -l</code> is in use).
</p><a name="IDX196"></a>
</dd>
<dt><code> $Log$
</code></dt>
<dd><p>The log message supplied during commit, preceded by a
header containing the <small>RCS</small> filename, the revision
number, the author, and the date (UTC).  Existing log
messages are <em>not</em> replaced.  Instead, the new log
message is inserted after <code>$Log$</code>.
Each new line is prefixed with the same string which
precedes the <code>$Log</code> keyword.  For example, if the
file contains:
</p><table><tr><td>&nbsp;</td><td class="example"><pre>
  /* Here is what people have been up to:
   *
   * $Log$
   * Revision 1.1  1997/01/03 14:23:51  joe
   * Add the superfrobnicate option
   *
   */
</pre></td></tr></table>
<p>then additional lines which are added when expanding
the <code>$Log</code> keyword will be preceded by `<samp>   * </samp>'.
Unlike previous versions of <small>CVS</small> and <small>RCS</small>, the
<em>comment leader</em> from the <small>RCS</small> file is not used.
The <code>$Log</code> keyword is useful for
accumulating a complete change log in a source file,
but for several reasons it can be problematic.
See section <a href="#SEC103">Problems with the $Log$ keyword.</a>.
</p><a name="IDX197"></a>
</dd>
<dt><code> $RCSfile$
</code></dt>
<dd><p>The name of the RCS file without a path.
</p><a name="IDX198"></a>
</dd>
<dt><code> $Revision$
</code></dt>
<dd><p>The revision number assigned to the revision.
</p><a name="IDX199"></a>
</dd>
<dt><code> $Source$
</code></dt>
<dd><p>The full pathname of the RCS file.
</p><a name="IDX200"></a>
</dd>
<dt><code> $State$
</code></dt>
<dd><p>The state assigned to the revision.  States can be
assigned with <code>cvs admin -s</code>--see <a href="cvs_16.html#SEC120">admin options</a>.
</p></dd>
</dl>

<hr size="6">
<a name="NOD100"></a>
<a name="SEC100"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC99" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC101" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; <td valign="middle" align="left">[<a href="#SEC98" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC98" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="cvs_13.html#SEC104" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left">[<a href="cvs.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="cvs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="cvs_24.html#SEC188" title="Concept index">Index</a>]</td>
<td valign="middle" align="left">[<a href="cvs_abt.html#SEC_About" title="About (this page)"> ? </a>]</td>
</tr></table>
<h2> 12.2 Using keywords </h2>

<p>To include a keyword string you simply include the
relevant text string, such as <code>$Id$</code>, inside the
file, and commit the file.  <small>CVS</small> will automatically
expand the string as part of the commit operation.
</p><p>It is common to embed the <code>$Id$</code> string in
the source files so that it gets passed through to
generated files.  For example, if you are managing
computer program source code, you might include a
variable which is initialized to contain that string.
Or some C compilers may provide a <code>#pragma ident</code>
directive.  Or a document management system might
provide a way to pass a string through to generated
files.
</p><a name="IDX201"></a>
<p>The <code>ident</code> command (which is part of the <small>RCS</small>
package) can be used to extract keywords and their
values from a file.  This can be handy for text files,
but it is even more useful for extracting keywords from
binary files.
</p><table><tr><td>&nbsp;</td><td class="example"><pre>
$ ident samp.c
samp.c:
     $Id$
$ gcc samp.c
$ ident a.out
a.out:
     $Id$
</pre></td></tr></table>
<a name="IDX202"></a>
<p>S<small>CCS</small> is another popular revision control system.
It has a command, <code>what</code>, which is very similar to
<code>ident</code> and used for the same purpose.  Many sites
without <small>RCS</small> have <small>SCCS</small>.  Since <code>what</code>
looks for the character sequence <code>@(#)</code> it is
easy to include keywords that are detected by either
command.  Simply prefix the keyword with the
magic <small>SCCS</small> phrase, like this:
</p><table><tr><td>&nbsp;</td><td class="example"><pre>
static char *id=&quot;@(#) $Id$&quot;;
</pre></td></tr></table>
<hr size="6">
<a name="NOD101"></a>
<a name="SEC101"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC100" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC102" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; <td valign="middle" align="left">[<a href="#SEC98" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC98" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="cvs_13.html#SEC104" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left">[<a href="cvs.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="cvs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="cvs_24.html#SEC188" title="Concept index">Index</a>]</td>
<td valign="middle" align="left">[<a href="cvs_abt.html#SEC_About" title="About (this page)"> ? </a>]</td>
</tr></table>
<h2> 12.3 Avoiding substitution </h2>

<p>Keyword substitution has its disadvantages.  Sometimes
you might want the literal text string
`<samp>$Author$</samp>' to appear inside a file without
<small>CVS</small> interpreting it as a keyword and expanding it
into something like `<samp>$Author$</samp>'.
</p><p>There is unfortunately no way to selectively turn off
keyword substitution.  You can use `<samp>-ko</samp>'
(see section <a href="#SEC102">Substitution modes</a>) to turn off keyword
substitution entirely.
</p><p>In many cases you can avoid using keywords in
the source, even though they appear in the final
product.  For example, the source for this manual
contains `<samp>$@asis{}Author$</samp>' whenever the text
`<samp>$Author$</samp>' should appear.  In <code>nroff</code>
and <code>troff</code> you can embed the null-character
<code>\&amp;</code> inside the keyword for a similar effect.
</p><hr size="6">
<a name="NOD102"></a>
<a name="SEC102"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC101" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC103" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; <td valign="middle" align="left">[<a href="#SEC98" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC98" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="cvs_13.html#SEC104" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left">[<a href="cvs.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="cvs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="cvs_24.html#SEC188" title="Concept index">Index</a>]</td>
<td valign="middle" align="left">[<a href="cvs_abt.html#SEC_About" title="About (this page)"> ? </a>]</td>
</tr></table>
<h2> 12.4 Substitution modes </h2>

<p>Each file has a stored default substitution mode, and
each working directory copy of a file also has a
substitution mode.  The former is set by the `<samp>-k</samp>'
option to <code>cvs add</code> and <code>cvs admin</code>; the
latter is set by the `<samp>-k</samp>' or `<samp>-A</samp>' options to <code>cvs
checkout</code> or <code>cvs update</code>.  <code>cvs diff</code> also
has a `<samp>-k</samp>' option.  For some examples,
see <a href="cvs_9.html#SEC80">Handling binary files</a>, and <a href="cvs_5.html#SEC64">Merging and keywords</a>.
</p><p>The modes available are:
</p><dl compact="compact">
<dt>`<samp> -kkv
</samp>'</dt>
<dd><p>Generate keyword strings using the default form, e.g.
<code>$Revision$</code> for the <code>Revision</code>
keyword.
</p></dd>
<dt>`<samp> -kkvl
</samp>'</dt>
<dd><p>Like `<samp>-kkv</samp>', except that a locker's name is always
inserted if the given revision is currently locked.
The locker's name is only relevant if <code>cvs admin
-l</code> is in use.
</p></dd>
<dt>`<samp> -kk
</samp>'</dt>
<dd><p>Generate only keyword names in keyword strings; omit
their values.  For example, for the <code>Revision</code>
keyword, generate the string <code>$Revision$</code>
instead of <code>$Revision$</code>.  This option
is useful to ignore differences due to keyword
substitution when comparing different revisions of a
file (see section <a href="cvs_5.html#SEC64">Merging and keywords</a>).
</p></dd>
<dt>`<samp> -ko
</samp>'</dt>
<dd><p>Generate the old keyword string, present in the working
file just before it was checked in.  For example, for
the <code>Revision</code> keyword, generate the string
<code>$Revision$</code> instead of
<code>$Revision$</code> if that is how the
string appeared when the file was checked in.
</p></dd>
<dt>`<samp> -kb
</samp>'</dt>
<dd><p>Like `<samp>-ko</samp>', but also inhibit conversion of line
endings between the canonical form in which they are
stored in the repository (linefeed only), and the form
appropriate to the operating system in use on the
client.  For systems, like unix, which use linefeed
only to terminate lines, this is the same as
`<samp>-ko</samp>'.  For more information on binary files, see
<a href="cvs_9.html#SEC80">Handling binary files</a>.
</p></dd>
<dt>`<samp> -kv
</samp>'</dt>
<dd><p>Generate only keyword values for keyword strings.  For
example, for the <code>Revision</code> keyword, generate the string
<code>5.7</code> instead of <code>$Revision$</code>.
This can help generate files in programming languages
where it is hard to strip keyword delimiters like
<code>$Revision$</code> from a string.  However,
further keyword substitution cannot be performed once
the keyword names are removed, so this option should be
used with care.
</p><p>One often would like to use `<samp>-kv</samp>' with <code>cvs
export</code>--see section <a href="cvs_16.html#SEC134">export--Export sources from CVS, similar to checkout</a>.  But be aware that doesn't
handle an export containing binary files correctly.
</p></dd>
</dl>

<hr size="6">
<a name="NOD103"></a>
<a name="SEC103"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC102" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="cvs_13.html#SEC104" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; <td valign="middle" align="left">[<a href="#SEC98" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC98" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="cvs_13.html#SEC104" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left">[<a href="cvs.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="cvs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="cvs_24.html#SEC188" title="Concept index">Index</a>]</td>
<td valign="middle" align="left">[<a href="cvs_abt.html#SEC_About" title="About (this page)"> ? </a>]</td>
</tr></table>
<h2> 12.5 Problems with the $Log$ keyword. </h2>

<p>The <code>$Log$</code> keyword is somewhat
controversial.  As long as you are working on your
development system the information is easily accessible
even if you do not use the <code>$Log$</code>
keyword--just do a <code>cvs log</code>.  Once you export
the file the history information might be useless
anyhow.
</p><p>A more serious concern is that <small>CVS</small> is not good at
handling <code>$Log$</code> entries when a branch is
merged onto the main trunk.  Conflicts often result
from the merging operation.
</p><p>People also tend to &quot;fix&quot; the log entries in the file
(correcting spelling mistakes and maybe even factual
errors).  If that is done the information from
<code>cvs log</code> will not be consistent with the
information inside the file.  This may or may not be a
problem in real life.
</p><p>It has been suggested that the <code>$Log$</code>
keyword should be inserted <em>last</em> in the file, and
not in the files header, if it is to be used at all.
That way the long list of change messages will not
interfere with everyday source file browsing.
</p><hr size="6">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC98" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="cvs_13.html#SEC104" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left"> &nbsp; <td valign="middle" align="left">[<a href="cvs.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="cvs_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="cvs_24.html#SEC188" title="Concept index">Index</a>]</td>
<td valign="middle" align="left">[<a href="cvs_abt.html#SEC_About" title="About (this page)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated by <i>a tester</i> on <i>a sunny day</i>
  using <a href="http://texi2html.cvshome.org/"><i>texi2html</i></a>.
 </font>
 <br>

</p>
</body>
</html>
